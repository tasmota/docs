<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Documentation (Wiki) for Tasmota"><link href=https://tasmota.github.io/docs/Bluetooth/ rel=canonical><link href=../TasmotaClient/ rel=prev><link href=../DALI/ rel=next><link rel=icon href=../_media/favicon.ico><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.6.23"><title>BLE Gateway - Tasmota</title><link rel=stylesheet href=../assets/stylesheets/main.84d31ad4.min.css><link rel=stylesheet href=../assets/stylesheets/palette.06af60db.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Barlow:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Barlow";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=../assets/css/anchor-fix.css><script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><script id=__analytics>function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config","G-8J08F8X90S"),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","G-8J08F8X90S",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=G-8J08F8X90S",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script><script>"undefined"!=typeof __md_analytics&&__md_analytics()</script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=blue data-md-color-accent=indigo> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#bluetooth-low-energy-sensors class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class="md-header md-header--shadow md-header--lifted" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=.. title=Tasmota class="md-header__button md-logo" aria-label=Tasmota data-md-component=logo> <img src=../_media/logo.svg alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> Tasmota </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> BLE Gateway </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme=default data-md-color-primary=blue data-md-color-accent=indigo aria-label="Switch to dark mode" type=radio name=__palette id=__palette_0> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6m0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4M7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme=slate data-md-color-primary=blue data-md-color-accent=deep-purple aria-label="Switch to light mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_0 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3"/></svg> </label> </form> <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg> </button> </nav> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/arendst/tasmota title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg> </div> <div class=md-source__repository> arendst/tasmota </div> </a> </div> </nav> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=.. class=md-tabs__link> Home </a> </li> <li class="md-tabs__item md-tabs__item--active"> <a href=../Features/ class=md-tabs__link> Features </a> </li> <li class=md-tabs__item> <a href=../ESP32/ class=md-tabs__link> ESP32 </a> </li> <li class=md-tabs__item> <a href=../Integrations/ class=md-tabs__link> Smart Home Integrations </a> </li> <li class=md-tabs__item> <a href=../Supported-Peripherals/ class=md-tabs__link> Peripherals </a> </li> <li class=md-tabs__item> <a href=../Configuration-Procedure-for-New-Devices/ class=md-tabs__link> Supported Devices </a> </li> <li class=md-tabs__item> <a href=../FAQ/ class=md-tabs__link> Help </a> </li> <li class=md-tabs__item> <a href=http://tasmota.github.io/install class=md-tabs__link> Web Installer </a> </li> </ul> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=.. title=Tasmota class="md-nav__button md-logo" aria-label=Tasmota data-md-component=logo> <img src=../_media/logo.svg alt=logo> </a> Tasmota </label> <div class=md-nav__source> <a href=https://github.com/arendst/tasmota title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg> </div> <div class=md-source__repository> arendst/tasmota </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_1> <label class=md-nav__link for=__nav_1 id=__nav_1_label tabindex=0> <span class=md-ellipsis> Home </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_1_label aria-expanded=false> <label class=md-nav__title for=__nav_1> <span class="md-nav__icon md-icon"></span> Home </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=.. class=md-nav__link> <span class=md-ellipsis> News </span> </a> </li> <li class=md-nav__item> <a href=../About/ class=md-nav__link> <span class=md-ellipsis> About </span> </a> </li> <li class=md-nav__item> <a href=../Getting-Started/ class=md-nav__link> <span class=md-ellipsis> Getting Started </span> </a> </li> <li class=md-nav__item> <a href=../Upgrading/ class=md-nav__link> <span class=md-ellipsis> Upgrading </span> </a> </li> <li class=md-nav__item> <a href=../MQTT/ class=md-nav__link> <span class=md-ellipsis> MQTT </span> </a> </li> <li class=md-nav__item> <a href=../Commands/ class=md-nav__link> <span class=md-ellipsis> Commands </span> </a> </li> <li class=md-nav__item> <a href=../Templates/ class=md-nav__link> <span class=md-ellipsis> Templates </span> </a> </li> <li class=md-nav__item> <a href=../Components/ class=md-nav__link> <span class=md-ellipsis> Components </span> </a> </li> <li class=md-nav__item> <a href=../Modules/ class=md-nav__link> <span class=md-ellipsis> Modules </span> </a> </li> <li class=md-nav__item> <a href=../Peripherals/ class=md-nav__link> <span class=md-ellipsis> Peripherals </span> </a> </li> <li class=md-nav__item> <a href=../WebUI/ class=md-nav__link> <span class=md-ellipsis> WebUI </span> </a> </li> <li class=md-nav__item> <a href=../Firmware-Builds/ class=md-nav__link> <span class=md-ellipsis> Firmware Builds </span> </a> </li> <li class=md-nav__item> <a href=../Compile-your-build/ class=md-nav__link> <span class=md-ellipsis> Compiling </span> </a> </li> <li class=md-nav__item> <a href=../Contributing/ class=md-nav__link> <span class=md-ellipsis> Contributing </span> </a> </li> <li class=md-nav__item> <a href=../Download/ class=md-nav__link> <span class=md-ellipsis> Download </span> </a> </li> <li class=md-nav__item> <a href=https://github.com/arendst/Tasmota/discussions/categories/show-and-tell class=md-nav__link> <span class=md-ellipsis> Project Showcase </span> </a> </li> <li class=md-nav__item> <a href=../For-Developers/ class=md-nav__link> <span class=md-ellipsis> For Developers </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2 checked> <label class=md-nav__link for=__nav_2 id=__nav_2_label tabindex> <span class=md-ellipsis> Features </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_2_label aria-expanded=true> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> Features </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../Features/ class=md-nav__link> <span class=md-ellipsis> Introduction </span> </a> </li> <li class=md-nav__item> <a href=../ADC/ class=md-nav__link> <span class=md-ellipsis> Analog Pin </span> </a> </li> <li class=md-nav__item> <a href=../ArtNet/ class=md-nav__link> <span class=md-ellipsis> ArtNet DMX </span> </a> </li> <li class=md-nav__item> <a href=../Buttons-and-Switches/ class=md-nav__link> <span class=md-ellipsis> Buttons and Switches </span> </a> </li> <li class=md-nav__item> <a href=../DeepSleep/ class=md-nav__link> <span class=md-ellipsis> DeepSleep </span> </a> </li> <li class=md-nav__item> <a href=../Device-Groups/ class=md-nav__link> <span class=md-ellipsis> Device Groups </span> </a> </li> <li class=md-nav__item> <a href=../Universal-Display-Driver/ class=md-nav__link> <span class=md-ellipsis> Universal Display and Universal Touch drivers (uDisplay/uTouch) </span> </a> </li> <li class=md-nav__item> <a href=../Displays/ class=md-nav__link> <span class=md-ellipsis> Displays </span> </a> </li> <li class=md-nav__item> <a href=../Dynamic-Sleep/ class=md-nav__link> <span class=md-ellipsis> Dynamic Sleep </span> </a> </li> <li class=md-nav__item> <a href=../I2CDEVICES/ class=md-nav__link> <span class=md-ellipsis> I2C Devices </span> </a> </li> <li class=md-nav__item> <a href=../I2S-Audio/ class=md-nav__link> <span class=md-ellipsis> I2S Audio </span> </a> </li> <li class=md-nav__item> <a href=../IPv6/ class=md-nav__link> <span class=md-ellipsis> IPv6 </span> </a> </li> <li class=md-nav__item> <a href=../Lights/ class=md-nav__link> <span class=md-ellipsis> Lights </span> </a> </li> <li class=md-nav__item> <a href=../Matter/ class=md-nav__link> <span class=md-ellipsis> Matter </span> </a> </li> <li class=md-nav__item> <a href=../PIR-Motion-Sensors/ class=md-nav__link> <span class=md-ellipsis> PIR Motion Sensors </span> </a> </li> <li class=md-nav__item> <a href=../Power-Monitoring-Calibration/ class=md-nav__link> <span class=md-ellipsis> Power Monitoring Calibration </span> </a> </li> <li class=md-nav__item> <a href=../PWM-dimmer-switch/ class=md-nav__link> <span class=md-ellipsis> PWM Dimmer </span> </a> </li> <li class=md-nav__item> <a href=../Rules/ class=md-nav__link> <span class=md-ellipsis> Rules </span> </a> </li> <li class=md-nav__item> <a href=../Scripting-Language/ class=md-nav__link> <span class=md-ellipsis> Scripting Language </span> </a> </li> <li class=md-nav__item> <a href=../Blinds-and-Shutters/ class=md-nav__link> <span class=md-ellipsis> Shutters and Blinds </span> </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_21 checked> <label class=md-nav__link for=__nav_2_21 id=__nav_2_21_label tabindex=0> <span class=md-ellipsis> Protocol Bridging </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_21_label aria-expanded=true> <label class=md-nav__title for=__nav_2_21> <span class="md-nav__icon md-icon"></span> Protocol Bridging </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../TasmotaClient/ class=md-nav__link> <span class=md-ellipsis> Arduino MCU </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> BLE Gateway </span> <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> BLE Gateway </span> </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#bluetooth-low-energy-sensors class=md-nav__link> <span class=md-ellipsis> Bluetooth Low Energy Sensors </span> </a> <nav class=md-nav aria-label="Bluetooth Low Energy Sensors"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#supported-devices class=md-nav__link> <span class=md-ellipsis> Supported Devices </span> </a> </li> <li class=md-nav__item> <a href=#encryption-and-bind_key class=md-nav__link> <span class=md-ellipsis> Encryption and bind_key </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#using-hm-1x class=md-nav__link> <span class=md-ellipsis> using HM-1x </span> </a> <nav class=md-nav aria-label="using HM-1x"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#features class=md-nav__link> <span class=md-ellipsis> Features </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#using-nrf24l01 class=md-nav__link> <span class=md-ellipsis> using nRF24L01(+) </span> </a> <nav class=md-nav aria-label="using nRF24L01(+)"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#configuration class=md-nav__link> <span class=md-ellipsis> Configuration </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#commands class=md-nav__link> <span class=md-ellipsis> Commands </span> </a> </li> <li class=md-nav__item> <a href=#ibeacon class=md-nav__link> <span class=md-ellipsis> iBeacon </span> </a> <nav class=md-nav aria-label=iBeacon> <ul class=md-nav__list> <li class=md-nav__item> <a href=#hm-1x-or-nrf24l01 class=md-nav__link> <span class=md-ellipsis> HM-1x or nRF24L01(+) </span> </a> </li> <li class=md-nav__item> <a href=#features_1 class=md-nav__link> <span class=md-ellipsis> Features </span> </a> </li> <li class=md-nav__item> <a href=#supported-devices_1 class=md-nav__link> <span class=md-ellipsis> Supported Devices </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../DALI/ class=md-nav__link> <span class=md-ellipsis> DALI </span> </a> </li> <li class=md-nav__item> <a href=../HDMI_CEC/ class=md-nav__link> <span class=md-ellipsis> HDMI CEC </span> </a> </li> <li class=md-nav__item> <a href=../Tasmota-IR/ class=md-nav__link> <span class=md-ellipsis> IR Communication </span> </a> </li> <li class=md-nav__item> <a href=../Projector/ class=md-nav__link> <span class=md-ellipsis> LCD/DLP Projector Control </span> </a> </li> <li class=md-nav__item> <a href=../LoRa-and-LoRaWan-Bridge/ class=md-nav__link> <span class=md-ellipsis> LoRa and LoRaWan Bridge </span> </a> </li> <li class=md-nav__item> <a href=../Modbus-Bridge/ class=md-nav__link> <span class=md-ellipsis> Modbus Bridge </span> </a> </li> <li class=md-nav__item> <a href=../OpenTherm/ class=md-nav__link> <span class=md-ellipsis> OpenTherm </span> </a> </li> <li class=md-nav__item> <a href=../RF-Protocol/ class=md-nav__link> <span class=md-ellipsis> RF Communication </span> </a> </li> <li class=md-nav__item> <a href=../Serial-to-TCP-Bridge/ class=md-nav__link> <span class=md-ellipsis> Serial to TCP Bridge </span> </a> </li> <li class=md-nav__item> <a href=../TWAI/ class=md-nav__link> <span class=md-ellipsis> TWAI </span> </a> </li> <li class=md-nav__item> <a href=../Telegram/ class=md-nav__link> <span class=md-ellipsis> Telegram </span> </a> </li> <li class=md-nav__item> <a href=../Zigbee/ class=md-nav__link> <span class=md-ellipsis> Zigbee </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../Smart-Meter-Interface/ class=md-nav__link> <span class=md-ellipsis> Smart Meter Interface </span> </a> </li> <li class=md-nav__item> <a href=../Thermostat/ class=md-nav__link> <span class=md-ellipsis> Thermostat </span> </a> </li> <li class=md-nav__item> <a href=../Timers/ class=md-nav__link> <span class=md-ellipsis> Timers </span> </a> </li> <li class=md-nav__item> <a href=../TLS/ class=md-nav__link> <span class=md-ellipsis> TLS Secured MQTT </span> </a> </li> <li class=md-nav__item> <a href=../TuyaMCU/ class=md-nav__link> <span class=md-ellipsis> TuyaMCU </span> </a> </li> <li class=md-nav__item> <a href=../UFS/ class=md-nav__link> <span class=md-ellipsis> Universal File System </span> </a> </li> <li class=md-nav__item> <a href=../Range-Extender/ class=md-nav__link> <span class=md-ellipsis> Wi-Fi Range Extender </span> </a> </li> <li class=md-nav__item> <a href=../Wireguard/ class=md-nav__link> <span class=md-ellipsis> Wireguard VPN </span> </a> </li> <li class=md-nav__item> <a href=../Tutorials/ class=md-nav__link> <span class=md-ellipsis> Projects and Tutorials </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3> <label class=md-nav__link for=__nav_3 id=__nav_3_label tabindex=0> <span class=md-ellipsis> ESP32 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=false> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> ESP32 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../ESP32/ class=md-nav__link> <span class=md-ellipsis> Tasmota32 Features </span> </a> </li> <li class=md-nav__item> <a href=../Berry/ class=md-nav__link> <span class=md-ellipsis> Berry </span> </a> </li> <li class=md-nav__item> <a href=../Bluetooth_ESP32/ class=md-nav__link> <span class=md-ellipsis> Bluetooth Low Energy </span> </a> </li> <li class=md-nav__item> <a href=../LVGL/ class=md-nav__link> <span class=md-ellipsis> LVGL </span> </a> </li> <li class=md-nav__item> <a href=../HASPmota/ class=md-nav__link> <span class=md-ellipsis> HASPmota </span> </a> </li> <li class=md-nav__item> <a href=../Matter/ class=md-nav__link> <span class=md-ellipsis> Matter </span> </a> </li> <li class=md-nav__item> <a href=../Tasmota-Extension/ class=md-nav__link> <span class=md-ellipsis> Tasmota Extension </span> </a> </li> <li class=md-nav__item> <a href=../Tasmota-Application/ class=md-nav__link> <span class=md-ellipsis> Tasmota Application Files </span> </a> </li> <li class=md-nav__item> <a href=../TFL/ class=md-nav__link> <span class=md-ellipsis> TensorFlow Lite </span> </a> </li> <li class=md-nav__item> <a href=../TouchPin/ class=md-nav__link> <span class=md-ellipsis> Touch GPIOs </span> </a> </li> <li class=md-nav__item> <a href=../Safeboot/ class=md-nav__link> <span class=md-ellipsis> Safeboot Partition Layout </span> </a> </li> <li class=md-nav__item> <a href=https://templates.blakadder.com/esp32 class=md-nav__link> <span class=md-ellipsis> Supported Devices </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4> <label class=md-nav__link for=__nav_4 id=__nav_4_label tabindex=0> <span class=md-ellipsis> Smart Home Integrations </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_4_label aria-expanded=false> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Smart Home Integrations </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../Integrations/ class=md-nav__link> <span class=md-ellipsis> Introduction </span> </a> </li> <li class=md-nav__item> <a href=../Alexa/ class=md-nav__link> <span class=md-ellipsis> Alexa </span> </a> </li> <li class=md-nav__item> <a href=../AWS-IoT/ class=md-nav__link> <span class=md-ellipsis> AWS IoT </span> </a> </li> <li class=md-nav__item> <a href=../Domoticz/ class=md-nav__link> <span class=md-ellipsis> Domoticz </span> </a> </li> <li class=md-nav__item> <a href=../Home-Assistant/ class=md-nav__link> <span class=md-ellipsis> Home Assistant </span> </a> </li> <li class=md-nav__item> <a href=../Homebridge/ class=md-nav__link> <span class=md-ellipsis> Homebridge </span> </a> </li> <li class=md-nav__item> <a href=https://homey.app/en-us/app/com.paveld.tasmota/Tasmota-MQTT/ class=md-nav__link> <span class=md-ellipsis> Homey </span> </a> </li> <li class=md-nav__item> <a href=../HomeSeer/ class=md-nav__link> <span class=md-ellipsis> HomeSeer </span> </a> </li> <li class=md-nav__item> <a href=../IP-Symcon/ class=md-nav__link> <span class=md-ellipsis> IP Symcon </span> </a> </li> <li class=md-nav__item> <a href=../KNX/ class=md-nav__link> <span class=md-ellipsis> KNX </span> </a> </li> <li class=md-nav__item> <a href=../NodeRed/ class=md-nav__link> <span class=md-ellipsis> NodeRed </span> </a> </li> <li class=md-nav__item> <a href=../nymea/ class=md-nav__link> <span class=md-ellipsis> nymea </span> </a> </li> <li class=md-nav__item> <a href=../Octoprint/ class=md-nav__link> <span class=md-ellipsis> OctoPrint </span> </a> </li> <li class=md-nav__item> <a href=../openHAB/ class=md-nav__link> <span class=md-ellipsis> openHAB </span> </a> </li> <li class=md-nav__item> <a href=../otto/ class=md-nav__link> <span class=md-ellipsis> Otto </span> </a> </li> <li class=md-nav__item> <a href=https://github.com/arendst/Tasmota/issues/3769 class=md-nav__link> <span class=md-ellipsis> IOBroker </span> </a> </li> <li class=md-nav__item> <a href=https://github.com/tim-hellhake/tasmota-adapter class=md-nav__link> <span class=md-ellipsis> Mozilla WebThings Adapter </span> </a> </li> <li class=md-nav__item> <a href=https://github.com/hongtat/tasmota-connect class=md-nav__link> <span class=md-ellipsis> SmartThings </span> </a> </li> <li class=md-nav__item> <a href=https://github.com/Gifford47/tasmohab/blob/master/README.md class=md-nav__link> <span class=md-ellipsis> Tasmohab </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../Supported-Peripherals/ class=md-nav__link> <span class=md-ellipsis> Peripherals </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6> <label class=md-nav__link for=__nav_6 id=__nav_6_label tabindex=0> <span class=md-ellipsis> Supported Devices </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_6_label aria-expanded=false> <label class=md-nav__title for=__nav_6> <span class="md-nav__icon md-icon"></span> Supported Devices </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../Configuration-Procedure-for-New-Devices/ class=md-nav__link> <span class=md-ellipsis> Configure Unknown Device </span> </a> </li> <li class=md-nav__item> <a href="https://templates.blakadder.com/ " target='_blank""' class=md-nav__link> <span class=md-ellipsis> All Supported Devices </span> </a> </li> <li class=md-nav__item> <a href=../Pinouts/ class=md-nav__link> <span class=md-ellipsis> Wi-Fi Module Pinouts </span> </a> </li> <li class=md-nav__item> <a href=../Supported-Modules/ class=md-nav__link> <span class=md-ellipsis> Supported Modules </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_7> <label class=md-nav__link for=__nav_7 id=__nav_7_label tabindex=0> <span class=md-ellipsis> Help </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_7_label aria-expanded=false> <label class=md-nav__title for=__nav_7> <span class="md-nav__icon md-icon"></span> Help </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../FAQ/ class=md-nav__link> <span class=md-ellipsis> FAQ </span> </a> </li> <li class=md-nav__item> <a href=../Troubleshooting/ class=md-nav__link> <span class=md-ellipsis> Troubleshooting </span> </a> </li> <li class=md-nav__item> <a href=../Device-Recovery/ class=md-nav__link> <span class=md-ellipsis> Device Recovery </span> </a> </li> <li class=md-nav__item> <a href="https://discord.gg/Ks2Kzd4 " target='_blank""' class=md-nav__link> <span class=md-ellipsis> Discord Support </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=http://tasmota.github.io/install class=md-nav__link> <span class=md-ellipsis> Web Installer </span> </a> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#bluetooth-low-energy-sensors class=md-nav__link> <span class=md-ellipsis> Bluetooth Low Energy Sensors </span> </a> <nav class=md-nav aria-label="Bluetooth Low Energy Sensors"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#supported-devices class=md-nav__link> <span class=md-ellipsis> Supported Devices </span> </a> </li> <li class=md-nav__item> <a href=#encryption-and-bind_key class=md-nav__link> <span class=md-ellipsis> Encryption and bind_key </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#using-hm-1x class=md-nav__link> <span class=md-ellipsis> using HM-1x </span> </a> <nav class=md-nav aria-label="using HM-1x"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#features class=md-nav__link> <span class=md-ellipsis> Features </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#using-nrf24l01 class=md-nav__link> <span class=md-ellipsis> using nRF24L01(+) </span> </a> <nav class=md-nav aria-label="using nRF24L01(+)"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#configuration class=md-nav__link> <span class=md-ellipsis> Configuration </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#commands class=md-nav__link> <span class=md-ellipsis> Commands </span> </a> </li> <li class=md-nav__item> <a href=#ibeacon class=md-nav__link> <span class=md-ellipsis> iBeacon </span> </a> <nav class=md-nav aria-label=iBeacon> <ul class=md-nav__list> <li class=md-nav__item> <a href=#hm-1x-or-nrf24l01 class=md-nav__link> <span class=md-ellipsis> HM-1x or nRF24L01(+) </span> </a> </li> <li class=md-nav__item> <a href=#features_1 class=md-nav__link> <span class=md-ellipsis> Features </span> </a> </li> <li class=md-nav__item> <a href=#supported-devices_1 class=md-nav__link> <span class=md-ellipsis> Supported Devices </span> </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <a href=https://github.com/tasmota/docs/blob/master/docs/Bluetooth.md title="Edit this page" class="md-content__button md-icon" rel=edit> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4zm10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1z"/></svg> </a> <h1>BLE Gateway</h1> <p>For ESP32 Bluetooth go <a href=../Bluetooth_ESP32/ >here</a></p> <h2 id=bluetooth-low-energy-sensors>Bluetooth Low Energy Sensors<a class=headerlink href=#bluetooth-low-energy-sensors title="Permanent link">~</a></h2> <p>Different vendors offer Bluetooth solutions, mostly as part of the Xiaomi brand, often under the Mijia label. The sensors supported by Tasmota use BLE (Bluetooth Low Energy) to transmit the sensor data, but they differ in their accessibilities quite substantially. </p> <p>Basically all of them use the so-called "MiBeacons" which are BLE advertisement packets with a certain data structure, which are broadcasted by the devices automatically while the device is not in an active Bluetooth connection. <br> The frequency of these messages is set by the vendor and ranges from one per 3 seconds to one per hour (e.g., for the battery status of the LYWSD03MMC). Motion sensors and BLE remote controls start to send when an event is triggered. <br> These packets already contain the sensor data and can be passively received by other devices and will be published regardless if a user decides to read out the sensors via connections or not. Thus the battery life of a BLE sensor is not influenced by reading these advertisements and the big advantage is the power efficiency as no active bi-directional connection has to be established. The other advantage is, that scanning for BLE advertisements can happen nearly parallel (very quickly one after the other), while a direct connection must be established for at least a few seconds and will then block both involved devices for that time. </p> <p>This is therefore the preferred option, if supported by the sensor.</p> <h3 id=supported-devices>Supported Devices<a class=headerlink href=#supported-devices title="Permanent link">~</a></h3> <div class="admonition note"> <p class=admonition-title>It can not be ruled out, that changes in the device firmware may break the functionality of this driver completely!</p> </div> <p>The naming conventions in the product range of Bluetooth sensors in Xiaomi universe can be a bit confusing. The exact same sensor can be advertised under slightly different names depending on the seller (Mijia, Xiaomi, Cleargrass, ...).</p> <table> <tr> <th class=th-lboi>MJ_HT_V1</th> <th class=th-lboi>LYWSD02</th> <th class=th-lboi>CGG1</th> <th class=th-lboi>CGD1</th> </tr> <tr> <td class=tg-lboi><img src=../_media/bluetooth/mj_ht_v1.png width=200></td> <td class=tg-lboi><img src=../_media/bluetooth/LYWDS02.png width=200></td> <td class=tg-lboi><img src=../_media/bluetooth/CGG1.png width=200></td> <td class=tg-lboi><img src=../_media/bluetooth/CGD1.png width=200></td> </tr> <tr> <td class=tg-lboi>temperature, humidity, battery</td> <td class=tg-lboi>temperature, humidity, battery</td> <td class=tg-lboi>temperature, humidity, battery</td> <td class=tg-lboi>temperature, humidity, battery</td> </tr> <tr> <td class=tg-lboi>passive for all entities, reliable battery value</td> <td class=tg-lboi>battery only active, thus not on the NRF24L01, set clock and unit, very frequent data sending</td> <td class=tg-lboi>passive for all entities, reliable battery value</td> <td class=tg-lboi>battery only active, thus not on the NRF24L01, no reliable battery value, no clock functions</td> </tr> </table> <table> <tr> <th class=th-lboi>MiFlora</th> <th class=th-lboi>LYWSD03MMC / ATC</th> <th class=th-lboi>NLIGHT</th> <th class=th-lboi>MJYD2S</th> </tr> <tr> <td class=tg-lboi><img src=../_media/bluetooth/miflora.png width=200></td> <td class=tg-lboi><img src=../_media/bluetooth/LYWSD03MMC.png width=200></td> <td class=tg-lboi><img src=../_media/bluetooth/nlight.png width=200></td> <td class=tg-lboi><img src=../_media/bluetooth/mjyd2s.png width=200></td> </tr> <tr> <td class=tg-lboi>temperature, illuminance, soil humidity, soil fertility, battery, firmware version</td> <td class=tg-lboi>temperature, humidity, battery</td> <td class=tg-lboi>motion</td> <td class=tg-lboi>motion, illuminance, battery, no-motion-time</td> </tr> <tr> <td class=tg-lboi>passive only with newer firmware (>3.0?), battery only active, thus not on the NRF24L01</td> <td class=tg-lboi>passive only with decryption or using custom ATC-firmware, no reliable battery value with stock firmware</td> <td class=tg-lboi>NRF24L01, ESP32</td> <td class=tg-lboi>passive only with decryption, thus only NRF24L01, ESP32</td> </tr> </table> <table> <tr> <th class=th-lboi>YEE RC</th> <th class=th-lboi>MHO-C401</th> <th class=th-lboi>MHO-C303</th> </tr> <tr> <td class=tg-lboi><img src=../_media/bluetooth/yeerc.png width=200></td> <td class=tg-lboi><img src=../_media/bluetooth/MHO-C401.png width=200></td> <td class=tg-lboi><img src=../_media/bluetooth/MHO-C303.png width=200></td> </tr> <tr> <td class=tg-lboi>button press (single and long)</td> <td class=tg-lboi>temperature, humidity, battery</td> <td class=tg-lboi>temperature, humidity, battery</td> </tr> <tr> <td class=tg-lboi>passive</td> <td class=tg-lboi>equal to the LYWS03MMC, but no custom firmware yet</td> <td class=tg-lboi>passive for all entities, set clock and unit, no alarm functions, very frequent data sending</td> </tr> </table> <p><em>passive</em> means data is received via BLE advertisements while <em>active</em> means data is received via a bidirectional connection to the sensor.</p> <p><strong>LYWSD03MMC</strong> sends encrypted sensor data every 10 minutes. As there are no confirmed reports about correct battery presentation of the sensor (always shows 99%), this function is currently not supported. </p> <p><strong>MJYD2S</strong> sends motion detection events and 2 discrete illuminance levels (1 lux or 100 lux for a dark or bright environment). Additionally battery level and contiguous time without motion in discrete growing steps (no motion time = NMT). </p> <h3 id=encryption-and-bind_key>Encryption and bind_key<a class=headerlink href=#encryption-and-bind_key title="Permanent link">~</a></h3> <p>Most of the older sensors use unencrypted messages, which can be read by all kinds of BLE devices or even a NRF24L01. With the arrival of newer sensors, such as LYWSD03MMC, MHO-C401 or MJYD2S, came the problem of encrypted data in MiBeacons, which can be decrypted in Tasmota (not yet with the HM-1x).</p> <p>Some sensor still allow an unencrypted connection the reading of the sensor data using normal subscription methods to GATT-services (currently used on the HM-1x). This is more power hungry than the passive reading of BLE advertisements. </p> <p>Some other sensors like the MJYD2S are not usable without the "bind_key". </p> <p>It is recommended to obtain the bind_key if usable by your BLE driver to reduce the battery drain. </p> <h4 id=obtain-bind_key>Obtain bind_key<a class=headerlink href=#obtain-bind_key title="Permanent link">~</a></h4> <p>To get the necessary decryption key ("bind_key") use:</p> <ul> <li><a href=https://github.com/PiotrMachowski/Xiaomi-cloud-tokens-extractor>Xiaomi Cloud Tokens Extractor</a> (Windows executable or Python) - works on any device in the Mi Home app</li> <li><a href=https://pvvx.github.io/ATC_MiThermometer/TelinkMiFlasher.html>pvvx Telink Flasher</a> (Webpage) - LYWSD03MMC, MHO-C401 and CGG1 only</li> <li><a href=https://atc1441.github.io/TelinkFlasher.html>ATC Telink Flasher</a> (Webpage) - LYWSD03MMC only</li> </ul> <p>Telink Flashers allow the generation of a bind_key by faking a pairing with the Xiaomi cloud.</p> <h4 id=use-bind_key>Use bind_key<a class=headerlink href=#use-bind_key title="Permanent link">~</a></h4> <p>Use the bind_key and MAC address of the sensor to use with command <code>NRFkey</code>. Tasmota will receive the sensor data roughly every 10 minutes (in two chunks for humidity and temperature with about a minute in between) and decode the data. This is the most energy efficient way. </p> <p>The current way of storing these keys on the NRF24L01 is to use <a href=../Commands/#nrfkey><code>NRFkey</code></a>):</p> <p><div class=highlight><pre><span></span><code><span class=nf>rule1</span><span class=w> </span><span class=n>on</span><span class=w> </span><span class=kt>System</span><span class=o>#</span><span class=kt>Boot</span><span class=w> </span><span class=kr>do</span><span class=w> </span><span class=n>backlog</span><span class=w> </span><span class=kt>NRFkey</span><span class=w> </span><span class=mi>00112233445566778899</span><span class=kt>AABBCCDDEEFF112233445566</span><span class=p>;</span><span class=w> </span><span class=kt>NRFkey</span><span class=w> </span><span class=mi>00112233445566778899</span><span class=kt>AABBCCDDEEFF112233445566</span><span class=p>;</span><span class=w> </span><span class=kt>NRFPage</span><span class=w> </span><span class=mi>6</span><span class=p>;</span><span class=w> </span><span class=kt>NRFUse</span><span class=w> </span><span class=mi>0</span><span class=p>;</span><span class=w> </span><span class=kt>NRFUse</span><span class=w> </span><span class=mi>4</span><span class=w> </span><span class=n>endon</span>
</code></pre></div> (key for two sensors, 6 sensors per page in the WebUI, turn off all sensors, turn on LYWSD03MMC) </p> <div class="admonition note"> <p class=admonition-title>Note</p> <p>This option is currently not available for the HM-10 because of memory considerations as part of the standard sensor-firmware package. </p> </div> <p>Encryption is not supported on HM-1x (for legacy reasons). The only method is to connect to the sensor from time to time. This circumvents the data encryption but drains the battery fast. Thus it is only recommended as a last resort.</p> <h5 id=custom-firmware>Custom firmware<a class=headerlink href=#custom-firmware title="Permanent link">~</a></h5> <p><a href=https://pvvx.github.io/ATC_MiThermometer/TelinkMiFlasher.html>pvvx Telink Flasher</a> also allows to flash custom firmware on <a href=https://github.com/pvvx/ATC_MiThermometer/blob/master/README.md#firmware>supported sensors</a>. This will work out of the box with Tasmota. This firmware does send data more frequently and is a bit more power hungry than the stock firmware. </p> <h4 id=working-principle-of-tasmota-ble-drivers-85>Working principle of Tasmota BLE drivers (&gt;8.5.)<a class=headerlink href=#working-principle-of-tasmota-ble-drivers-85 title="Permanent link">~</a></h4> <p>The idea is to provide drivers with as many automatic functions as possible. Besides the hardware setup, there are zero or very few things to configure.<br> The sensor namings are based on the original sensor names and shortened if appropriate (Flower care -&gt; Flora). A part of the MAC will be added to the name as a suffix.<br> All sensors are treated as if they are physically connected to the ESP8266 device. For motion and remote control sensors, MQTT messages will be published in (nearly) real time.</p> <p>Take note that only the ESP32 and the HM-1x modules are real BLE devices whereas the NRF24L01(+) is only a generic 2.4 GHz transceiver with very limited capabilities that was finagled into reading BLE packets. </p> <h2 id=using-hm-1x>using HM-1x<a class=headerlink href=#using-hm-1x title="Permanent link">~</a></h2> <div class="admonition info"> <p class=admonition-title>This feature is included only in tasmota-sensors.bin</p> </div> <p>Otherwise you must <a href=../Compile-your-build/ >compile your build</a>. Add the following to <code>user_config_override.h</code>:</p> <div class=highlight><pre><span></span><code><span class=cp>#ifndef USE_HM10</span>
<span class=cp>#define USE_HM10          </span><span class=c1>// Add support for HM-10 as a BLE-bridge (+9k3 code)</span>
<span class=cp>#endif</span>
</code></pre></div> <h3 id=features>Features<a class=headerlink href=#features title="Permanent link">~</a></h3> <p>Supported sensors will be connected to at a set interval (default interval equals TelePeriod). A subscription is established for 5 seconds and data (e.g. temperature, humidity and battery) is read and reported to an mqtt topic (Dew point is calculated):</p> <div class=highlight><pre><span></span><code><span class=kc>tele</span><span class=err>/%</span><span class=kc>t</span><span class=err>opic%/SENSOR</span><span class=w> </span><span class=err>=</span><span class=w> </span><span class=p>{</span><span class=nt>&quot;Time&quot;</span><span class=p>:</span><span class=s2>&quot;2020-03-24T12:47:51&quot;</span><span class=p>,</span><span class=nt>&quot;LYWSD03-52680f&quot;</span><span class=p>:{</span><span class=nt>&quot;Temperature&quot;</span><span class=p>:</span><span class=mf>21.1</span><span class=p>,</span><span class=nt>&quot;Humidity&quot;</span><span class=p>:</span><span class=mf>58.0</span><span class=p>,</span><span class=nt>&quot;DewPoint&quot;</span><span class=p>:</span><span class=mf>12.5</span><span class=p>,</span><span class=nt>&quot;Battery&quot;</span><span class=p>:</span><span class=mi>100</span><span class=p>},</span><span class=nt>&quot;LYWSD02-a2fd09&quot;</span><span class=p>:{</span><span class=nt>&quot;Temperature&quot;</span><span class=p>:</span><span class=mf>21.4</span><span class=p>,</span><span class=nt>&quot;Humidity&quot;</span><span class=p>:</span><span class=mf>57.0</span><span class=p>,</span><span class=nt>&quot;DewPoint&quot;</span><span class=p>:</span><span class=mf>12.5</span><span class=p>,</span><span class=nt>&quot;Battery&quot;</span><span class=p>:</span><span class=mi>2</span><span class=p>},</span><span class=nt>&quot;MJ_HT_V1-d8799d&quot;</span><span class=p>:{</span><span class=nt>&quot;Temperature&quot;</span><span class=p>:</span><span class=mf>21.4</span><span class=p>,</span><span class=nt>&quot;Humidity&quot;</span><span class=p>:</span><span class=mf>54.6</span><span class=p>,</span><span class=nt>&quot;DewPoint&quot;</span><span class=p>:</span><span class=mf>11.9</span><span class=p>},</span><span class=nt>&quot;TempUnit&quot;</span><span class=p>:</span><span class=s2>&quot;C&quot;</span><span class=p>}</span>
</code></pre></div> <p>After a completed discovery scan, the driver will report the number of found sensors. As Tasmota can not know how many sensors are meant to be discovered you have to force a re-scan until the desired number of devices is found. <div class=highlight><pre><span></span><code><span class=kt>Rule1</span><span class=w> </span><span class=kt>ON</span><span class=w> </span><span class=kt>HM10</span><span class=o>#</span><span class=kt>Found</span><span class=o>&lt;</span><span class=mi>6</span><span class=w> </span><span class=kt>DO</span><span class=w> </span><span class=kt>Add1</span><span class=w> </span><span class=mi>1</span><span class=w> </span><span class=kt>ENDON</span><span class=w> </span><span class=kt>ON</span><span class=w> </span><span class=kt>Var1</span><span class=o>#</span><span class=kt>State</span><span class=o>&lt;=</span><span class=mi>3</span><span class=w> </span><span class=kt>DO</span><span class=w> </span><span class=kt>HM10Scan</span><span class=w> </span><span class=kt>ENDON</span><span class=w> </span>
</code></pre></div> This will re-scan up to 3 times if less than 6 sensors are found.</p> <h2 id=using-nrf24l01>using nRF24L01(+)<a class=headerlink href=#using-nrf24l01 title="Permanent link">~</a></h2> <h3 id=configuration>Configuration<a class=headerlink href=#configuration title="Permanent link">~</a></h3> <p>You must <a href=../Compile-your-build/ >compile your build</a>. Change the following in <code>my_user_config.h</code>:</p> <div class=highlight><pre><span></span><code><span class=cp>#define USE_SPI                                  </span><span class=c1>// Hardware SPI using GPIO12(MISO), GPIO13(MOSI) and GPIO14(CLK) in addition to two user selectable GPIOs(CS and DC)</span>
<span class=cp>#ifdef USE_SPI</span>
<span class=w>  </span><span class=cp>#define USE_NRF24                              </span><span class=c1>// Add SPI support for NRF24L01(+) (+2k6 code)</span>
<span class=w>  </span><span class=cp>#ifdef USE_NRF24</span>
<span class=w>    </span><span class=cp>#define USE_MIBLE                            </span><span class=c1>// BLE-bridge for some Mijia-BLE-sensors (+4k7 code)</span>
</code></pre></div> <p>Sensors will be discriminated by using the Product ID of the MiBeacon. A human readable short product name will be shown instead of the company-assigned ID of the BLE Public Device Address (the "lower" 24 bits). </p> <p>A Tele message could like look this: </p> <div class=highlight><pre><span></span><code>10:13:38 RSL: stat/tasmota/STATUS8 = {&quot;StatusSNS&quot;:{&quot;Time&quot;:&quot;2019-12-18T10:13:38&quot;,&quot;Flora-6ab577&quot;:{&quot;Temperature&quot;:21.7,&quot;Illuminance&quot;:21,&quot;Humidity&quot;:0,&quot;Fertility&quot;:0},&quot;MJ_HT_V1-3108be&quot;:{&quot;Temperature&quot;:22.3,&quot;Humidity&quot;:56.1},&quot;TempUnit&quot;:&quot;C&quot;}}
</code></pre></div> <p>As the NRF24L01 can only read BLE-advertisements, only the data in these advertisements is accessible. All sensors have an additional GATT-interface with more data in it, but it can not be read with a NRF24L01. </p> <p>As we can not use a checksum to test data integrity of the packet, only data of sensors whose addresses showed up more than once (default = 3 times) will be published. Internally from time to time "fake" sensors will be created, when there was data corruption in the address bytes. These will be removed automatically. </p> <h2 id=commands>Commands<a class=headerlink href=#commands title="Permanent link">~</a></h2> <p>Full list of available <a href=../Commands/#bluetooth>Bluetooth commands</a>.</p> <h2 id=ibeacon>iBeacon<a class=headerlink href=#ibeacon title="Permanent link">~</a></h2> <div class="admonition info"> <p class=admonition-title>This feature is included only in tasmota-sensors.bin</p> </div> <p>Otherwise you must <a href=../Compile-your-build/ >compile your build</a>. Add the following to <code>user_config_override.h</code>:</p> <div class=highlight><pre><span></span><code><span class=cp>#ifndef USE_IBEACON</span>
<span class=cp>#define USE_IBEACON          </span><span class=c1>// Add support for bluetooth LE passive scan of ibeacon devices </span>
<span class=cp>#endif</span>
</code></pre></div> <h3 id=hm-1x-or-nrf24l01>HM-1x or nRF24L01(+)<a class=headerlink href=#hm-1x-or-nrf24l01 title="Permanent link">~</a></h3> <p>Tasmota uses a BLE 4.x module to scan for <a href=https://en.wikipedia.org/wiki/IBeacon>iBeacon</a> devices. This driver is working with <a href=../HM-10/ >HM-10 and clones</a> and <a href=../HM-17/ >HM16/HM17</a> modules and potentially other from the HM-1x series, depending on firmware capabilities.</p> <div class="admonition tip"> <p class=admonition-title>Tip</p> <p>If using an external module, When first connected some modules will be in peripheral mode. You have to change it to central mode using commands <code>Sensor52 1</code> and <code>Sensor52 2</code>.</p> </div> <h3 id=features_1>Features<a class=headerlink href=#features_1 title="Permanent link">~</a></h3> <p>For a list of all available commands see <a href=../Commands/#sensor52>Sensor52</a> command. </p> <p>This driver reports all beacons found during a scan with its ID (derived from beacon's MAC address) prefixed with <code>IBEACON_</code> and RSSI value.</p> <p>Every beacon report is published as an MQTT tele/%topic%/SENSOR in a separate message:</p> <div class=highlight><pre><span></span><code><span class=kc>tele</span><span class=err>/ibeaco</span><span class=kc>n</span><span class=err>/SENSOR</span><span class=w> </span><span class=err>=</span><span class=w> </span><span class=p>{</span><span class=nt>&quot;Time&quot;</span><span class=p>:</span><span class=s2>&quot;2021-01-02T12:08:40&quot;</span><span class=p>,</span><span class=nt>&quot;IBEACON&quot;</span><span class=p>:{</span><span class=nt>&quot;MAC&quot;</span><span class=p>:</span><span class=s2>&quot;A4C1387FC1E1&quot;</span><span class=p>,</span><span class=nt>&quot;RSSI&quot;</span><span class=p>:</span><span class=mi>-56</span><span class=p>,</span><span class=nt>&quot;STATE&quot;</span><span class=p>:</span><span class=s2>&quot;ON&quot;</span><span class=p>}}</span>
</code></pre></div> <p>If the beacon can no longer be found during a scan and the timeout interval has passed the beacon's RSSI is set to zero (0) and it is no longer displayed in the webUI</p> <div class=highlight><pre><span></span><code><span class=kc>tele</span><span class=err>/ibeaco</span><span class=kc>n</span><span class=err>/SENSOR</span><span class=w> </span><span class=err>=</span><span class=w> </span><span class=p>{</span><span class=nt>&quot;Time&quot;</span><span class=p>:</span><span class=s2>&quot;2021-01-02T12:08:40&quot;</span><span class=p>,</span><span class=nt>&quot;IBEACON&quot;</span><span class=p>:{</span><span class=nt>&quot;MAC&quot;</span><span class=p>:</span><span class=s2>&quot;A4C1387FC1E1&quot;</span><span class=p>,</span><span class=nt>&quot;RSSI&quot;</span><span class=p>:</span><span class=mi>-56</span><span class=p>,</span><span class=nt>&quot;STATE&quot;</span><span class=p>:</span><span class=s2>&quot;OFF&quot;</span><span class=p>}}</span>
</code></pre></div> <p>Additional fields will be present depending upon the beacon, e.g. NAME, UID, MAJOR, MINOR.</p> <h3 id=supported-devices_1>Supported Devices<a class=headerlink href=#supported-devices_1 title="Permanent link">~</a></h3> <p><img src=../_media/bluetooth/nRF51822.png width=155 align=right></p> <p>All Apple compatible iBeacon devices should be discoverable. </p> <p>Various nRF51822 beacons should be fully Apple compatible, programmable and their battery lasts about a year.</p> <ul> <li><a href="https://www.amazon.com/s?k=nRF51822+4.0">Amazon.com</a></li> <li><a href=https://www.aliexpress.com/af/NRF51822-beacon.html>Aliexpress</a></li> </ul> <p>Cheap "iTag" beacons with a beeper. The battery on these lasts only about a month.</p> <ul> <li><a href="https://www.aliexpress.com/af/itag.html?trafficChannel=af&SearchText=itag&ltype=affiliate&SortType=default&g=y&CatId=0">Aliexpress</a></li> <li><a href="https://www.ebay.de/sch/i.html?_from=R40&_trksid=m570.l1313&_nkw=Smart-Tag-GPS-Tracker-Bluetooth-Anti-verlorene-Alarm-Key-Finder-Haustier-Kind&_sacat=0">eBay</a></li> <li><a href="https://www.amazon.com/s?k=itag+tracker+4.0">Amazon.com</a></li> </ul> <p><img src=../_media/bluetooth/itag.png width=225><img src=../_media/bluetooth/itag2.png width=225><img src=../_media/bluetooth/itag3.png width=225></p> <div class="admonition tip"> <p class=admonition-title>Tip</p> <p>You can activate a beacon with a beeper using command <code>IBEACON_%BEACONID%_RSSI 99</code> (ID is visible in webUI and SENSOR reports). This command can freeze the Bluetooth module and beacon scanning will stop. After a reboot of Tasmota the beacon will start beeping and scanning will resume. (untested on ESP32 native BLE)</p> </div> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> <button type=button class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg> Back to top </button> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> <div class=md-social> <a href=https://discord.gg/Ks2Kzd4 target=_blank rel=noopener title=discord.gg class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 576 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M492.5 69.8c-.2-.3-.4-.6-.8-.7-38.1-17.5-78.4-30-119.7-37.1-.4-.1-.8 0-1.1.1s-.6.4-.8.8c-5.5 9.9-10.5 20.2-14.9 30.6-44.6-6.8-89.9-6.8-134.4 0-4.5-10.5-9.5-20.7-15.1-30.6-.2-.3-.5-.6-.8-.8s-.7-.2-1.1-.2C162.5 39 122.2 51.5 84.1 69c-.3.1-.6.4-.8.7C7.1 183.5-13.8 294.6-3.6 404.2c0 .3.1.5.2.8s.3.4.5.6c44.4 32.9 94 58 146.8 74.2.4.1.8.1 1.1 0s.7-.4.9-.7c11.3-15.4 21.4-31.8 30-48.8.1-.2.2-.5.2-.8s0-.5-.1-.8-.2-.5-.4-.6-.4-.3-.7-.4c-15.8-6.1-31.2-13.4-45.9-21.9-.3-.2-.5-.4-.7-.6s-.3-.6-.3-.9 0-.6.2-.9.3-.5.6-.7c3.1-2.3 6.2-4.7 9.1-7.1.3-.2.6-.4.9-.4s.7 0 1 .1c96.2 43.9 200.4 43.9 295.5 0 .3-.1.7-.2 1-.2s.7.2.9.4c2.9 2.4 6 4.9 9.1 7.2.2.2.4.4.6.7s.2.6.2.9-.1.6-.3.9-.4.5-.6.6c-14.7 8.6-30 15.9-45.9 21.8-.2.1-.5.2-.7.4s-.3.4-.4.7-.1.5-.1.8.1.5.2.8c8.8 17 18.8 33.3 30 48.8.2.3.6.6.9.7s.8.1 1.1 0c52.9-16.2 102.6-41.3 147.1-74.2.2-.2.4-.4.5-.6s.2-.5.2-.8c12.3-126.8-20.5-236.9-86.9-334.5zm-302 267.7c-29 0-52.8-26.6-52.8-59.2s23.4-59.2 52.8-59.2c29.7 0 53.3 26.8 52.8 59.2 0 32.7-23.4 59.2-52.8 59.2m195.4 0c-29 0-52.8-26.6-52.8-59.2s23.4-59.2 52.8-59.2c29.7 0 53.3 26.8 52.8 59.2 0 32.7-23.2 59.2-52.8 59.2"/></svg> </a> <a href=https://t.me/tasmota target=_blank rel=noopener title=t.me class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M256 8a248 248 0 1 0 0 496 248 248 0 1 0 0-496m115 168.7c-3.7 39.2-19.9 134.4-28.1 178.3-3.5 18.6-10.3 24.8-16.9 25.4-14.4 1.3-25.3-9.5-39.3-18.7-21.8-14.3-34.2-23.2-55.3-37.2-24.5-16.1-8.6-25 5.3-39.5 3.7-3.8 67.1-61.5 68.3-66.7.2-.7.3-3.1-1.2-4.4s-3.6-.8-5.1-.5c-2.2.5-37.1 23.5-104.6 69.1-9.9 6.8-18.9 10.1-26.9 9.9-8.9-.2-25.9-5-38.6-9.1-15.5-5-27.9-7.7-26.8-16.3.6-4.5 6.7-9 18.4-13.7 72.3-31.5 120.5-52.3 144.6-62.3 68.9-28.6 83.2-33.6 92.5-33.8 2.1 0 6.6.5 9.6 2.9 2 1.7 3.2 4.1 3.5 6.7.5 3.2.6 6.5.4 9.8z"/></svg> </a> <a href=https://github.com/tasmota target=_blank rel=noopener title=github.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M202.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1M496 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2m-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3m-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "..", "features": ["navigation.instant", "navigation.tabs", "navigation.tabs.sticky", "navigation.top", "navigation.tracking", "content.action.edit", "content.code.copy"], "search": "../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script> <script src=../assets/javascripts/bundle.f55a23d4.min.js></script> <script src=https://unpkg.com/tablesort@5.3.0/dist/tablesort.min.js></script> <script src=../extra_javascript/tablesort.js></script> </body> </html>