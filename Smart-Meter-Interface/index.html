<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Documentation (Wiki) for Tasmota"><link href=https://tasmota.github.io/docs/Smart-Meter-Interface/ rel=canonical><link href=../Zigbee/ rel=prev><link href=../Thermostat/ rel=next><link rel=icon href=../_media/favicon.ico><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.7.3"><title>Smart Meter Interface - Tasmota</title><link rel=stylesheet href=../assets/stylesheets/main.484c7ddc.min.css><link rel=stylesheet href=../assets/stylesheets/palette.ab4e12ef.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Barlow:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Barlow";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=../assets/css/anchor-fix.css><script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><script id=__analytics>function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config","G-8J08F8X90S"),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","G-8J08F8X90S",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=G-8J08F8X90S",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script><script>"undefined"!=typeof __md_analytics&&__md_analytics()</script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=blue data-md-color-accent=indigo> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#smart-meter-interface class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class="md-header md-header--shadow md-header--lifted" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=.. title=Tasmota class="md-header__button md-logo" aria-label=Tasmota data-md-component=logo> <img src=../_media/logo.svg alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> Tasmota </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Smart Meter Interface </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme=default data-md-color-primary=blue data-md-color-accent=indigo aria-label="Switch to dark mode" type=radio name=__palette id=__palette_0> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6m0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4M7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme=slate data-md-color-primary=blue data-md-color-accent=deep-purple aria-label="Switch to light mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_0 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3"/></svg> </label> </form> <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg> </button> </nav> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/arendst/tasmota title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg> </div> <div class=md-source__repository> arendst/tasmota </div> </a> </div> </nav> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=.. class=md-tabs__link> Home </a> </li> <li class="md-tabs__item md-tabs__item--active"> <a href=../Features/ class=md-tabs__link> Features </a> </li> <li class=md-tabs__item> <a href=../ESP32/ class=md-tabs__link> ESP32 </a> </li> <li class=md-tabs__item> <a href=../Integrations/ class=md-tabs__link> Smart Home Integrations </a> </li> <li class=md-tabs__item> <a href=../Supported-Peripherals/ class=md-tabs__link> Peripherals </a> </li> <li class=md-tabs__item> <a href=../Configuration-Procedure-for-New-Devices/ class=md-tabs__link> Supported Devices </a> </li> <li class=md-tabs__item> <a href=../FAQ/ class=md-tabs__link> Help </a> </li> <li class=md-tabs__item> <a href=http://tasmota.github.io/install class=md-tabs__link> Web Installer </a> </li> </ul> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=.. title=Tasmota class="md-nav__button md-logo" aria-label=Tasmota data-md-component=logo> <img src=../_media/logo.svg alt=logo> </a> Tasmota </label> <div class=md-nav__source> <a href=https://github.com/arendst/tasmota title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg> </div> <div class=md-source__repository> arendst/tasmota </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_1> <label class=md-nav__link for=__nav_1 id=__nav_1_label tabindex=0> <span class=md-ellipsis> Home </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_1_label aria-expanded=false> <label class=md-nav__title for=__nav_1> <span class="md-nav__icon md-icon"></span> Home </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=.. class=md-nav__link> <span class=md-ellipsis> News </span> </a> </li> <li class=md-nav__item> <a href=../About/ class=md-nav__link> <span class=md-ellipsis> About </span> </a> </li> <li class=md-nav__item> <a href=../Getting-Started/ class=md-nav__link> <span class=md-ellipsis> Getting Started </span> </a> </li> <li class=md-nav__item> <a href=../Upgrading/ class=md-nav__link> <span class=md-ellipsis> Upgrading </span> </a> </li> <li class=md-nav__item> <a href=../MQTT/ class=md-nav__link> <span class=md-ellipsis> MQTT </span> </a> </li> <li class=md-nav__item> <a href=../Commands/ class=md-nav__link> <span class=md-ellipsis> Commands </span> </a> </li> <li class=md-nav__item> <a href=../Templates/ class=md-nav__link> <span class=md-ellipsis> Templates </span> </a> </li> <li class=md-nav__item> <a href=../Components/ class=md-nav__link> <span class=md-ellipsis> Components </span> </a> </li> <li class=md-nav__item> <a href=../Modules/ class=md-nav__link> <span class=md-ellipsis> Modules </span> </a> </li> <li class=md-nav__item> <a href=../Peripherals/ class=md-nav__link> <span class=md-ellipsis> Peripherals </span> </a> </li> <li class=md-nav__item> <a href=../WebUI/ class=md-nav__link> <span class=md-ellipsis> WebUI </span> </a> </li> <li class=md-nav__item> <a href=../Firmware-Builds/ class=md-nav__link> <span class=md-ellipsis> Firmware Builds </span> </a> </li> <li class=md-nav__item> <a href=../Compile-your-build/ class=md-nav__link> <span class=md-ellipsis> Compiling </span> </a> </li> <li class=md-nav__item> <a href=../Contributing/ class=md-nav__link> <span class=md-ellipsis> Contributing </span> </a> </li> <li class=md-nav__item> <a href=../Download/ class=md-nav__link> <span class=md-ellipsis> Download </span> </a> </li> <li class=md-nav__item> <a href=https://github.com/arendst/Tasmota/discussions/categories/show-and-tell class=md-nav__link> <span class=md-ellipsis> Project Showcase </span> </a> </li> <li class=md-nav__item> <a href=../For-Developers/ class=md-nav__link> <span class=md-ellipsis> For Developers </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2 checked> <label class=md-nav__link for=__nav_2 id=__nav_2_label tabindex> <span class=md-ellipsis> Features </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_2_label aria-expanded=true> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> Features </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../Features/ class=md-nav__link> <span class=md-ellipsis> Introduction </span> </a> </li> <li class=md-nav__item> <a href=../ADC/ class=md-nav__link> <span class=md-ellipsis> Analog Pin </span> </a> </li> <li class=md-nav__item> <a href=../ArtNet/ class=md-nav__link> <span class=md-ellipsis> ArtNet DMX </span> </a> </li> <li class=md-nav__item> <a href=../Buttons-and-Switches/ class=md-nav__link> <span class=md-ellipsis> Buttons and Switches </span> </a> </li> <li class=md-nav__item> <a href=../DeepSleep/ class=md-nav__link> <span class=md-ellipsis> DeepSleep </span> </a> </li> <li class=md-nav__item> <a href=../Device-Groups/ class=md-nav__link> <span class=md-ellipsis> Device Groups </span> </a> </li> <li class=md-nav__item> <a href=../Universal-Display-Driver/ class=md-nav__link> <span class=md-ellipsis> Universal Display and Universal Touch drivers (uDisplay/uTouch) </span> </a> </li> <li class=md-nav__item> <a href=../Displays/ class=md-nav__link> <span class=md-ellipsis> Displays </span> </a> </li> <li class=md-nav__item> <a href=../Dynamic-Sleep/ class=md-nav__link> <span class=md-ellipsis> Dynamic Sleep </span> </a> </li> <li class=md-nav__item> <a href=../I2CDEVICES/ class=md-nav__link> <span class=md-ellipsis> I2C Devices </span> </a> </li> <li class=md-nav__item> <a href=../I2S-Audio/ class=md-nav__link> <span class=md-ellipsis> I2S Audio </span> </a> </li> <li class=md-nav__item> <a href=../IPv6/ class=md-nav__link> <span class=md-ellipsis> IPv6 </span> </a> </li> <li class=md-nav__item> <a href=../Lights/ class=md-nav__link> <span class=md-ellipsis> Lights </span> </a> </li> <li class=md-nav__item> <a href=../Matter/ class=md-nav__link> <span class=md-ellipsis> Matter </span> </a> </li> <li class=md-nav__item> <a href=../PIR-Motion-Sensors/ class=md-nav__link> <span class=md-ellipsis> PIR Motion Sensors </span> </a> </li> <li class=md-nav__item> <a href=../Power-Monitoring-Calibration/ class=md-nav__link> <span class=md-ellipsis> Power Monitoring Calibration </span> </a> </li> <li class=md-nav__item> <a href=../PWM-dimmer-switch/ class=md-nav__link> <span class=md-ellipsis> PWM Dimmer </span> </a> </li> <li class=md-nav__item> <a href=../Rules/ class=md-nav__link> <span class=md-ellipsis> Rules </span> </a> </li> <li class=md-nav__item> <a href=../Scripting-Language/ class=md-nav__link> <span class=md-ellipsis> Scripting Language </span> </a> </li> <li class=md-nav__item> <a href=../Blinds-and-Shutters/ class=md-nav__link> <span class=md-ellipsis> Shutters and Blinds </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_21> <label class=md-nav__link for=__nav_2_21 id=__nav_2_21_label tabindex=0> <span class=md-ellipsis> Protocol Bridging </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_21_label aria-expanded=false> <label class=md-nav__title for=__nav_2_21> <span class="md-nav__icon md-icon"></span> Protocol Bridging </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../TasmotaClient/ class=md-nav__link> <span class=md-ellipsis> Arduino MCU </span> </a> </li> <li class=md-nav__item> <a href=../Bluetooth/ class=md-nav__link> <span class=md-ellipsis> BLE Gateway </span> </a> </li> <li class=md-nav__item> <a href=../DALI/ class=md-nav__link> <span class=md-ellipsis> DALI </span> </a> </li> <li class=md-nav__item> <a href=../HDMI_CEC/ class=md-nav__link> <span class=md-ellipsis> HDMI CEC </span> </a> </li> <li class=md-nav__item> <a href=../Tasmota-IR/ class=md-nav__link> <span class=md-ellipsis> IR Communication </span> </a> </li> <li class=md-nav__item> <a href=../Projector/ class=md-nav__link> <span class=md-ellipsis> LCD/DLP Projector Control </span> </a> </li> <li class=md-nav__item> <a href=../LoRa-and-LoRaWan-Bridge/ class=md-nav__link> <span class=md-ellipsis> LoRa and LoRaWan Bridge </span> </a> </li> <li class=md-nav__item> <a href=../Modbus-Bridge/ class=md-nav__link> <span class=md-ellipsis> Modbus Bridge </span> </a> </li> <li class=md-nav__item> <a href=../OpenTherm/ class=md-nav__link> <span class=md-ellipsis> OpenTherm </span> </a> </li> <li class=md-nav__item> <a href=../RF-Protocol/ class=md-nav__link> <span class=md-ellipsis> RF Communication </span> </a> </li> <li class=md-nav__item> <a href=../Serial-to-TCP-Bridge/ class=md-nav__link> <span class=md-ellipsis> Serial to TCP Bridge </span> </a> </li> <li class=md-nav__item> <a href=../TWAI/ class=md-nav__link> <span class=md-ellipsis> TWAI </span> </a> </li> <li class=md-nav__item> <a href=../Telegram/ class=md-nav__link> <span class=md-ellipsis> Telegram </span> </a> </li> <li class=md-nav__item> <a href=../Zigbee/ class=md-nav__link> <span class=md-ellipsis> Zigbee </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> Smart Meter Interface </span> <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> Smart Meter Interface </span> </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#general-description class=md-nav__link> <span class=md-ellipsis> General description </span> </a> </li> <li class=md-nav__item> <a href=#descriptor-syntax class=md-nav__link> <span class=md-ellipsis> Descriptor Syntax </span> </a> </li> <li class=md-nav__item> <a href=#meter-definition class=md-nav__link> <span class=md-ellipsis> Meter Definition </span> </a> </li> <li class=md-nav__item> <a href=#meter-metrics class=md-nav__link> <span class=md-ellipsis> Meter Metrics </span> </a> </li> <li class=md-nav__item> <a href=#special-commands class=md-nav__link> <span class=md-ellipsis> Special Commands </span> </a> </li> <li class=md-nav__item> <a href=#commands class=md-nav__link> <span class=md-ellipsis> Commands </span> </a> </li> <li class=md-nav__item> <a href=#web-requests class=md-nav__link> <span class=md-ellipsis> Web Requests </span> </a> </li> <li class=md-nav__item> <a href=#smart-meter-descriptors class=md-nav__link> <span class=md-ellipsis> Smart Meter Descriptors </span> </a> <nav class=md-nav aria-label="Smart Meter Descriptors"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#abb-b23-modbus class=md-nav__link> <span class=md-ellipsis> ABB B23 (MODBus) </span> </a> </li> <li class=md-nav__item> <a href=#abb-b-series-like-b21-b23-m-bus-over-infrared-port class=md-nav__link> <span class=md-ellipsis> ABB B-Series (like B21, B23) (M-Bus over Infrared port) </span> </a> </li> <li class=md-nav__item> <a href=#apator-12ec3 class=md-nav__link> <span class=md-ellipsis> Apator 12EC3 </span> </a> </li> <li class=md-nav__item> <a href=#apator-12ec3g class=md-nav__link> <span class=md-ellipsis> Apator 12EC3G </span> </a> </li> <li class=md-nav__item> <a href=#apator-apox-sml class=md-nav__link> <span class=md-ellipsis> Apator APOX+ (SML) </span> </a> </li> <li class=md-nav__item> <a href=#apator-lepus-3060-sml class=md-nav__link> <span class=md-ellipsis> Apator Lepus 3.060 (SML) </span> </a> </li> <li class=md-nav__item> <a href=#apator-norax-1d-sml class=md-nav__link> <span class=md-ellipsis> Apator Norax 1D+ (SML) </span> </a> </li> <li class=md-nav__item> <a href=#apator-norax-3d-sml class=md-nav__link> <span class=md-ellipsis> Apator Norax 3D (SML) </span> </a> </li> <li class=md-nav__item> <a href=#apator-norax-3d-sml_1 class=md-nav__link> <span class=md-ellipsis> Apator Norax 3D+ (SML) </span> </a> </li> <li class=md-nav__item> <a href=#apator-picus-ehz060dj-sml class=md-nav__link> <span class=md-ellipsis> Apator Picus eHZ.060.D/J (SML) </span> </a> </li> <li class=md-nav__item> <a href=#carlo-gavazzi-em340-modbus-rtu class=md-nav__link> <span class=md-ellipsis> Carlo Gavazzi EM340 (MODBus RTU) </span> </a> </li> <li class=md-nav__item> <a href=#combo-meter-water-gas-sml class=md-nav__link> <span class=md-ellipsis> COMBO Meter (Water, Gas, SML) </span> </a> </li> <li class=md-nav__item> <a href=#ddm18sd-modbus class=md-nav__link> <span class=md-ellipsis> DDM18SD (MODBus) </span> </a> </li> <li class=md-nav__item> <a href=#deye-modbus class=md-nav__link> <span class=md-ellipsis> DEYE (MODBus) </span> </a> </li> <li class=md-nav__item> <a href=#digimeto-gs303-sml class=md-nav__link> <span class=md-ellipsis> Digimeto GS303 (SML) </span> </a> </li> <li class=md-nav__item> <a href=#dzg-dwze122g2-dvze-sml class=md-nav__link> <span class=md-ellipsis> DZG DWZE12.2.G2 (DVZE) (SML) </span> </a> </li> <li class=md-nav__item> <a href=#dzg-dws74102vg2-sml-and-dzg-dvs74202-sml class=md-nav__link> <span class=md-ellipsis> DZG DWS7410.2V.G2 (SML) and DZG DVS7420.2 (SML) </span> </a> </li> <li class=md-nav__item> <a href=#dzg-dws74121g2-sml class=md-nav__link> <span class=md-ellipsis> DZG DWS7412.1.G2 (SML) </span> </a> </li> <li class=md-nav__item> <a href=#dzg-dws76-sml class=md-nav__link> <span class=md-ellipsis> DZG DWS76 (SML) </span> </a> </li> <li class=md-nav__item> <a href=#dzg-dwsb122-sml class=md-nav__link> <span class=md-ellipsis> DZG DWSB12.2 (SML) </span> </a> </li> <li class=md-nav__item> <a href=#easymeter-q3a-apator-apox-sml class=md-nav__link> <span class=md-ellipsis> EasyMeter Q3A / Apator APOX+ (SML) </span> </a> </li> <li class=md-nav__item> <a href=#easymeter-q3b-sml class=md-nav__link> <span class=md-ellipsis> EasyMeter Q3B (SML) </span> </a> </li> <li class=md-nav__item> <a href=#easymeter-q3d-q3da1024-obis class=md-nav__link> <span class=md-ellipsis> EasyMeter Q3D, Q3DA1024 (OBIS) </span> </a> </li> <li class=md-nav__item> <a href=#ebz-dd3-obissml class=md-nav__link> <span class=md-ellipsis> eBZ DD3 (OBIS/SML) </span> </a> </li> <li class=md-nav__item> <a href=#ebz-md3-sml class=md-nav__link> <span class=md-ellipsis> eBZ MD3 (SML) </span> </a> </li> <li class=md-nav__item> <a href=#easymeter-q1a-sml class=md-nav__link> <span class=md-ellipsis> EasyMeter Q1A (SML) </span> </a> </li> <li class=md-nav__item> <a href=#easymeter-m60-v1402-sml class=md-nav__link> <span class=md-ellipsis> EasyMeter M60 V14.02 (SML) </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../Thermostat/ class=md-nav__link> <span class=md-ellipsis> Thermostat </span> </a> </li> <li class=md-nav__item> <a href=../Timers/ class=md-nav__link> <span class=md-ellipsis> Timers </span> </a> </li> <li class=md-nav__item> <a href=../TLS/ class=md-nav__link> <span class=md-ellipsis> TLS Secured MQTT </span> </a> </li> <li class=md-nav__item> <a href=../TuyaMCU/ class=md-nav__link> <span class=md-ellipsis> TuyaMCU </span> </a> </li> <li class=md-nav__item> <a href=../UFS/ class=md-nav__link> <span class=md-ellipsis> Universal File System </span> </a> </li> <li class=md-nav__item> <a href=../Range-Extender/ class=md-nav__link> <span class=md-ellipsis> Wi-Fi Range Extender </span> </a> </li> <li class=md-nav__item> <a href=../Wireguard/ class=md-nav__link> <span class=md-ellipsis> Wireguard VPN </span> </a> </li> <li class=md-nav__item> <a href=../Tutorials/ class=md-nav__link> <span class=md-ellipsis> Projects and Tutorials </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3> <label class=md-nav__link for=__nav_3 id=__nav_3_label tabindex=0> <span class=md-ellipsis> ESP32 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=false> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> ESP32 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../ESP32/ class=md-nav__link> <span class=md-ellipsis> Tasmota32 Features </span> </a> </li> <li class=md-nav__item> <a href=../Berry/ class=md-nav__link> <span class=md-ellipsis> Berry </span> </a> </li> <li class=md-nav__item> <a href=../Bluetooth_ESP32/ class=md-nav__link> <span class=md-ellipsis> Bluetooth Low Energy </span> </a> </li> <li class=md-nav__item> <a href=../LVGL/ class=md-nav__link> <span class=md-ellipsis> LVGL </span> </a> </li> <li class=md-nav__item> <a href=../HASPmota/ class=md-nav__link> <span class=md-ellipsis> HASPmota </span> </a> </li> <li class=md-nav__item> <a href=../Matter/ class=md-nav__link> <span class=md-ellipsis> Matter </span> </a> </li> <li class=md-nav__item> <a href=../Tasmota-Extension/ class=md-nav__link> <span class=md-ellipsis> Tasmota Extension </span> </a> </li> <li class=md-nav__item> <a href=../Tasmota-Application/ class=md-nav__link> <span class=md-ellipsis> Tasmota Application Files </span> </a> </li> <li class=md-nav__item> <a href=../TFL/ class=md-nav__link> <span class=md-ellipsis> TensorFlow Lite </span> </a> </li> <li class=md-nav__item> <a href=../TouchPin/ class=md-nav__link> <span class=md-ellipsis> Touch GPIOs </span> </a> </li> <li class=md-nav__item> <a href=../Safeboot/ class=md-nav__link> <span class=md-ellipsis> Safeboot Partition Layout </span> </a> </li> <li class=md-nav__item> <a href=https://templates.blakadder.com/esp32 class=md-nav__link> <span class=md-ellipsis> Supported Devices </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4> <label class=md-nav__link for=__nav_4 id=__nav_4_label tabindex=0> <span class=md-ellipsis> Smart Home Integrations </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_4_label aria-expanded=false> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Smart Home Integrations </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../Integrations/ class=md-nav__link> <span class=md-ellipsis> Introduction </span> </a> </li> <li class=md-nav__item> <a href=../Alexa/ class=md-nav__link> <span class=md-ellipsis> Alexa </span> </a> </li> <li class=md-nav__item> <a href=../AWS-IoT/ class=md-nav__link> <span class=md-ellipsis> AWS IoT </span> </a> </li> <li class=md-nav__item> <a href=../Domoticz/ class=md-nav__link> <span class=md-ellipsis> Domoticz </span> </a> </li> <li class=md-nav__item> <a href=../Home-Assistant/ class=md-nav__link> <span class=md-ellipsis> Home Assistant </span> </a> </li> <li class=md-nav__item> <a href=../Homebridge/ class=md-nav__link> <span class=md-ellipsis> Homebridge </span> </a> </li> <li class=md-nav__item> <a href=https://homey.app/en-us/app/com.paveld.tasmota/Tasmota-MQTT/ class=md-nav__link> <span class=md-ellipsis> Homey </span> </a> </li> <li class=md-nav__item> <a href=../HomeSeer/ class=md-nav__link> <span class=md-ellipsis> HomeSeer </span> </a> </li> <li class=md-nav__item> <a href=../IP-Symcon/ class=md-nav__link> <span class=md-ellipsis> IP Symcon </span> </a> </li> <li class=md-nav__item> <a href=../KNX/ class=md-nav__link> <span class=md-ellipsis> KNX </span> </a> </li> <li class=md-nav__item> <a href=../NodeRed/ class=md-nav__link> <span class=md-ellipsis> NodeRed </span> </a> </li> <li class=md-nav__item> <a href=../nymea/ class=md-nav__link> <span class=md-ellipsis> nymea </span> </a> </li> <li class=md-nav__item> <a href=../Octoprint/ class=md-nav__link> <span class=md-ellipsis> OctoPrint </span> </a> </li> <li class=md-nav__item> <a href=../openHAB/ class=md-nav__link> <span class=md-ellipsis> openHAB </span> </a> </li> <li class=md-nav__item> <a href=../otto/ class=md-nav__link> <span class=md-ellipsis> Otto </span> </a> </li> <li class=md-nav__item> <a href=https://github.com/arendst/Tasmota/issues/3769 class=md-nav__link> <span class=md-ellipsis> IOBroker </span> </a> </li> <li class=md-nav__item> <a href=https://github.com/tim-hellhake/tasmota-adapter class=md-nav__link> <span class=md-ellipsis> Mozilla WebThings Adapter </span> </a> </li> <li class=md-nav__item> <a href=https://github.com/hongtat/tasmota-connect class=md-nav__link> <span class=md-ellipsis> SmartThings </span> </a> </li> <li class=md-nav__item> <a href=https://github.com/Gifford47/tasmohab/blob/master/README.md class=md-nav__link> <span class=md-ellipsis> Tasmohab </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../Supported-Peripherals/ class=md-nav__link> <span class=md-ellipsis> Peripherals </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6> <label class=md-nav__link for=__nav_6 id=__nav_6_label tabindex=0> <span class=md-ellipsis> Supported Devices </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_6_label aria-expanded=false> <label class=md-nav__title for=__nav_6> <span class="md-nav__icon md-icon"></span> Supported Devices </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../Configuration-Procedure-for-New-Devices/ class=md-nav__link> <span class=md-ellipsis> Configure Unknown Device </span> </a> </li> <li class=md-nav__item> <a href="https://templates.blakadder.com/ " target='_blank""' class=md-nav__link> <span class=md-ellipsis> All Supported Devices </span> </a> </li> <li class=md-nav__item> <a href=../Pinouts/ class=md-nav__link> <span class=md-ellipsis> Wi-Fi Module Pinouts </span> </a> </li> <li class=md-nav__item> <a href=../Supported-Modules/ class=md-nav__link> <span class=md-ellipsis> Supported Modules </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_7> <label class=md-nav__link for=__nav_7 id=__nav_7_label tabindex=0> <span class=md-ellipsis> Help </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_7_label aria-expanded=false> <label class=md-nav__title for=__nav_7> <span class="md-nav__icon md-icon"></span> Help </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../FAQ/ class=md-nav__link> <span class=md-ellipsis> FAQ </span> </a> </li> <li class=md-nav__item> <a href=../Troubleshooting/ class=md-nav__link> <span class=md-ellipsis> Troubleshooting </span> </a> </li> <li class=md-nav__item> <a href=../Device-Recovery/ class=md-nav__link> <span class=md-ellipsis> Device Recovery </span> </a> </li> <li class=md-nav__item> <a href="https://discord.gg/Ks2Kzd4 " target='_blank""' class=md-nav__link> <span class=md-ellipsis> Discord Support </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=http://tasmota.github.io/install class=md-nav__link> <span class=md-ellipsis> Web Installer </span> </a> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#general-description class=md-nav__link> <span class=md-ellipsis> General description </span> </a> </li> <li class=md-nav__item> <a href=#descriptor-syntax class=md-nav__link> <span class=md-ellipsis> Descriptor Syntax </span> </a> </li> <li class=md-nav__item> <a href=#meter-definition class=md-nav__link> <span class=md-ellipsis> Meter Definition </span> </a> </li> <li class=md-nav__item> <a href=#meter-metrics class=md-nav__link> <span class=md-ellipsis> Meter Metrics </span> </a> </li> <li class=md-nav__item> <a href=#special-commands class=md-nav__link> <span class=md-ellipsis> Special Commands </span> </a> </li> <li class=md-nav__item> <a href=#commands class=md-nav__link> <span class=md-ellipsis> Commands </span> </a> </li> <li class=md-nav__item> <a href=#web-requests class=md-nav__link> <span class=md-ellipsis> Web Requests </span> </a> </li> <li class=md-nav__item> <a href=#smart-meter-descriptors class=md-nav__link> <span class=md-ellipsis> Smart Meter Descriptors </span> </a> <nav class=md-nav aria-label="Smart Meter Descriptors"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#abb-b23-modbus class=md-nav__link> <span class=md-ellipsis> ABB B23 (MODBus) </span> </a> </li> <li class=md-nav__item> <a href=#abb-b-series-like-b21-b23-m-bus-over-infrared-port class=md-nav__link> <span class=md-ellipsis> ABB B-Series (like B21, B23) (M-Bus over Infrared port) </span> </a> </li> <li class=md-nav__item> <a href=#apator-12ec3 class=md-nav__link> <span class=md-ellipsis> Apator 12EC3 </span> </a> </li> <li class=md-nav__item> <a href=#apator-12ec3g class=md-nav__link> <span class=md-ellipsis> Apator 12EC3G </span> </a> </li> <li class=md-nav__item> <a href=#apator-apox-sml class=md-nav__link> <span class=md-ellipsis> Apator APOX+ (SML) </span> </a> </li> <li class=md-nav__item> <a href=#apator-lepus-3060-sml class=md-nav__link> <span class=md-ellipsis> Apator Lepus 3.060 (SML) </span> </a> </li> <li class=md-nav__item> <a href=#apator-norax-1d-sml class=md-nav__link> <span class=md-ellipsis> Apator Norax 1D+ (SML) </span> </a> </li> <li class=md-nav__item> <a href=#apator-norax-3d-sml class=md-nav__link> <span class=md-ellipsis> Apator Norax 3D (SML) </span> </a> </li> <li class=md-nav__item> <a href=#apator-norax-3d-sml_1 class=md-nav__link> <span class=md-ellipsis> Apator Norax 3D+ (SML) </span> </a> </li> <li class=md-nav__item> <a href=#apator-picus-ehz060dj-sml class=md-nav__link> <span class=md-ellipsis> Apator Picus eHZ.060.D/J (SML) </span> </a> </li> <li class=md-nav__item> <a href=#carlo-gavazzi-em340-modbus-rtu class=md-nav__link> <span class=md-ellipsis> Carlo Gavazzi EM340 (MODBus RTU) </span> </a> </li> <li class=md-nav__item> <a href=#combo-meter-water-gas-sml class=md-nav__link> <span class=md-ellipsis> COMBO Meter (Water, Gas, SML) </span> </a> </li> <li class=md-nav__item> <a href=#ddm18sd-modbus class=md-nav__link> <span class=md-ellipsis> DDM18SD (MODBus) </span> </a> </li> <li class=md-nav__item> <a href=#deye-modbus class=md-nav__link> <span class=md-ellipsis> DEYE (MODBus) </span> </a> </li> <li class=md-nav__item> <a href=#digimeto-gs303-sml class=md-nav__link> <span class=md-ellipsis> Digimeto GS303 (SML) </span> </a> </li> <li class=md-nav__item> <a href=#dzg-dwze122g2-dvze-sml class=md-nav__link> <span class=md-ellipsis> DZG DWZE12.2.G2 (DVZE) (SML) </span> </a> </li> <li class=md-nav__item> <a href=#dzg-dws74102vg2-sml-and-dzg-dvs74202-sml class=md-nav__link> <span class=md-ellipsis> DZG DWS7410.2V.G2 (SML) and DZG DVS7420.2 (SML) </span> </a> </li> <li class=md-nav__item> <a href=#dzg-dws74121g2-sml class=md-nav__link> <span class=md-ellipsis> DZG DWS7412.1.G2 (SML) </span> </a> </li> <li class=md-nav__item> <a href=#dzg-dws76-sml class=md-nav__link> <span class=md-ellipsis> DZG DWS76 (SML) </span> </a> </li> <li class=md-nav__item> <a href=#dzg-dwsb122-sml class=md-nav__link> <span class=md-ellipsis> DZG DWSB12.2 (SML) </span> </a> </li> <li class=md-nav__item> <a href=#easymeter-q3a-apator-apox-sml class=md-nav__link> <span class=md-ellipsis> EasyMeter Q3A / Apator APOX+ (SML) </span> </a> </li> <li class=md-nav__item> <a href=#easymeter-q3b-sml class=md-nav__link> <span class=md-ellipsis> EasyMeter Q3B (SML) </span> </a> </li> <li class=md-nav__item> <a href=#easymeter-q3d-q3da1024-obis class=md-nav__link> <span class=md-ellipsis> EasyMeter Q3D, Q3DA1024 (OBIS) </span> </a> </li> <li class=md-nav__item> <a href=#ebz-dd3-obissml class=md-nav__link> <span class=md-ellipsis> eBZ DD3 (OBIS/SML) </span> </a> </li> <li class=md-nav__item> <a href=#ebz-md3-sml class=md-nav__link> <span class=md-ellipsis> eBZ MD3 (SML) </span> </a> </li> <li class=md-nav__item> <a href=#easymeter-q1a-sml class=md-nav__link> <span class=md-ellipsis> EasyMeter Q1A (SML) </span> </a> </li> <li class=md-nav__item> <a href=#easymeter-m60-v1402-sml class=md-nav__link> <span class=md-ellipsis> EasyMeter M60 V14.02 (SML) </span> </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <a href=https://github.com/tasmota/docs/blob/master/docs/Smart-Meter-Interface.md title="Edit this page" class="md-content__button md-icon" rel=edit> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4zm10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1z"/></svg> </a> <p><a id=top></p> <h1 id=smart-meter-interface>Smart Meter Interface<a class=headerlink href=#smart-meter-interface title="Permanent link">~</a></h1> <div class="admonition info"> <p class=admonition-title>This driver extracts selected values from Smart Meters over various protocols, filters and publishes them to MQTT as regular sensors.</p> </div> <div class="admonition failure"> <p class=admonition-title>This feature is not included in precompiled binaries</p> </div> <p>Based on Tasmota's <a href=../Scripting-Language/ >scripting language</a>. To use it you must <a href=../Compile-your-build/ >compile your build</a>. Add the following to <code>user_config_override.h</code>:</p> <div class=highlight><pre><span></span><code><span class=cp>#ifndef USE_SCRIPT</span>
<span class=cp>#define USE_SCRIPT</span>
<span class=cp>#endif</span>
<span class=cp>#ifndef USE_SML_M</span>
<span class=cp>#define USE_SML_M</span>
<span class=cp>#endif</span>
<span class=cp>#ifdef USE_RULES</span>
<span class=cp>#undef USE_RULES</span>
<span class=cp>#endif</span>
</code></pre></div> <p>Additional features can be enabled by adding the following <code>#define</code> compiler directive parameters and then compiling the firmware. These parameters are explained further below in the article. Most features are now enabled by default, others may be set in the descriptor per meter. </p> <table> <thead> <tr> <th>Feature</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td>SML_BSIZ n</td> <td>(default 48) Maximum number of characters per line in serial input buffer. Complete chunk of serial data must fit into this size, so include any CR/LF if that applies. can now be defined per meter in descriptor, see special options</td> </tr> <tr> <td>MAX_METERS n</td> <td>(default 5) Maximum number of meters. Decrease this to 1 for example if you have a meter with many lines and lots of characters per descriptor line.</td> </tr> <tr> <td>TMSBSIZ n</td> <td>(default 256) Maximum number of characters in serial IRQ buffer (should always be larger than SML_BSIZ and even larger on high baud rates).can now be defined per meter in descriptor, see special options</td> </tr> <tr> <td>SML_DUMP_SIZE n</td> <td>(default 128) Maximum number of characters per line in dump mode. Only use if you have long strings comin in and they truncate.</td> </tr> <tr> <td>SML_PREFIX_SIZE n</td> <td>(default 8) Maximum number of characters + 1 for SML jsonPrefix.</td> </tr> <tr> <td>USE_ESP32_SW_SERIAL</td> <td>enables additional software serial channels for ESP32, (receive only), define pin with '-' sign to assign to software serial</td> </tr> <tr> <td>NO_USE_SML_SPECOPT</td> <td>disables special decoder entry to specify direction bit for some SML meters</td> </tr> <tr> <td>NO_USE_SML_SCRIPT_CMD</td> <td>disables some special SML script cmds and allows access to sml vars in other parts of the script. Is needed by some of the examples below.</td> </tr> <tr> <td>NO_SML_REPLACE_VARS</td> <td>disables replacement of any text in descriptor by script text variables. Useful if several occurrences of a text occupies a lot of space and you get short of script buffer. Readability may get worse so only makes sense on large descriptors. Note: to use <code>%</code> symbol un measurement units, you need to escape it like <code>%%</code>.</td> </tr> <tr> <td>NO_USE_SML_DECRYPT</td> <td>disables decoding of encrypted ams meters. decrypting needs TLS, so must define USE_TLS also.</td> </tr> <tr> <td>USE_SML_AUTHKEY</td> <td>enables authentication, this is not needed by most energy meters.</td> </tr> <tr> <td>NO_USE_SML_TCP</td> <td>disables TCP MODBUS support.</td> </tr> <tr> <td>NO_USE_SML_CANBUS</td> <td>disables CANBUS support.</td> </tr> <tr> <td>USE_SML_CRC</td> <td>enables CRC support for binary SML. Must still be enabled via line like "1,=soC,1024,15". See <a href=#special-option-soc>special options</a>.</td> </tr> </tbody> </table> <h3 id=general-description>General description<a class=headerlink href=#general-description title="Permanent link">~</a></h3> <p>To use this interface, connect the meter to available GPIO pins. These GPIOs must be set as <code>None</code> in Tasmota. If the interface detects that a script driven meter descriptor GPIO conflicts with a Tasmota GPIO setting, the interface will generate a <code>duplicate GPIO defined</code> error in the log and the meter descriptor will be ignored. </p> <div class="admonition note"> <p class=admonition-title>Note</p> <p>When changing GPIO configurations, especially in conjunction with other Tasmota drivers, a restart may be required.</p> </div> <div class="admonition note"> <p class=admonition-title>Note</p> <p>On an ESP32, due to a different implementation, serial ports may not be used in conjunction with other Tasmota serial devices. </p> </div> <div class="admonition note"> <p class=admonition-title>Note</p> <p>when using bidirectional serial IO (receive and transmit), hardware serial is recommended.</p> </div> <p>The Smart Meter Interface provides a means to connect many kinds of meters to Tasmota. <strong>The following types of meter protocols are supported:</strong></p> <table> <thead> <tr> <th>Protocol</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td>OBIS ASCII</td> <td>telegrams emitted from many smart meters, including <a href=https://tasmota.github.io/docs/P1-Smart-Meter/ >P1 Smart Meters</a></td> </tr> <tr> <td>OBIS Binary SML</td> <td>telegrams emitted from many smart meters</td> </tr> <tr> <td>MODBus Binary</td> <td>telegrams used by many power meters and industrial devices (serial and TCP master and slave)</td> </tr> <tr> <td>CANBus Binary</td> <td>telegrams used by battery monitoring systems and industrial devices</td> </tr> <tr> <td>Kamstrup Binary</td> <td>telegrams used by many power meters from Kamstrup</td> </tr> <tr> <td>EBus Binary</td> <td>telegrams emitted by many heaters and heat pumps (e.g. Vaillant, Wolf)</td> </tr> <tr> <td>VBus Binary</td> <td>telegrams emitted by many solar thermal systems boilers (e.g. Resol, Viessmann)</td> </tr> <tr> <td>RAW Binary</td> <td>decodes all kinds of binary data eg EMS heater bus</td> </tr> <tr> <td>Counter interface</td> <td>uses Tasmota counter storage (for e.g. REED contacts either in polling or IRQ mode)</td> </tr> </tbody> </table> <p>There are many different meters that use the same protocol. There are multitudes of variants and use cases. This interface provides a means of specifying these definitions through <a href=#meter-metrics>meter descriptors</a>. This method uses the <a href=../Scripting-Language/ >scripting language</a> editor to define the descriptors. In this way, only one firmware binary version is required and a modification can be made easily <em>on the fly</em>. </p> <p>For meters that follow the German 'Basiszähler' standard, which is often referenced in their manuals as "Lastenheft Basiszähler Funktionale Merkmale", the SML OBIS codes for the datapoints can be found in this central <a href=https://www.vde.com/resource/blob/2345790/e6c822aa22d51592aba388f6a5ceaed2/fnn-hinweis--lastenheft-basiszaehler---funktionale-merkmale---2018--data.pdf>VDE document</a> from page 41 onwards. Please note that not all meters emit all of these datapoints, especially the per-phase information is sometimes omitted. Total consumption, feed and momentary power should always be available though.</p> <div class="admonition note"> <p class=admonition-title>Note</p> <p>Additional hardware may be required to read certain measuring devices. For example: RS485toTTL adapter for Modbus, IR transistor for electricity meters. Sometimes an additional IR diode and resistors. </p> </div> <p>By default, a SENSOR telegram is sent to MQTT every 300 seconds. This can be adjusted by changing the <a href=https://tasmota.github.io/docs/Commands/#teleperiod>TelePeriod</a>.</p> <h2 id=descriptor-syntax>Descriptor Syntax<a class=headerlink href=#descriptor-syntax title="Permanent link">~</a></h2> <p>This section must be present, even if it's empty. If compiled with <code>SML_REPLACE_VARS</code>, here is the place where text variables can be defined for the script:</p> <blockquote> <p><code>&gt;D</code> </p> </blockquote> <hr> <p>Declare <code>&gt;B</code> (boot) section to inform the interface to read the meter descriptor(s):</p> <blockquote> <p><code>&gt;B</code><br> =&gt;<a href=../Commands/#sensor53>sensor53 r</a></p> </blockquote> <hr> <p>(Optional) declare <code>&gt;S</code> section with additional scripting commands:</p> <blockquote> <p><code>&gt;S &lt;n&gt;</code></p> </blockquote> <hr> <p>Declare <code>&gt;M</code> section with the number of connected meters (n = <code>1..5</code>):</p> <blockquote> <p><code>&gt;M &lt;n&gt;</code> </p> </blockquote> <div class="admonition note"> <p class=admonition-title>Note</p> <p>If no <code>&gt;M</code> section is found in the script or if the scripting language is not compiled, the driver reverts to the default hardcoded <code>#define</code> definitions. If no meter script is defined, the default hardcoded descriptor interface (deprecated) uses <code>RX GPIO3</code> for receiving data and thus may interfere with other Tasmota Definitions without warning. </p> </div> <div class="admonition note"> <p class=admonition-title>Note</p> <p>Software serial only supports 8N1 serial format. Must use hardware serial for e.g. 8E1! </p> </div> <h2 id=meter-definition>Meter Definition<a class=headerlink href=#meter-definition title="Permanent link">~</a></h2> <blockquote> <p><code>+&lt;M&gt;,&lt;rxGPIO&gt;,&lt;type&gt;,&lt;flag&gt;,&lt;parameter&gt;,&lt;jsonPrefix&gt;{,&lt;txGPIO&gt;,&lt;txPeriod&gt;,&lt;cmdTelegram&gt;}</code> </p> </blockquote> <table> <thead> <tr> <th style="text-align: left;">Parameter</th> <th style="text-align: left;">Description</th> </tr> </thead> <tbody> <tr> <td style="text-align: left;"><code>+&lt;M&gt;</code></td> <td style="text-align: left;">Meter number. The number must be increased with each additional Meter (default 1 to 5).</td> </tr> <tr> <td style="text-align: left;"><code>&lt;rxGPIO&gt;</code></td> <td style="text-align: left;">The GPIO pin number where meter data is received. <br> [xxx.xxx.xxx.xxx] IP number instead of pin number enables MODBUS TCP mode, the tcp port number is given at the baudrate position. (tx pin can be any number and is ignored)</td> </tr> <tr> <td style="text-align: left;"><code>&lt;type&gt;</code></td> <td style="text-align: left;">The type of meter: <br>- <code>o</code> - OBIS ASCII type of coding<br>- <code>s</code> - SML binary smart message coding<br>- <code>e</code> - EBus binary coding<br>- <code>v</code> - VBus binary coding<br>- <code>m</code> - MODBus binary coding with serial mode 8N1<br>- <code>M</code> - MODBus binary coding with serial mode 8E1<br>- <code>k</code> - Kamstrup binary coding with serial mode 8N1<br>- <code>C</code> - CANBus type<br>- <code>c</code> - Counter type<br>- <code>r</code> - Raw binary coding (any binary telegram)</td> </tr> <tr> <td style="text-align: left;"><code>&lt;flag&gt;</code></td> <td style="text-align: left;">Options flag:<br>- <code>0</code> - counter without pullup<br>- <code>1</code> - counter with pullup<br>- <code>16</code> - enable median filter for that meter. Can help with sporadic dropouts, reading errors (not available for counters). this option is enabled by default #define USE_SML_MEDIAN_FILTER, if you are low on memory and dont use this feature you may outcomment this define in the driver<br>- <code>32</code> - Disable FastExit for binary SML parsing. See <a href=https://github.com/arendst/Tasmota/pull/21497>#21497</a> for details</td> </tr> <tr> <td style="text-align: left;"><code>&lt;parameter&gt;</code></td> <td style="text-align: left;">Parameters according to meter type:<br>- for <code>o,s,e,v,m,M,k,r</code> types: serial baud rate e.g. <code>9600</code> (or port# for Modbus TCP).<br>- for type <code>C</code> Canbus Baudrates and Number of receive buffers (*100). (see example R4850G2)<br>- 0 = 25 KBITS<br>- 1 = 50 KBITS<br>- 2 = 100 KBITS<br>- 3 = 125 KBITS<br>- 4 = 250 KBITS<br>- 5 = 500 KBITS<br>- 6 = 800 KBITS<br>- 7 = 1 MBITS<br>- for <code>c</code> type: a positive value = counter poll interval (not really recommended) or a negative value = debounce time (milliseconds) for irq driven counters.</td> </tr> <tr> <td style="text-align: left;"><code>&lt;jsonPrefix&gt;</code></td> <td style="text-align: left;">Prefix for Web UI and MQTT JSON payload. Up to 7 characters.</td> </tr> <tr> <td style="text-align: left;"><code>&lt;txGPIO&gt;</code></td> <td style="text-align: left;">The GPIO pin number where meter command is transmitted (optional).</td> </tr> <tr> <td style="text-align: left;"><code>&lt;tx enable&gt;</code></td> <td style="text-align: left;">The GPIO pin number to enable transmitter (RS485) may follow the TX pin in bracket (pin) without a colon an 'i' in front of the pin number means 'inverted' (optional).</td> </tr> <tr> <td style="text-align: left;"><code>&lt;txPeriod&gt;</code></td> <td style="text-align: left;">Period to repeat the transmission of commands to the meter (optional). Number of 100ms increments (n * 100ms).</td> </tr> <tr> <td style="text-align: left;"><code>&lt;cmdTelegram&gt;</code></td> <td style="text-align: left;">Comma separated hex coded byte blocks to send to meter device. For MODBus each comma separated block is a command to retrieve a certain register from the meter (optional: only required for measuring devices that have to be triggered with a certain character string). TRX code lines ending with a comma are continued at next line</td> </tr> </tbody> </table> <div class="admonition note"> <p class=admonition-title>Note</p> <p>for other serial protocols you may specify the exact mode (only for hardware serial) by the following code after the type specifier: </p> </div> <p>N =no parity<br> E =even parity<br> O =odd parity<br> and number of stop-bits </p> <p>e.g for Modbus: mN1,mN2,mE1,mE2,mO1,mO2 </p> <div class="admonition example"> <p class=admonition-title>Example</p> <div class=highlight><pre><span></span><code>+1,3,o,0,9600,OBIS1,1,2,2F3F210D0A
+1,3,o,0,9600,OBIS1,1(i4),2,2F3F210D0A  with pin 4 as inverted TX enable
+1,3,o,16,115200,NormalTariff,1
+1,3,s,16,9600,SML1
+1,12,c,1,-10,H20_Cnt
+1,3,v,0,9600,Solar
</code></pre></div> </div> <div class="admonition example"> <p class=admonition-title>Example</p> <p>For MODBus: <code>+1,3,m,0,9600,MODBUS,1,1,01040000,01040002,01040004,01040006,01040008,0104000a,0104000c,0104000e,01040010</code> <br> Components of the character string:<br> <code>...01040000,01040002,...</code> <br> <code>01</code> = Modbus slave device ID<br> <code>04</code> = Instruction to read an Input Register (alternatively, <code>03</code> = Instruction to read a Holding Register)<br> <code>0000</code>/<code>0002</code> = Register # (as Hexadecimal codification, without the prefix <code>0x</code>. Example: <code>0x0079</code> -&gt; <code>0079</code>)<br> the number of requested registers is fixed to 2, however with the char 'r' before the hex string the complete request string may be specified<br> <code>...r010400000001,r010400020003,...</code> <br> <strong>Note:</strong> <code>ID</code>, <code>Instruction</code> to read the register value (Input vs Holding) and <code>Register#</code> may differ depending on the measuring device. </p> </div> <h2 id=meter-metrics>Meter Metrics<a class=headerlink href=#meter-metrics title="Permanent link">~</a></h2> <p>Each meter typically provides multiple metrics (energy, voltage, power, current etc.) which it measures. An entry for each metric to be collected must be specified. An entry defines how to decode the data and put it into variables.</p> <blockquote> <p><code>&lt;M&gt;,&lt;decoder&gt;@&lt;scale&gt;&lt;offs&gt;,&lt;label&gt;,&lt;UoM&gt;,&lt;var&gt;,&lt;precision&gt;</code> </p> </blockquote> <table> <thead> <tr> <th style="text-align: left;">Parameter</th> <th style="text-align: left;">Description</th> </tr> </thead> <tbody> <tr> <td style="text-align: left;"><code>&lt;M&gt;</code></td> <td style="text-align: left;">The meter number to which this decoder belongs</td> </tr> <tr> <td style="text-align: left;"><code>&lt;decoder&gt;</code></td> <td style="text-align: left;"><strong>Decoding specification</strong>: OBIS as ASCII; SML, EBus, VBus, MODBus, RAW as HEX ASCII etc. <em>No space characters allowed in this section!</em> <br> <strong>OBIS</strong>: ASCII OBIS code terminated with <code>(</code> character which indicates the start of the meter value<br><strong>Counter</strong>: ASCII code 1-0:1.8.0*255 for counter value, code 1-0:1.7.0*255 for pulse rate (e.g. for actual power value)<br> <strong>SML</strong>: SML binary OBIS as hex terminated with <code>0xFF</code> indicating start of SML encoded value<br><strong>EBus, MODBus, RAW</strong> - hex values of data blocks to compare:<br> - <code>xx</code> = ignore value (1 byte) or <code>xN</code> = ignore N bytes<br> - <code>ss</code> = extract a signed byte<br> - <code>uu</code> = extract an unsigned byte<br> - <code>UUuu</code> = extract an unsigned word (high order byte first)<br> - <code>uuUU</code> = extract an unsigned word (low order byte first)<br> - <code>UUuuUUuu</code> or <code>U32</code> = extract an unsigned long word (high order byte first)<br> - <code>uuUUuuUU</code> or <code>u32</code> = extract an unsigned long word (low order byte first)<br> - <code>SSss</code> = extract a signed word (high order byte first)<br> - <code>ssSS</code> = extract a signed word (low order byte first)<br> - <code>SSssSSss</code> or <code>S32</code> = extract a signed long word (high order byte first)<br> - <code>ssSSssSS</code> or <code>s32</code> = extract a signed long word (low order byte first)<br> - <strong>on long word values</strong>, if a trailing s is added at the end of the mask, word order is reversed<br>- <code>U64</code> = extract an unsigned 64 long word<br>- <code>u64</code> = extract an unsigned 64 long word (low order byte first)<br> - <code>bcdN</code> = extract a binary coded decimal N=2..12<br> - <code>ffffffff</code> = extract a float value - IEEE754 decode<br> - <code>FFffFFff</code> = extract a reverse float value - IEEE754 decode<br>- <code>kstr</code> = decode KAMSTRUP data<br>- <code>pm(x.y.z)</code> = pattern match(asci obis code)<br>- <code>pm(hHHHHHH)</code> = pattern match(hex obis code)<br>- <code>pm(rHHHHHH)</code> = pattern match(any hex pattern)<br><br>if using <strong>VBus</strong> - hex values of data blocks to compare:<br> - <code>AAffffaddrff0001ffff</code> = VBus-specific hex header: <code>AA</code>-sync byte, <code>addr</code>-the reversed address of the device. To find his out first look up the known <a href=http://danielwippermann.github.io/resol-vbus/vbus-packets.html>hex address of the device</a>. E.g. Resol DeltaSol BS Plus is <code>0x4221</code>. Reverse it (without <code>0x</code>) and you will get <code>21 42</code> hex characters. Now turn on raw dump mode using command <code>sensor53 d1</code> and look for rows starting with <code>aa</code>, containing your reversed address at position 4 and 5 and <code>00 01</code> hex characters at position 7 and 8. If found, the entire header will be 10 hex characters long including <code>aa</code> (20 ascii chars without space, e.g. for Resol DeltaSol BS Plus this will be <code>AA100021421000010774</code>). At position 9 you see the number of frames containing readable data. To turn off raw dump use <code>sensor53 d0</code>.<br> - <code>v</code> = VBus protocol indicator<br> - <code>oN</code> = extract data from offset <code>N</code> (see offsets of your device in <a href=http://danielwippermann.github.io/resol-vbus/vbus-packets.html>VBus protocol documentation</a>)<br> - <code>u</code> or <code>s</code> = extract unsigned or signed data<br> - <code>w</code> or <code>b</code> = extract word or byte<br><strong>End of decoding</strong>: <code>@</code> indicates termination of the decoding procedure.<br>- <code>(</code> following the <code>@</code> character in case of obis decoder indicates to fetch the 2. value in brackets, not the 1. value. (e.g. to get the second value from an obis like <code>0-1:24.2.3(210117125004W)(01524.450*m3)</code>)<br>- decoding multiple values coming in brackets after each other is possible with <code>(@(0:1</code>, <code>(@(1:1</code>, <code>(@(2:1</code> and so on (e.g. to get values from an obis like <code>0-0:98.1.0(210201000000W)(000000.000*kWh)(000000.000*kWh)</code>)<br>- <code>s</code> delimiter index colon selects an entry of special obis line (Kamstrup heatmeter) separated by delmiter e.g. <code>s 0:</code> <br>- decoding a 0/1 bit is indicated by a <code>@</code> character followed by <code>bx:</code> (x = <code>0..7</code>) extracting the corresponding bit from a byte. (e.g.: <code>1,xxxx5017xxuu@b0:1,Solarpump,,Solarpump,0</code>)<br>- in case of MODBus/Kamstrup, <code>ix:</code> designates the index (x = <code>0..n</code>) referring to the requested block in the transmit section of the meter definition</td> </tr> <tr> <td style="text-align: left;"><code>&lt;scale&gt;</code></td> <td style="text-align: left;">scaling factor (divisor) or string definition<br>This can be a fraction (e.g., <code>0.1</code> = result * 10), or a negative value. When decoding a string result (e.g. meter serial number), use <code>#</code> character for this parameter <em>(Note: only one string can be decoded per meter!)</em>. For OBIS, you need a <code>)</code> termination character after the <code>#</code> character.</td> </tr> <tr> <td style="text-align: left;"><code>&lt;offs&gt;</code></td> <td style="text-align: left;">optional offset must precede with + or - sign, note: offset is applied before scale!</td> </tr> <tr> <td style="text-align: left;"><code>&lt;label&gt;</code></td> <td style="text-align: left;">web UI label (max. 23 characters)</td> </tr> <tr> <td style="text-align: left;"><code>&lt;UoM&gt;</code></td> <td style="text-align: left;">unit of measurement (max. 7 characters)</td> </tr> <tr> <td style="text-align: left;"><code>&lt;var&gt;</code></td> <td style="text-align: left;">MQTT label (max. 23 characters)</td> </tr> <tr> <td style="text-align: left;"><code>&lt;precision&gt;</code></td> <td style="text-align: left;">number of decimal places. Add <code>16</code> to transmit the data immediately. Otherwise it is transmitted on <a href=../Commands/#teleperiod><code>TelePeriod</code></a> only.</td> </tr> </tbody> </table> <blockquote> <p>Use <code>;</code> character to comment lines in the script.</p> <p>Put <code>#</code> character at the end to terminate <code>M</code> section of the script.</p> </blockquote> <div class="admonition example"> <p class=admonition-title>Example</p> <p>(OBIS/SML/MODBus):<br> <div class=highlight><pre><span></span><code>1,1-0:1.8.1*255(@1,Total consumption,kWh,Total_in,4`  
1,77070100010801ff@1000,W1,kWh,w1,4`  
1,010304UUuuxxxxxxxx@i0:1,Spannung L1,V,Voltage_L1,0`  
1,0:98.1.0(@(0:1,Havi adat, kWh,havi1,3`
1,0:98.1.0(@(1:1,Havi adat, kWh,havi2,3`
1,0:98.1.0(@(2:1,Havi adat, kWh,havi3,3`
</code></pre></div></p> <p>OBIS: <code>1,1-0:0.0.0*255(@#),Meter Nr,, Meter_number,0</code></p> <p>Counter: <code>1,1-0:1.8.0*255(@1000,consumption,kWh,Total_in,3)</code> precision of 3, scale for 1000 pulses/kWh<br> <code>1,1-0:1.7.0*255(@0.01667, power,W,Power_actual,0)</code> actual power from pulse rate (in pulses/min) of counter meter, scale for 1 pulse/Wh (1 pulse/min =&gt; 60W; 1/60(=0.01667) (pulses/min)/W)</p> <p>SML: <code>1,77078181c78203ff@#,Service ID,,Meter_id,0</code><br> <code>1,1-0:1.8.0*255(@1,consumption,kWh,Total_in,4</code> precision of 4, transmitted only on <a href=../Commands/#teleperiod><code>TelePeriod</code></a><br> <code>1,1-0:1.8.0*255(@1,consumption,kWh,Total_in,20</code> precision of 4, transmitted immediately (4 + 16 = 20)</p> <p>MODBus: <code>+1,3,M,1,9600,SBC,1,2,01030023,01030028...</code><br> <code>1,010304UUuuxxxxxxxx@i0:1,Voltage L1,V,Voltage_L1,0</code> the <code>i0:1</code> refers to: <code>01030023</code> with a scaling factor (<code>:1</code>) for 1<br> <code>1,010304UUuuxxxxxxxx@i1:10,Current L1,V,Current_L1,2</code> the <code>i1:10</code> refers to: <code>01030028</code> with a scaling factor (<code>:10</code>) for 10</p> </div> <div class="admonition tip"> <p class=admonition-title>Tip</p> <p>Use: <code>sensor53 dM</code> to output the received data in the console. <code>M</code> = the number of the meter in the definition line.<br> During the output of the data in the console, the data in the WEB UI are not updated. To return write: <code>sensor53 d0</code> </p> </div> <div class="admonition tip"> <p class=admonition-title>Tip</p> <p>You can monitor the serial activity at a GPIO with a connected LED. This function is useful for debugging purposes and also to see data is coming in during normal operation.<br> Usage: Enter the command <code>sensor53 lx</code> to activate this function (Lowercase <code>L</code> for <code>LED</code>). <code>x</code> is the number of the GPIO where the LED is connected. For example you can use <code>sensor53 l2</code> for the onboard LED on a Wemos D1-mini or <code>sensor53 l13</code> on a Sonoff Basic. <code>sensor53 l255</code> turns the function off. This is the default value.<br> With <code>sensor53 mx</code> you can choose which serial meter (<code>x</code>) will be monitored. Set <code>sensor53 m0</code> will monitor all serial meters. This is the default value.<br> To start the monitoring at boot-time, simply add the necessary entries in the boot-section (<code>&gt;B</code>) of the script:<br></p> <div class="admonition example"> <p class=admonition-title>Example</p> <div class=highlight><pre><span></span><code>&gt;B
=&gt;sensor53 r
=&gt;sensor53 l13
</code></pre></div> </div> </div> <h2 id=special-commands>Special Commands<a class=headerlink href=#special-commands title="Permanent link">~</a></h2> <p>With <code>=</code> character at the beginning of a line you can do some special decoding. With <code>*</code> character fields can be hidden or skipped. The term decoder entries refer to the relative line number (starting with 1) in the decoder section. Special options and e.g math calculations are not counted as a decoder entry and have to be skipped in counting.</p> <table> <thead> <tr> <th style="text-align: left;">Command</th> <th style="text-align: left;">Description</th> </tr> </thead> <tbody> <tr> <td style="text-align: left;"><code>M,=m</code></td> <td style="text-align: left;">Perform arithmetic (<code>+,-,*,/</code>) on the measured data. Use <code>#</code> before a number to designate a constant value, evaluation is from left to right, no brackets supported, first paramter must be a decoder entry, not a constant<br>e.g. <code>1,=m 3+4+5/#3 @100,Voltage L1+L2+L3/3,V,Volt_avg,2</code> to sum results of decoder entries 3,4,5 and divide by 3 (average)</td> </tr> <tr> <td style="text-align: left;"><code>M,=d</code></td> <td style="text-align: left;">Calculate difference between metric values decoded at time intervals (up to 10 =d lines possible) <br>e.g. <code>1,=d 3 10</code> calculate 10 second interval difference of decoder entry 3, this is meant for meters that lack current power, therefore result is rescaled to hours (KWh)</td> </tr> <tr> <td style="text-align: left;"><code>M,=h</code></td> <td style="text-align: left;">Insert text on the web interface (html text up to 30 chars). These lines do not count as decoder entry.<br> e.g. <code>1,=h&lt;hr/&gt;</code> to insert a separator line on the web UI</td> </tr> <tr> <td style="text-align: left;"><code>*</code> character</td> <td style="text-align: left;">To hide fields from result output or disable output completely. Compiling with <code>USE_SML_SCRIPT_CMD</code> required. <br> - as single character in <code>&lt;label&gt;</code> of the metrics line will hide that value from the web UI <br> - as single character in <code>&lt;label&gt;</code> of the meter definition line will suppress the entire JSON output on MQTT</td> </tr> <tr> <td style="text-align: left;"><code>M,=so1</code></td> <td style="text-align: left;">special SML option for meters that use a bit in the status register to sign import or export like ED300L, AS2020 or DTZ541 <br>e.g. 1,=so1,00010800,65,11,65,11,00100700 for DTZ541<br> 1. obis code that holds the direction bit, 2. Flag identifier, 3. direction bit, 4. second Flag identifier (some meters use 2 different flags), 5. second bit, 6 obis code of value to be inverted on direction bit.<br></td> </tr> <tr> <td style="text-align: left;"><code>M,=so2</code></td> <td style="text-align: left;">if 1 fixes the bug introduced by meter DWS74, if 2 enabled OBIS line compare mode instead of shift compare mode, if 4 invert hardware serial line, if 8 disable UART pullup on hardware serial rec line, if 20 disable Parity calculation on obis send<br>e.g. 1,=so2,2 enable obis line compare.<br></td> </tr> <tr> <td style="text-align: left;"><code>M,=so3</code></td> <td style="text-align: left;">Adjust buffer sizes, spec: 1,=so3,\&lt;serial buffer&gt;[,\&lt;serial IRQ buffer&gt;][,\&lt;dump buffer&gt;] where serial buffer size is required and defaults to 48 bytes, serial IRQ buffer size is optional and defaults to 256 bytes and serial dump buffer size is optional and defaults to 128 bytes.<br>Enter as a new descriptor line e.g. <code>1,=so3,48,512</code> which keeps serial buffer size at 48 bytes but increases serial IRQ buffer size to 512 bytes and does not change dump buffer size.<br>Note: size should fit to the maximum length of a single line of decoding description; too big buffer sizes lead to delayed WebUI/MQTT updates</td> </tr> <tr> <td style="text-align: left;"><code>M,=so4</code></td> <td style="text-align: left;">sets AES decrytion key for encrypted meters.must define exactly 16 hexadecimal chars<br>e.g. 1,=so4,deabcd0020a0cfdedeabcd0020a0cfde sets decryption key and enables decrypt mode for that meter.<br></td> </tr> <tr> <td style="text-align: left;"><code>M,=so5</code></td> <td style="text-align: left;">sets AES authentication key for encrypted meters.must define exactly 16 hexadecimal chars<br>e.g. not needed by most energy meters (needs USE_SML_AUTHKEY).<br></td> </tr> <tr> <td style="text-align: left;"><code>M,=so6</code></td> <td style="text-align: left;">sync time in milliseconds for serial block detection with AMS meters (defaults to 1000).<br></td> </tr> <tr> <td style="text-align: left;"><code>M,=so7</code></td> <td style="text-align: left;">on ESP32 force selection of UART Nr. X (0,1,2) allows coexistence with other serial drivers <br></td> </tr> <tr> <td style="text-align: left;"><code>M,=so8</code></td> <td style="text-align: left;">CAN bus filter mask <br></td> </tr> <tr> <td style="text-align: left;"><code>M,=so9</code></td> <td style="text-align: left;">CAB bus filter <br></td> </tr> <tr> <td style="text-align: left;"><code>M,=soC</code></td> <td style="text-align: left;"><a name=special-option-soc></a> CRC check for binary SML. exp: 1,=soC,1024,15<br>spec: 1,=soC,\&lt;buffersize&gt;,\&lt;cr-cmode&gt; <br> For buffersize 1024 is a good starting point. crc-modes are: 15:auto-detect, 0:x25, 1:ccitt, 2:kermit 3:modbus, 4:xmodem,5:mcrf4xx <br>auto-detect works by simply trying all available algorithms. starting with x25 (crcmode=0). If 4 consecutive correct files are received auto-detecting will choose this algorithm until next restart.</td> </tr> </tbody> </table> <div class="admonition example"> <p class=admonition-title>Example</p> <p>To get the value of one of the descriptor lines, use <code>sml[X]</code>. <code>X</code> = Line number. Starts with <code>1</code>. (compiling with <code>USE_SML_SCRIPT_CMD</code> required) <div class=highlight><pre><span></span><code>&gt;D
v1=0
v2=0
&gt;S
;Writes the value of Descriptorline 1 to v1
v1=sml[1] 
;Writes the value of Descriptorline 2 to v2
v2=sml[2]
</code></pre></div></p> </div> <div class="admonition example"> <p class=admonition-title>Example</p> <p>To disable and enable publishing of MQTT data on TelePeriod, use <code>smlj=0</code> and <code>smlj|=1</code>, respectively. For example to skip first MQTT publishing after boot (may contain erroneous data at after restart if meter is slow, see <a href=#sanxing-sx6x1-sxxu1x-ascii-obis>Sanxing SX6x1</a>): <div class=highlight><pre><span></span><code>&gt;D
&gt;B
;disable publishing at MQTT teleperiod, on boot
smlj=0
&gt;S
;re-enable publishing at MQTT teleperiod, after 10 seconds of uptime
if upsecs&gt;10
then
smlj|=1
endif
</code></pre></div> the variable smlj also switches to obis_line_mode if bit 1 = 1, default is 0 </p> </div> <div class="admonition example"> <p class=admonition-title>Example</p> <p>If you have large meter descriptors and want to extract multiple values from the same descriptor, you can save flash space using <code>SML_REPLACE_VARS</code> at compile time (see <a href=#resol-deltasol-bs-plus-vbus>Resol Deltasol BS Plus</a>): <div class=highlight><pre><span></span><code>&gt;D
;define a text variable
r=&quot;1,AA100021421000010774&quot;
&gt;M 1
;in your meter definitions you can use your variable for the same descriptor
+1,3,v,0,9600,Solar
%r%vo12ut@#,time,,zeit,1
%r%vo0uw@10,S1 COL,°C,sens1,1
%r%vo2uw@10,S2 TST1,°C,sens2,1
%r%vo4uw@10,S3 TST2,°C,sens3,1
%r%vo6uw@10,S4 TR,°C,sens4,1
;%r% inserts the text variable and saves script storage space (3 instead of 22 chars for each line)
</code></pre></div></p> </div> <div class="admonition attention"> <p class=admonition-title>Attention</p> <p>With a few meters, it is necessary to request the meter to send data using a specific character string. This string has to be sent at a very low baud rate (300Baud). If you reply the meter with an acknowledge and ask the it for a new baud rate of 9600 baud, the baud rate of the SML driver has to be changed, too (see <a href=#landis-gyr-zmr120ares2r2sfcs-obis>Landis + Gyr ZMR120AR</a>).</p> <p>To change the baud rate:</p> <blockquote> <p>sml(<code>METERNUMBER</code> 0 <code>BAUDRATE</code>) </p> </blockquote> <p>For sending a specific character string:</p> <blockquote> <p>sml(<code>METERNUMBER</code> 1 <code>STRING</code>)</p> </blockquote> <p>And it works like this:<br> <div class=highlight><pre><span></span><code>&gt;D
res=0  
scnt=0    
;For this Example in the &gt;F section  
&gt;F
;count 100ms   
scnt+=1  
switch scnt  
case 6  
;set sml driver to 300 baud and send /?! as HEX to trigger the Meter   
res=sml(1 0 300)  
res=sml(1 1 &quot;2F3F210D0A&quot;)  
;1800ms later \&gt; Send ACK and ask for switching to 9600 baud  
case 18  
res=sml(1 1 &quot;063035300D0A&quot;)  
;2000ms later \&gt; Switching sml driver to 9600 baud    
case 20  
res=sml(1 0 9600)   
;Restart sequence after 50x100ms    
case 50  
; 5000ms later \&gt; restart sequence    
scnt=0  
ends        
&gt;M 1
+1,3,o,0,9600, ,1  
;...etc.  
</code></pre></div></p> <p><strong>Note</strong>: This procedure is only necessary, if the meter explicitly asks for 300 baud. The most meters work directly with 9600 baud. Therefore it is easier to give this method a try (see <a href=#iskra-mt-174-obis>Iskra MT 174</a>): </p> <p><code>Meter#,GPIO# Input,TYPE,FLAG,Baudrate,JSONNAME,GPIO# Output,TX Period,Character string</code><br> <code>+1,3,o,0,9600,energy,1,4,2F3F210D0A</code></p> </div> <div class="admonition tip"> <p class=admonition-title>Tip</p> <p>If you use a Wemos D1 Mini you could compile a 4M flash image with filesystem support so your script will survive upgrades and factory resets. To do this, create a new entry in <code>platformio_tasmota_env.ini</code>: <div class=highlight><pre><span></span><code>[env:tasmota-4mb]
board_build.ldscript    = eagle.flash.4m2m.ld
</code></pre></div> Add <code>tasmota-4mb</code> to <code>platformio.ini</code>'s build variants.</p> <p>Add the following to <code>user_config_override.h</code>: <div class=highlight><pre><span></span><code>#undef  MODULE
#define MODULE WEMOS
#define USE_UFILESYS
#define GUI_TRASH_FILE
</code></pre></div> Also recommended, if you use lots of vars and increased buffer sizes to free up the image from unused drivers. You should get some inspiration from the <code>tasmota-lite</code> image definition in <code>tasmota_configurations.h</code>. </p> </div> <div class="admonition tip"> <p class=admonition-title>Tip</p> <p>You can dump to your PC the raw data coming in if you use the module's hardware serial ports (1 and 3) as GPIOs of the script, <a href=https://tasmota.github.io/docs/Serial-to-TCP-Bridge/ >using Serial to TCP Bridge</a>. Compile your firmware with <code>USE_TCP_BRIDGE</code>, disable the script and configure in module parameters <code>TCP Tx</code> and <code>TCP Rx</code>. After module reboot, start the server with command <code>TCPStart 8888</code>. Connect to this port from your PC to see or dump the data, in Linux it's as easy as <code>cat &lt; /dev/tcp/IP.OF.YOUR.TASMOTA/8888 &gt; rawdump.txt</code>. To revert to SML you need to set back both GPIO ports to <code>None</code>, enable the script and restart.</p> </div> <h2 id=commands>Commands<a class=headerlink href=#commands title="Permanent link">~</a></h2> <ul> <li>sensor53 r = resets the sml driver, must be applied in script &gt;B section </li> <li>sensor53 cx num = sets counter x (1 or 2) to number (persistent change) </li> <li>sensor53 dm = sets dump mode for meter m (1...N), must be set to 0 for normal operation </li> <li>sensor53 l x = set an optional LED GPIO pin to indicate serial activity of a meter, set to 255 for disable </li> <li>sensor53 m x = sets the meter from which to show activity via the l cmd </li> </ul> <h2 id=web-requests>Web Requests<a class=headerlink href=#web-requests title="Permanent link">~</a></h2> <p>In addition to the MQTT publishing, the sensor data can be polled using <a href=https://tasmota.github.io/docs/Commands/#with-web-requests>web requests</a> with the <a href=https://tasmota.github.io/docs/Commands/#management>status 10 command</a>, e.g. <code>http:/&lt;IP&gt;/cm?cmnd=status%2010</code>.</p> <p>It is also possible to directly access certain lines of the script. Example:</p> <div class=highlight><pre><span></span><code>&gt;D
&gt;B
=&gt;sensor53 r
&gt;M 1
+1,3,s,0,9600,powermeter
1,77070100010800FF@1,Input Total,Wh,input_total,1
1,77070100020800FF@1,Output Total,Wh,output_total,1
1,770701000E0700FF@1,Net Frequency,Hz,net_frequency,2
1,77070100100700FF@1,Current Power,W,current_power,0
#
</code></pre></div> <p>To access the fourth line <code>current_power</code> use the following URL: <code>http://&lt;IP&gt;/cm?cmnd=script?sml[4]</code> which will result in a short JSON string like <code>{"script":{"sml[4]":280}}</code>.</p> <h2 id=smart-meter-descriptors>Smart Meter Descriptors<a class=headerlink href=#smart-meter-descriptors title="Permanent link">~</a></h2> <h3 id=abb-b23-modbus>ABB B23 (MODBus)<a class=headerlink href=#abb-b23-modbus title="Permanent link">~</a></h3> <p>Meter is basically the same as <a href=#janitza-b23-modbus>Janitza B23</a> with the same interface. It's just missing whole section of registers which are used in Janitza B23 example.</p> <p>Beware that A and B MODBus connectors are switched!</p> <details class=summary> <summary>View script</summary> <div class=highlight><pre><span></span><code>&gt;D
&gt;B
-&gt;sensor53 r
&gt;M 1
+1,3,m,0,9600,ABB,1,10,01035B00,01035B02,01035B04,01035B14,01035B16,01035B18,01035B1A,r010350080004,r010350000004,r010350040004
1,010304UUuuUUuu@i0:10,Voltage L1-N,V,Voltage_L1,1
1,010304UUuuUUuu@i1:10,Voltage L2-N,V,Voltage_L2,1
1,010304UUuuUUuu@i2:10,Voltage L3-N,V,Voltage_L3,1
1,010304SSssSSss@i3:100,Active power Total,W,Active_power_Total,2
1,010304SSssSSss@i4:100,Active power L1-N,W,Active_power_L1,2
1,010304SSssSSss@i5:100,Active power L2-N,W,Active_power_L2,2
1,010304SSssSSss@i6:100,Active power L3-N,W,Active_power_L3,2
1,010308xxxxxxxxSSssSSss@i7:100,Real energy,kWh,Real_energy,2
1,010308xxxxxxxxUUuuUUuu@i8:100,Real energy consumed,kWh,Real_energy_consumed,2
1,010308xxxxxxxxUUuuUUuu@i9:100,Real energy delivered,kWh,Real_energy_delivered,2
#
</code></pre></div> </details> <h3 id=abb-b-series-like-b21-b23-m-bus-over-infrared-port>ABB B-Series (like B21, B23) (M-Bus over Infrared port)<a class=headerlink href=#abb-b-series-like-b21-b23-m-bus-over-infrared-port title="Permanent link">~</a></h3> <p>Using the IR Port on left side of the device. The IR interface does NOT support MODBUS, only M-Bus (Meter Bus) and EQ-Bus protocol. Configure the IR output at the device menu. This example is using 9600 baud and address 10h (16 decimal) for the meter.<br> The meter is using equal parity 1 stop bit 9600E1 The upper diode is TX the lower RX. My device is sending always 2 telegrams. I tried to add additional values by sending SND_UD telegram. I only receive the e5 response showing that the request was accepted. No change in response. The last telegram will end on a "0F xx 16" instead of a "1F xx 16", which will show that additional telegrams are available. If you can receive more telegrams, add alternating 107b108b16 - 105b106b16. One for each telegram. This example will only work with address 10! the second last byte is a check sum. For this REQ_UD2 it is the sum of the 2 bytes before (Address and VIF). </p> <details class=summary> <summary>View script</summary> <div class=highlight><pre><span></span><code>&gt;M 1
+1,3,rE1,0,9600,ABB,1,10,1040105016,107b108b16,105b106b16[,107b108b16[,105b106b16]] 
1,081072bcd8@1,Meter ID,,ID,0 ; meter ID (BCD-8)
1,0E8400bcd8@100,E Imp total,kWh,Imp,2 ; Total imported energy 0.01 kWh
1,04A900ssSSssSSs@100,P total,W,P_tot,2 ; Total Power 0.01 W
1,04A9FF8100ssSSssSSs@100,P L1,W,P_L1,2 ; L1 Power 0.01 W
1,04A9FF8200ssSSssSSs@100,P L2,W,P_L2,2 ; L2 Power 0.01 W
1,04A9FF8300ssSSssSSs@100,P L3,W,P_L3,2 ; L3 Power 0.01 W
1,04FDC8FF8100uuUUuuUUs@10,U L1,V,U_L1,1 ; Voltage L1 0.1 V
1,04FDC8FF8200uuUUuuUUs@10,U L2,V,U_L2,1 ; Voltage L2 0.1 V
1,04FDC8FF8300uuUUuuUUs@10,U L3,V,U_L3,1 ; Voltage L3 0.1 V
1,0AFFD900bcd4@100,*,Hz,F,2 ; Frequency
1,0E84FF8100bcd8@100,E Imp L1,kWh,Imp-L1,2 ; L1 imported energy 0.01 kWh
1,0E84FF8200bcd8@100,E Imp L2,kWh,Imp-L2,2 ; L2 imported energy 0.01 kWh 
1,0E84FF8300bcd8@100,E Imp L3,kWh,Imp-L3,2 ; L3 imported energy 0.01 kWh
#
</code></pre></div> </details> <h3 id=apator-12ec3>Apator 12EC3<a class=headerlink href=#apator-12ec3 title="Permanent link">~</a></h3> <p>Energy provider supplied a PIN code to enable output of additional data.</p> <details class=summary> <summary>View script</summary> <div class=highlight><pre><span></span><code>&gt;D
&gt;B
=&gt;sensor53 r
&gt;M 1
+1,3,o,0,300,Strom,1,30,2F3F210D0A,063030300D0A
1,1.8.0*00(@1,Gesamtverbrauch,kWh,Pges,2
1,1.8.1*00(@1,Tagesverbrauch,kWh,Total_day,2
1,1.8.2*00(@1,Nachtverbrauch,kWh,Total_night,2
1,2.8.0*00(@1,Einspeisung,kWh,Total_out,2
#
</code></pre></div> </details> <h3 id=apator-12ec3g>Apator 12EC3G<a class=headerlink href=#apator-12ec3g title="Permanent link">~</a></h3> <p>No PIN code needed for output data. It can only display total consumption.</p> <details class=summary> <summary>View script</summary> <div class=highlight><pre><span></span><code>&gt;D
&gt;B
=&gt;sensor53 r
&gt;M 1
+1,3,o,0,300,Strom,1,30,2F3F210D0A,063030300D0A
1,1.8.0*00(@1,Gesamtverbrauch,kWh,Pges,2
#
</code></pre></div> </details> <h3 id=apator-apox-sml>Apator APOX+ (SML)<a class=headerlink href=#apator-apox-sml title="Permanent link">~</a></h3> <p>Energy provider supplied a PIN code to enable output of additional data.</p> <details class=summary> <summary>View script</summary> <div class=highlight><pre><span></span><code>&gt;D  
&gt;B  
-&gt;sensor53 r
&gt;M 1  
+1,3,s,0,9600,SML
1,77070100010801ff@1000,Verbrauch_Tarif_1,kWh,Total_Tarif1,3
1,77070100010802ff@1000,Verbrauch_Tarif_2,kWh,Total_Tarif2,3
1,77070100010800ff@1000,Verbrauch_Summe,kWh,Total_Summe,3
1,77070100020800ff@1000,Einspeisung_Summe,kWh,Total_Einsp,3
1,77070100100700ff@1,Current consumption,W,Power_curr,3
1,=h   ----  
1,770701001f0700ff@1,Current L1,A,Curr_p1,3  
1,77070100330700ff@1,Current L2,A,Curr_p2,3  
1,77070100470700ff@1,Current L3,A,Curr_p3,3  
1,=h   ----  
1,77070100200700ff@1,Voltage L1,V,Volt_p1,3 
1,77070100340700ff@1,Voltage L2,V,Volt_p2,3  
1,77070100480700ff@1,Voltage L3,V,Volt_p3,3
#
</code></pre></div> </details> <h3 id=apator-lepus-3060-sml>Apator Lepus 3.060 (SML)<a class=headerlink href=#apator-lepus-3060-sml title="Permanent link">~</a></h3> <p>Instructions for Activating the Instantaneous Power Display and Disabling the PIN Protection. For more details and additional instructions, you can download the user manual from the internet.</p> <p><strong>Important Note</strong>:<br> Entering the PIN with a flashlight is <strong>not</strong> sufficient to permanently display the instantaneous power or disable the PIN protection.</p> <p>Please follow the steps below. For more details, refer to the user manual of the meter, which is available for download online.</p> <ol> <li> <p>To start, press and hold the <strong>left arrow button</strong> for <strong>more than 5 seconds</strong> to access the parameter menu. A display test will briefly show the top and bottom lines of the display.</p> </li> <li> <p>If PIN protection is active, you will be prompted to enter the PIN. Use <strong>short button presses</strong> to select the correct digits. After about 2 seconds of no input, the cursor will automatically move to the next digit.</p> </li> <li> <p>To activate the instantaneous power display, navigate to the <strong>"Inf"</strong> menu option and press and hold the <strong>left arrow button for more than 5 seconds</strong>. This will enable the <strong>"Inf on"</strong> setting, which will display the instantaneous power on the second line of the display permanently.</p> </li> <li> <p>To disable PIN protection, navigate to the <strong>"Pin"</strong> menu option and press and hold the <strong>left arrow button for more than 5 seconds</strong>. This will turn off the PIN protection.</p> </li> </ol> <p>After following these steps, the instantaneous power will be displayed permanently in the second line of the display.</p> <details class=summary> <summary>View script in English</summary> <div class=highlight><pre><span></span><code>    &gt;D  
    &gt;B  
    -&gt;sensor53 r
    &gt;M 1  
    +1,3,s,1,9600,SML  
    1,77070100100700FF@1,Power Consumption,W,Current_Active_Power,16
    1,77070100240700FF@1,Phase 1,W,Active_Power_L1,0
    1,77070100380700FF@1,Phase 2,W,Active_Power_L2,0
    1,770701004C0700FF@1,Phase 3,W,Active_Power_L3,0
    1,=h ----
    1,77070100010800FF@1,Total Consumption,Wh,Total_Consumption,1
    1,77070100020800FF@1,Feed-in,Wh,Total_Active_Energy,1
    1,=h ----
    1,770701000E0700FF@1,Grid Frequency,Hz,Grid_Frequency,1
    1,770701001F0700FF@1,Current L1,A,Current_L1,2
    1,77070100330700FF@1,Current L2,A,Current_L2,2
    1,77070100470700FF@1,Current L3,A,Current_L3,2
    1,77070100200700FF@1,Voltage L1,V,Voltage_L1,1
    1,77070100340700FF@1,Voltage L2,V,Voltage_L2,1
    1,77070100480700FF@1,Voltage L3,V,Voltage_L3,1
    1,77070100510701FF@1,Delta Phi U L1/L2,°,Delta_Phi_U_L1_L2,0
    1,77070100510702FF@1,Delta Phi U L1/L3,°,Delta_Phi_U_L1_L3,0
    1,77070100510704FF@1,Delta Phi I/U L1,°,Delta_Phi_I_U_L1,0
    1,7707010051070FFF@1,Delta Phi I/U L2,°,Delta_Phi_I_U_L2,0
    1,7707010051071AFF@1,Delta Phi I/U L3,°,Delta_Phi_I_U_L3,0
    1,77070100600100ff@#,Server ID,,Server_ID,0
    1,7707010060320101@#,Service ID,,Meter_ID,0
    1,77070100605a0201@1,Firmware Checksum,,FwCheck,0
    #
</code></pre></div> </details> <details class=summary> <summary>View script in German</summary> <div class=highlight><pre><span></span><code>    &gt;D  
    &gt;B  
    -&gt;sensor53 r
    &gt;M 1  
    +1,3,s,1,9600,SML
    1,77070100100700FF@1,Stromverbrauch,W,aktuelle_Wirkleistung,16
    1,77070100240700FF@1,Leiter 1,W,Wirkleistung_L1,0
    1,77070100380700FF@1,Leiter 2,W,Wirkleistung_L2,0
    1,770701004C0700FF@1,Leiter 3,W,Wirkleistung_L3,0
    1,=h   ----
    1,77070100010800FF@1,Zähler Verbrauch,Wh,Zaehlerstand_total,1
    1,77070100020800FF@1,Zähler Einspeisung,Wh,Wirkenergie_total,1
    1,=h   ----
    1,770701000E0700FF@1,Netz Frequenz,Hz,Netz_Frequenz,1
    1,770701001F0700FF@1,Strom L1,A,Strom_L1,2
    1,77070100330700FF@1,Strom L2,A,Strom_L2,2
    1,77070100470700FF@1,Strom L3,A,Strom_L3,2
    1,77070100200700FF@1,Spannung L1,V,Spannung_L1,1
    1,77070100340700FF@1,Spannung L2,V,Spannung_L2,1
    1,77070100480700FF@1,Spannung L3,V,Spannung_L3,1
    1,77070100510701FF@1,delta phi U L1/L2,°,delta_phi_U_L1-L2,0
    1,77070100510702FF@1,delta phi U L1/L3,°,delta_phi_U_L1-L3,0
    1,77070100510704FF@1,delta phi I/U  L1,°,delta_phi_I_U_L1,0
    1,7707010051070FFF@1,delta phi I/U L2,°,delta_phi_I_U_L2,0
    1,7707010051071AFF@1,delta phi I/U L3,°,delta_phi_I_U_L3,0
    1,77070100600100ff@#,Server ID,,Server_ID,0
    1,7707010060320101@#,Service ID,,Meter_ID,0
    1,77070100605a0201@1,Firmware Checksum,,FwCheck,0
    #
</code></pre></div> </details> <p>For further support, visit the <a href=https://github.com/arendst/Tasmota/discussions/17635>APATOR LEPUS Discussion Thread</a>.</p> <h3 id=apator-norax-1d-sml>Apator Norax 1D+ (SML)<a class=headerlink href=#apator-norax-1d-sml title="Permanent link">~</a></h3> <details class=summary> <summary>View script</summary> <div class=highlight><pre><span></span><code>&gt;D
&gt;B
-&gt;sensor53 r
&gt;M 1
+1,3,s,1,9600,SML
1,77070100010800ff@1000,Total consumption,kWh,total_in,4
1,77070100020800ff@1000,Total Feed,kWh,total_out,4
1,770701000b0700ff@1,Amperage,A,amperage,1
1,770701000c0700ff@1,Voltage,V,voltage,1
1,770701000e0700ff@1,Frequency,Hz,frequency,0
1,77070100100700ff@1,Current consumption,W,power_curr,0
#
</code></pre></div> </details> <h3 id=apator-norax-3d-sml>Apator Norax 3D (SML)<a class=headerlink href=#apator-norax-3d-sml title="Permanent link">~</a></h3> <p>To get all information with the scrpit below you need to enter the PIN. In the following menu you then turn "Pin" to "off" and "InF" to "on". Now all values are submitted through the SML script.</p> <details class=summary> <summary>View script</summary> <div class=highlight><pre><span></span><code>&gt;D
&gt;B
-&gt;sensor53 r
&gt;M 1
+1,3,s,0,9600,SML
1,77070100010800ff@1000,Total consumption,kWh,Total_in,4
1,77070100020800ff@1000,Total Feed,kWh,Total_out,4
1,77070100100700ff@1,Current consumption,W,Power_curr,0
1,77070100200700ff@1,Voltage L1,V,Volt_p1,1
1,77070100340700ff@1,Voltage L2,V,Volt_p2,1
1,77070100480700ff@1,Voltage L3,V,Volt_p3,1
1,770701001f0700ff@1,Amperage L1,A,Amperage_p1,1
1,77070100330700ff@1,Amperage L2,A,Amperage_p2,1
1,77070100470700ff@1,Amperage L3,A,Amperage_p3,1
1,77070100510704ff@1,Phaseangle I-L1/U-L1,deg,phase_angle_p1,1 
1,7707010051070fff@1,Phaseangle I-L27I-L2,deg,phase_angle_p2,1  
1,7707010051071aff@1,Phaseangle I-L3/I-L3,deg,phase_angle_p3,1 
1,770701000e0700ff@1,Frequency,Hz,frequency,0
#
</code></pre></div> </details> <details class=summary> <summary>SML with daily values</summary> <div class=highlight><pre><span></span><code>&gt;D  
pin=0  
pout=0  
pi_d=0  
po_d=0  
hr=0  
; permanent midnight values  
p:pi_m=0  
p:po_m=0  
&gt;B  
-&gt;sensor53 r  
&gt;T  
; get total consumption and total feed  
pin=SML#Total_in  
pout=SML#Total_out  
&gt;S  
; at midnight, save meter total values  
hr=hours  
if chg[hr]&gt;0  
and hr==0  
then  
pi_m=pin  
po_m=pout  
svars  
endif  
; on teleperiod calculate current daily values from midnight  
if upsecs%tper==0  
then  
pi_d=pin-pi_m  
po_d=pout-po_m  
endif  
; show these values on WEB UI  
&gt;W  
Tagesverbrauch: {m} %pi_d% kWh  
Tageseinspeisung: {m} %po_d% kWh    
; transmit these values with MQTT  
&gt;J  
,&quot;daily_consumption&quot;:%pi_d%,&quot;daily_feed&quot;:%po_d%  
; meter definition  
&gt;M 1  
+1,3,s,0,9600,SML  
1,77070100010800ff@1000,Total Consumed,kWh,Total_in,4  
1,77070100020800ff@1000,Total Delivered,kWh,Total_out,4  
1,77070100100700ff@1,Current Consumption,W,Power_curr,0  
1,77070100000009ff@#,Meter Number,,Meter_number,0  
#
</code></pre></div> </details> <h3 id=apator-norax-3d-sml_1>Apator Norax 3D+ (SML)<a class=headerlink href=#apator-norax-3d-sml_1 title="Permanent link">~</a></h3> <p>This script gives also the wattage per phase. Make sure to get the PIN from your grid operator! Tested on a WeMos D1 mini with an IR Head from <a href=https://agalakhov.github.io/ir-interface>https://agalakhov.github.io/ir-interface</a> connected to the RX pin (3). The meter also outputs the phase angles, but i left them out since i do not need them. You can easily find additional values by activating the debug mode ("sensor53 d1" for the first meter, switch off after a few seconds with "sensor53 d0").</p> <details class=summary> <summary>View script</summary> <div class=highlight><pre><span></span><code>&gt;D
&gt;B
-&gt;sensor53 r
&gt;M 1
+1,3,s,1,9600,SML
1,77070100010800ff@1000,Total consumption,kWh,Total_in,4
1,77070100020800ff@1000,Total Feed,kWh,Total_out,4
1,77070100100700ff@1,Current consumption,W,Power_curr,0
1,77070100200700ff@1,Voltage L1,V,Volt_p1,1
1,77070100340700ff@1,Voltage L2,V,Volt_p2,1
1,77070100480700ff@1,Voltage L3,V,Volt_p3,1
1,770701001f0700ff@1,Amperage L1,A,Amperage_p1,1
1,77070100330700ff@1,Amperage L2,A,Amperage_p2,1
1,77070100470700ff@1,Amperage L3,A,Amperage_p3,1
1,77070100240700ff@1,Current consumption L1,W,Power_curr_p1,0
1,77070100380700ff@1,Current consumption L2,W,Power_curr_p2,0
1,770701004c0700ff@1,Current consumption L3,W,Power_curr_p3,0
1,770701000e0700ff@1,Frequency,Hz,frequency,0
#
</code></pre></div> </details> <h3 id=apator-picus-ehz060dj-sml>Apator Picus eHZ.060.D/J (SML)<a class=headerlink href=#apator-picus-ehz060dj-sml title="Permanent link">~</a></h3> <p>Make sure to acquire the PIN from your energyprovider. After unlocking the meter, you can run the following script</p> <details class=summary> <summary>View script</summary> <div class=highlight><pre><span></span><code>&gt;D
&gt;B
=&gt;sensor53 r
&gt;M 1
+1,3,s,0,9600,PICUS
1,77070100100700ff@1,Consumption (Current),W,curr_w,0
1,77070100010800ff@1000,Consumption (Total),Kwh,total_kwh,2
1,77070100020800ff@1000,feed (Total),Kwh,total_kwh_out,2
#
</code></pre></div> </details> <h3 id=carlo-gavazzi-em340-modbus-rtu>Carlo Gavazzi EM340 (MODBus RTU)<a class=headerlink href=#carlo-gavazzi-em340-modbus-rtu title="Permanent link">~</a></h3> <details class=summary> <summary>View script</summary> <div class=highlight><pre><span></span><code>&gt;D
&gt;B
-&gt;sensor53 r
;-&gt;sensor53 d1
&gt;M 1
+1,13,m,0,115200,MODBUS,12,2,01030000,01030002,01030004,0103000C,0103000E,01030010,01030012,01030014,01030016,01030018,0103001A,0103001C,0103001E,01030020,01030022,01030034,01030038,0103002e,0103002f,01030030,0103004e
1,010304SSssSSsss@i0:10,Voltage L1,V,Voltage_L1,1
1,010304SSssSSsss@i1:10,Voltage L2,V,Voltage_L2,1
1,010304SSssSSsss@i2:10,Voltage L3,V,Voltage_L3,1
1,010304SSssSSsss@i3:1000,Current L1,A,Current_L1,3
1,010304SSssSSsss@i4:1000,Current L2,A,Current_L2,3
1,010304SSssSSsss@i5:1000,Current L3,A,Current_L3,3
1,010304SSssSSsss@i6:10,Power L1,W,Power_L1,1
1,010304SSssSSsss@i7:10,Power L2,W,Power_L2,1
1,010304SSssSSsss@i8:10,Power L3,W,Power_L3,1
1,010304SSssSSsss@i9:10,Power VA L1,VA,Power_va_L1,1
1,010304SSssSSsss@i10:10,Power VA L2,VA,Power_va_L2,1
1,010304SSssSSsss@i11:10,Power VA L3,VA,Power_va_L3,1
1,010304SSssSSsss@i12:10,Power var L1,var,Power_var_L1,1
1,010304SSssSSsss@i13:10,Power var L2,var,Power_var_L2,1
1,010304SSssSSsss@i14:10,Power var L3,var,Power_var_L3,1
1,010304SSssSSsss@i15:10,Energy Tot,kWh,Energy_Tot,1
1,010304SSssSSsss@i16:10,Energy Demand,W,Energy_Demand,1
1,010304SSss@i17:1000,PF L1,PF,PF_L1,1
1,010304SSss@i18:1000,PF L2,PF,PF_L2,1
1,010304SSss@i19:1000,PF L3,PF,PF_L3,1
1,010304SSssSSsss@i20:10,Energy Tot Export,kWh,Energy_Tot_Export,1
#
</code></pre></div> </details> <h3 id=combo-meter-water-gas-sml>COMBO Meter (Water, Gas, SML)<a class=headerlink href=#combo-meter-water-gas-sml title="Permanent link">~</a></h3> <details class=summary> <summary>View script</summary> <div class=highlight><pre><span></span><code>&gt;D  
&gt;B  
-&gt;sensor53 r
&gt;M 3  
+1,1,c,0,10,H20  
+2,4,c,0,50,GAS  
+3,3,s,0,9600,SML  
1,1-0:1.8.0*255(@10000,Water reading,cbm,Count,4  
2,=h==================  
2,1-0:1.8.0*255(@100,Gas reading,cbm,Count,3  
3,77070100010800ff@1000,Total consumption,kWh,Total_in,3  
3,=h==================  
3,77070100100700ff@1,Current consumption,W,Power_curr,2  
3,=h   ----  
3,=m 10+11+12 @100,Currents L1+L2+L3,A,Curr_summ,2  
3,=m 13+14+15/#3 @100,Voltage L1+L2+L3/3,V,Volt_avg,2  
3,=h==================  
3,77070100240700ff@1,Consumption P1,W,Power_p1,2  
3,77070100380700ff@1,Consumption P2,W,Power_p2,2  
3,770701004c0700ff@1,Consumption P3,W,Power_p3,2  
3,=h   ----  
3,770701001f0700ff@100,Current L1,A,Curr_p1,2  
3,77070100330700ff@100,Current L2,A,Curr_p2,2  
3,77070100470700ff@100,Current L3,A,Curr_p3,2  
3,=h   ----  
3,77070100200700ff@100,Voltage L1,V,Volt_p1,2  
3,77070100340700ff@100,Voltage L2,V,Volt_p2,2  
3,77070100480700ff@100,Voltage L3,V,Volt_p3,2  
3,=h==================  
3,77070100000009ff@#,Service ID,,Meter_id,0  
3,=h     
#  
</code></pre></div> </details> <h3 id=ddm18sd-modbus>DDM18SD (MODBus)<a class=headerlink href=#ddm18sd-modbus title="Permanent link">~</a></h3> <p>This script, based on tasmota scripting language, is to read data on a unsupported DDM18SD power meter. It has 8E1 parity and the slave ID address is n 5. On a Nodemcu or Wemos D1 board, put wires between GPIO3 and GPIO1 to the RX and TX pinout of a RS485 to TTL board, but leave empty (none) the GPIO Tasmota software settings. A &amp; B connected to the meter pinout. </p> <details class=summary> <summary>View script</summary> <div class=highlight><pre><span></span><code>&gt;D
&gt;B  
-&gt;sensor53 r
&gt;M 1  
+1,3,M,0,9600,DDM,1,2,05040000,05040008,05040012,0504001A,05040036,0504002A,05040100,05040400
1,050404ffffffff@i0:1,Tensione,V,DDM_Voltage,2  
1,050404ffffffff@i1:1,Corrente,A,DDM_Current,2  
1,050404ffffffff@i2:1,Consumo Ist.,W,DDM_Power,2
1,050404ffffffff@i3:1,Reactive power,Var,DDM_React_Power,2
1,050404ffffffff@i4:1,Frequenza,Hz,DDM_Frequency,2 
1,050404ffffffff@i5:1,Power factor,,DDM_PF,2
1,050404ffffffff@i6:1,Consumi tot.,Kwh,DDM_Tot_Power,2
1,050404ffffffff@i7:1,Tot. react. power,Kvarh,DDM_Reac_Power,2
#
</code></pre></div> </details> <h3 id=deye-modbus>DEYE (MODBus)<a class=headerlink href=#deye-modbus title="Permanent link">~</a></h3> <details class=summary> <summary>View script</summary> <div class=highlight><pre><span></span><code>&gt;D
&gt;B
-&gt;sensor53 r
&gt;M1
+1,4,m,0,9600,Deye,2,1,01030271,0103028D,
0103024C,0103024E,010302A0,010302A1,0103029B,01030298,01030299,0103029A
1,010304SSss@i0:1,Total Grid Power,W,Total_Grid_Power,0
1,010304SSss@i1:1,Total Load Power,W,Total_Load_Power,0
1,010304SSss@i2:1,Battery SOC,%%,Battery_SOC,0
1,010304SSss@i3:1,Battery Power,W,Battery_Power,0
1,010304SSss@i4:1,PV1 Power,W,PV1_Power,0
1,010304SSss@i5:1,PV2 Power,W,PV2_Power,0
1,010304SSss@i6:1,Total Gen Power,W,Total_Gen_Power,0
1,010304SSss@i7:1,Gen Power L1,W,Gen_Power_L1,0
1,010304SSss@i8:1,Gen Power L2,W,Gen_Power_L2,0
1,010304SSss@i9:1,Gen Power L3,W,Gen_Power_L3,0
#
</code></pre></div> </details> <h3 id=digimeto-gs303-sml>Digimeto GS303 (SML)<a class=headerlink href=#digimeto-gs303-sml title="Permanent link">~</a></h3> <details class=summary> <summary>View script</summary> <div class=highlight><pre><span></span><code>&gt;D
&gt;B
=&gt;sensor53 r
&gt;M 1
+1,3,s,0,9600,GS303
1,77070100010800ff@1000,Total Consumed,kWh,Total_in,3
1,77070100100700ff@1,Current Consumption,W,Power_cur,0
1,77070100020800ff@1000,Total Delivered,kWh,Total_out,3
1,7707010060320101@#,Service ID,,Meter_id,0
#    
</code></pre></div> </details> <h3 id=dzg-dwze122g2-dvze-sml>DZG DWZE12.2.G2 (DVZE) (SML)<a class=headerlink href=#dzg-dwze122g2-dvze-sml title="Permanent link">~</a></h3> <p>A bidirectional metering device from DZG Metering GmbH.</p> <details class=summary> <summary>View script for the extended dataset</summary> <div class=highlight><pre><span></span><code>&gt;D
&gt;B
=&gt;sensor53 r
&gt;M 1
+1,3,s,16,9600,DWZE12
1,77070100010800ff@1000,Total Energy In,kWh,TotalIn,3
1,77070100020800ff@1000,Total Energy Out,kWh,TotalOut,3
1,77070100100700ff@1,Current Power,W,CurrPower,3
1,77070100600100ff@#,Meter Id,,MeterId,0
#
</code></pre></div> </details> <h3 id=dzg-dws74102vg2-sml-and-dzg-dvs74202-sml>DZG DWS7410.2V.G2 (SML) and DZG DVS7420.2 (SML)<a class=headerlink href=#dzg-dws74102vg2-sml-and-dzg-dvs74202-sml title="Permanent link">~</a></h3> <p>A bidirectional metering device from DZG Metering GmbH.</p> <p>Once unlocked with a PIN and set to <code>Inf on</code>, the meter returns not only an integer of the total consumption, but an extended dataset which also includes decimals as well as the current power.</p> <details class=summary> <summary>View script for the extended dataset</summary> <div class=highlight><pre><span></span><code>&gt;D
&gt;B
=&gt;sensor53 r
&gt;M 1
+1,3,s,16,9600,DWS7410
1,77070100010800ff@1000,Energie,kWh,energy,4
1,77070100020800ff@1000,Lieferung,kWh,en_out,4
1,77070100100700ff@1,Leistung,W,power,2
1,7707010060320101@#,SID,,meter_id,0
#
</code></pre></div> </details> <p>The script was derived from the DZG DWS76 (SML) device below and extended by the delivered energy. The lines for <code>meter_id</code>, <code>unknown</code> and <code>meter_number</code> were reduced to one line for <code>meter_id</code> because all values were identical.</p> <p>For <code>Inf off</code>, a simplified dataset is returned only.</p> <details class=summary> <summary>Alternative script for the simplified dataset</summary> <div class=highlight><pre><span></span><code>&gt;D
&gt;B
=&gt;sensor53 r
&gt;M 1
+1,3,s,16,9600,DWS7410
1,77070100010800ff@1000,Energie,kWh,energy,0
1,7707010060320101@#,Service ID,,meter_id,0
1,77010b0a01445a47@#,Unbekannt,,unknown,0
1,77070100600100ff@#,Zählernummer,,meter_number,0
#
</code></pre></div> </details> <h3 id=dzg-dws74121g2-sml>DZG DWS7412.1.G2 (SML)<a class=headerlink href=#dzg-dws74121g2-sml title="Permanent link">~</a></h3> <p>A uni-directional metering device from DZG Metering GmbH.</p> <p>Once unlocked with a PIN and set to <code>Inf on</code>, the meter returns not only an integer of the total consumption, but an extended dataset which also includes decimals as well as the current power.</p> <details class=summary> <summary>View script for the extended dataset</summary> <div class=highlight><pre><span></span><code>&gt;D
&gt;B
=&gt;sensor53 r
&gt;M 1
+1,3,s,16,9600,DWS7412
1,77070100010800ff@1000,Energy,kWh,energy,4
1,77070100240700ff@1,Power,W,power,2
1,7707010060320101@#,Service ID,,meter_id,0
#
</code></pre></div> </details> <p>For <code>Inf off</code>, a simplified dataset is returned only.</p> <details class=summary> <summary>Alternative script for the simplified dataset</summary> <div class=highlight><pre><span></span><code>&gt;D
&gt;B
=&gt;sensor53 r
&gt;M 1
+1,3,s,16,9600,DWS7412
1,77070100010800ff@1000,Energy,kWh,energy,4
1,7707010060320101@#,Service ID,,meter_id,0
#
</code></pre></div> </details> <h3 id=dzg-dws76-sml>DZG DWS76 (SML)<a class=headerlink href=#dzg-dws76-sml title="Permanent link">~</a></h3> <p>Should also be applicable to many other DZG Metering GmbH meters, like DVS76, DVS74, DWS74 or in general DxS7x - not tested though. Succesfully tested with DWS7612.1T</p> <p>Once unlocked with a PIN and set to <code>Inf on</code>, the meter returns not only an integer of the total consumption, but an extended dataset which also includes decimals as well as the current power. Further values unknown yet.</p> <details class=summary> <summary>View script for the extended dataset</summary> <div class=highlight><pre><span></span><code>&gt;D
&gt;B
=&gt;sensor53 r
&gt;M 1
+1,3,s,16,9600,DWS7612
1,77070100010800ff@1000,Energie,kWh,energy,4
1,77070100100700ff@1,Leistung,W,power,2
1,7707010060320101@#,Service ID,,meter_id,0
1,77010b0a01445a47@#,Unbekannt,,unknown,0
1,77070100600100ff@#,Zählernummer,,meter_number,0
#  
</code></pre></div> </details> <p>For <code>Inf off</code>, a simplified dataset is returned only.</p> <details class=summary> <summary>Alternative script for the simplified dataset</summary> <div class=highlight><pre><span></span><code>&gt;D
&gt;B
=&gt;sensor53 r
&gt;M 1
+1,3,s,16,9600,DWS7612
1,77070100010800ff@1000,Energie,kWh,energy,0
1,7707010060320101@#,Service ID,,meter_id,0
1,77010b0a01445a47@#,Unbekannt,,unknown,0
1,77070100600100ff@#,Zählernummer,,meter_number,0
#
</code></pre></div> </details> <h3 id=dzg-dwsb122-sml>DZG DWSB12.2 (SML)<a class=headerlink href=#dzg-dwsb122-sml title="Permanent link">~</a></h3> <p>This is a 2-way-meter, so it features both an import- (incoming) and an export-register (e.g. for photovoltaic installations). In default configuration, the meter only outputs a simplified dataset, excluding the momentary effective power and decimals for both imported and exported energy. In order to enable the full dataset, one has to ask their energy provider for the Pin and change the "Inf off" setting to "Inf on" (see meter manual).</p> <details class=summary> <summary>Script for the simplified dataset</summary> <div class=highlight><pre><span></span><code>&gt;D
&gt;B
=&gt;sensor53 r
&gt;M 1
+1,3,s,16,9600,DWSB122
1,77070100010800ff@1000,Energy Imported,kWh,energy_imported,0
1,77070100020800ff@1000,Energy Exported,kWh,energy_exported,0
1,7707010060320101@#,Server ID,,meter_id,0
1,77010b0a01445a47@#,Unknown,,unknown,0
1,77070100600100ff@#,Meter Number,,meter_number,0
#
</code></pre></div> </details> <details class=summary> <summary>Script for the full dataset</summary> <div class=highlight><pre><span></span><code>&gt;D
&gt;B
=&gt;sensor53 r
&gt;M 1
+1,3,s,16,9600,DWSB122
1,77070100100700ff@1,Effective Power,W,effective_power,2
1,77070100010800ff@1000,Energy Imported,kWh,energy_imported,2
1,77070100020800ff@1000,Energy Exported,kWh,energy_exported,2
1,7707010060320101@#,Server ID,,meter_id,0
1,77010b0a01445a47@#,Unknown,,unknown,0
1,77070100600100ff@#,Meter Number,,meter_number,0
#
</code></pre></div> </details> <h3 id=easymeter-q3a-apator-apox-sml>EasyMeter Q3A / Apator APOX+ (SML)<a class=headerlink href=#easymeter-q3a-apator-apox-sml title="Permanent link">~</a></h3> <p>A 2-Tariff Meter which for Example SWM (Stadtwerke München) oder DGY (Discovergy) uses. Unfortunately this Version sends only whole kWh (precision 0) without PIN. With PIN behaviour changes and high resolution is available as seen below (e.g. precision 7 for consumption/kWh, precision 2 for power/W, precision 1 for voltage/V).</p> <p>Apator APOX+ behaves same as the EasyMeter while pin locked, just precision 0 without additional data. After calling the energy provider they send a letter with the unlock pin. </p> <details class=summary> <summary>View script</summary> <div class=highlight><pre><span></span><code>&gt;D
&gt;B
=&gt;sensor53 r
&gt;M 1
+1,3,s,0,9600,SML
1,77070100010801ff@1000,Verbrauch_Tarif_1,kWh,Verbrauch_T1,7
1,77070100010802ff@1000,Verbrauch_Tarif_2,kWh,Verbrauch_T2,7
1,77070100010800ff@1000,Verbrauch_Summe,kWh,Verbrauch_Summe,7
1,77070100020800ff@1000,Einspeisung_Summe,kWh,Einspeisung_Summe,7
1,=h-- 
1,77070100240700ff@1,Leistung_L1,W,Watt_L1,2
1,77070100380700ff@1,Leistung_L2,W,Watt_L2,2
1,770701004c0700ff@1,Leistung_L3,W,Watt_L3,2
1,77070100100700ff@1,Leistung_Summe,W,Watt_Summe,2
1,=h-- 
1,77070100200700ff@1,Spannung_L1,V,Volt_L1,1
1,77070100340700ff@1,Spannung_L2,V,Volt_L2,1
1,77070100480700ff@1,Spannung_L3,V,Volt_L3,1
#
</code></pre></div> </details> <h3 id=easymeter-q3b-sml>EasyMeter Q3B (SML)<a class=headerlink href=#easymeter-q3b-sml title="Permanent link">~</a></h3> <p>Two separate 2-Tariff meters (e.g. from Fairenergie Reutlingen) are readout by the same Tasmota device. The first one is for general purpose and is connected to <code>GPIO14</code>. The JSON prefix is set to <code>Power</code>. The second one is for the heat pump and connected to <code>GPIO13</code>. The JSON prefix is set to <code>Pump</code>. For both meters, tariff 1 &amp; 2 are rounded kWh (precision 0), actual consumption in W has a higher precision (1).</p> <details class=summary> <summary>View script</summary> <div class=highlight><pre><span></span><code>&gt;D
&gt;B
=&gt;sensor53 r
&gt;M 2
+1,14,s,0,9600,Power
1,77070100010801ff@1000,Tarif 1,kWh,Power_T1,0
1,77070100010802ff@1000,Tarif 2,kWh,Power_T2,0
1,77070100010800ff@1000,Summe,kWh,Power_Sum,0
1,77070100010700ff@1000,Verbrauch,W,Power_Use_Sum,1
+2,13,s,0,9600,Pump
2,77070100010801ff@1000,Tarif 1,kWh,HP_T1,0
2,77070100010802ff@1000,Tarif 2,kWh,HP_T2,0
2,77070100010800ff@1000,Summe,kWh,HP_Sum,0
2,77070100010700ff@1000,Verbrauch,W,HP_Use_Sum,1 
#
</code></pre></div> </details> <h3 id=easymeter-q3d-q3da1024-obis>EasyMeter Q3D, Q3DA1024 (OBIS)<a class=headerlink href=#easymeter-q3d-q3da1024-obis title="Permanent link">~</a></h3> <p>The Q3D is a three-phase model energy meter, which was sold in a number of different configurations. This is a legacy device, however still available new in some shops. The most popular model seems to be the two-direction model for solar power metering. The D0 port is read-only with a fixed time interval of two seconds. The communication settings are unusual: 7 data bits, even parity, one stop bit, 9600 baud (9600 7E1).</p> <p>Because the 7E1 serial mode is not supported by Tasmota software serial, the hardware serial port must be used, i.e. GPIO 3. This will /not/ work using GPIO 0 or 2.</p> <p>Also, the source code has to be patched from 8N1 to 7E1 mode for the hardware serial in file src/TasmotaSerial.cpp, please see the patch further down below. Since Tasmota 9.5.0 the serial mode can be changed in the console by typing <code>SerialConfig 7E1</code> without having to patch TasmotaSerial.</p> <details class=summary> <summary>Example reading of the two-direction model using GPIO 3 - P_in power reading will be negative in case of inverse power flow:</summary> <div class=highlight><pre><span></span><code>&gt;D
&gt;B
=&gt;sensor53 r
&gt;M 1
+1,12,o,0,9600,SML,1
1,1-0:1.7.255*255(@1,P_in,W,P_in,18
1,1-0:21.7.255*255(@1,L1,W,L1,18
1,1-0:41.7.255*255(@1,L2,W,L2,18
1,1-0:61.7.255*255(@1,L3,W,L3,18
1,1-0:1.8.0*255(@1,E_in,kWh,E_in,19
1,1-0:2.8.0*255(@1,E_out,kWh,E_out,19
1,1-0:0.0.0*255(@1,Netzbetreiber-ID,,NetID,0
1,0-0:96.1.255*255(@#),Seriennummer,,serial,0
#
</code></pre></div> </details> <details class=summary> <summary>Alternative script running on a Wemos D1 mini on hardware serial pin 3 for the Q3DB1024 two direction</summary> <div class=highlight><pre><span></span><code>&gt;D
&gt;B
=&gt;sensor53 r
&gt;M 1
+1,3,o,0,9600,Haupt,1
1,1-0:1.7.0*255(@1,P_in,W,P_in,18
1,1-0:1.8.0*255(@1,E_in,kWh,E_in,19
1,1-0:2.8.0*255(@1,E_out,kWh,E_out,19
1,1-0:21.7.0*255(@1,L1,W,L1,18
1,1-0:41.7.0*255(@1,L2,W,L2,18
1,1-0:61.7.0*255(@1,L3,W,L3,18
1,1-0:0.0.0*255(@1,Netzbetreiber-ID,,NetID,0
1,0-0:96.1.255*255(@#),Seriennummer,,serial,0
#    
</code></pre></div> </details> <details class=info> <summary>Apply following patch to src/TasmotaSerial.cpp</summary> <div class=highlight><pre><span></span><code><span class=o>---</span><span class=w> </span><span class=n>a</span><span class=o>/</span><span class=n>lib</span><span class=o>/</span><span class=k>default</span><span class=o>/</span><span class=n>TasmotaSerial</span><span class=mf>-3.2.0</span><span class=o>/</span><span class=n>src</span><span class=o>/</span><span class=n>TasmotaSerial</span><span class=p>.</span><span class=n>cpp</span>
<span class=o>+++</span><span class=w> </span><span class=n>b</span><span class=o>/</span><span class=n>lib</span><span class=o>/</span><span class=k>default</span><span class=o>/</span><span class=n>TasmotaSerial</span><span class=mf>-3.2.0</span><span class=o>/</span><span class=n>src</span><span class=o>/</span><span class=n>TasmotaSerial</span><span class=p>.</span><span class=n>cpp</span>
<span class=err>@@</span><span class=w> </span><span class=mi>-117</span><span class=p>,</span><span class=mi>7</span><span class=w> </span><span class=o>+</span><span class=mi>117</span><span class=p>,</span><span class=mi>7</span><span class=w> </span><span class=err>@@</span><span class=w> </span><span class=kt>bool</span><span class=w> </span><span class=n>TasmotaSerial</span><span class=o>::</span><span class=n>begin</span><span class=p>(</span><span class=kt>long</span><span class=w> </span><span class=n>speed</span><span class=p>,</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>stop_bits</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=mi>2</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=n>m_stop_bits</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=n>Serial</span><span class=p>.</span><span class=n>begin</span><span class=p>(</span><span class=n>speed</span><span class=p>,</span><span class=w> </span><span class=n>SERIAL_8N2</span><span class=p>);</span>
<span class=w>    </span><span class=p>}</span><span class=w> </span><span class=k>else</span><span class=w> </span><span class=p>{</span>
<span class=o>-</span><span class=w>      </span><span class=n>Serial</span><span class=p>.</span><span class=n>begin</span><span class=p>(</span><span class=n>speed</span><span class=p>,</span><span class=w> </span><span class=n>SERIAL_8N1</span><span class=p>);</span>
<span class=o>+</span><span class=w>      </span><span class=n>Serial</span><span class=p>.</span><span class=n>begin</span><span class=p>(</span><span class=n>speed</span><span class=p>,</span><span class=w> </span><span class=n>SERIAL_7E1</span><span class=p>);</span>
<span class=w>    </span><span class=p>}</span>
<span class=w>    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>m_hardswap</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=n>Serial</span><span class=p>.</span><span class=n>swap</span><span class=p>();</span>
</code></pre></div> </details> <h3 id=ebz-dd3-obissml>eBZ DD3 (OBIS/SML)<a class=headerlink href=#ebz-dd3-obissml title="Permanent link">~</a></h3> <p>The eBZ DD3 by eBZ GmbH is a three-phase model energy meter, which is sold in a number of different configurations. The D0 port is read-only with a fixed time interval of one second. </p> <p>There are two communication interfaces:</p> <ul> <li>The INFO interface on the front, with a metal backplate. Pushes a reduced OBIS ASCI/SML binary datagram every second.</li> <li>The MSB interface on the top, no metal backplate. Pushes a full OBIS ASCI/SML binary datagram every second. </li> </ul> <p>There are two types available using different communication settings: </p> <ul> <li>OD-type: 7 data bits, even parity, one stop bit, 9600 baud (9600 7E1) - OBIS ASCI protocol</li> <li>SM-type: 8 data bits, no parity, one stop bit, 9600 baud (9600 8N1) - SML binary protcol</li> </ul> <p>Tested with an eBZ DD3 2R06 ODZ1 (two-direction model for e. g. solar power metering).</p> <p>Because the 7E1 serial mode is not supported by Tasmota software serial, the hardware serial port must be used, i.e. GPIO 3. This will /not/ work using GPIO 0 or 2.</p> <p>Change the serial mode in the console by typing <code>SerialConfig 7E1</code>.</p> <p>Example reading of the two-direction model using GPIO 3:</p> <ul> <li>"TelePeriod 30" sets telemetry period to 30 seconds (remove if not needed/wanted)</li> <li>Values for ?6.7.0 (power) are transmitted immediately (precision + 16) </li> <li>power readings will be negative in case of inverse power flow</li> </ul> <details class=summary> <summary>View script</summary> <div class=highlight><pre><span></span><code>&gt;D
&gt;B
TelePeriod 30
=&gt;sensor53 r
&gt;M 1
; Device: eBZ DD3 2R06 ODZ1
; protocol is D0 OBIS ASCII
; 9600@7E1 for OP-type devices, 9600@8N1 for SM-type devices
+1,3,o,0,9600,SM,1
; Zählerstand zu +A, tariflos, 
; Zählerstände Auflösung 10 µW*h (6 Vorkomma- und 8 Nachkommastellen)
1,1-0:1.8.0*255(@0.001,Energie Bezung,Wh,1_8_0,8
; Zählerstand zu +A, Tarif 1
1,1-0:1.8.1*255(@0.001,Energie Bezung T1,Wh,1_8_1,8
; Zählerstand zu +A, Tarif 2
1,1-0:1.8.2*255(@0.001,Energie Bezung T2,Wh,1_8_2,8
; Zählerstand zu -A, tariflos
1,1-0:2.8.0*255(@0.001,Energie Export,Wh,2_8_0,8
; Summe der Momentan-Leistungen in allen Phasen, Auflösung 0,01W (5 Vorkomma- und 2 Nachkommastellen)
1,1-0:16.7.0*255(@1,Leistung,W,16_7_0,18
; Momentane Leistung in Phase Lx, Auflösung 0,01W (5 Vorkomma- und 2 Nachkommastellen)
1,1-0:36.7.0*255(@1,Leistung L1,W,36_7_0,18
1,1-0:56.7.0*255(@1,Leistung L2,W,56_7_0,18
1,1-0:76.7.0*255(@1,Leistung L3,W,76_7_0,18
; Spannung in Phase Lx, Auflösung 0,1V (nur über MSB)
1,1-0:32.7.0*255(@1,Spannung L1,V,32_7_0,1
1,1-0:52.7.0*255(@1,Spannung L2,V,52_7_0,1
1,1-0:72.7.0*255(@1,Spannung L3,V,72_7_0,1
; Statuswort, 4 Byte Information über den Betriebszustand, HEX string
; tasmota can decode one string per device only!
;1,1-0:96.5.0*255(@#),Status1,,96_5_0,0
;1,1-0:96.8.0*255(@#),Status2,,96_8_0,0
; Geräte-Identifikation, Nach DIN 43863-5 
1,1-0:96.1.0*255(@#),Identifikation,,96_1_0,0
;1,1-0:0.0.0*255(@#),Identifikation,,0_0_0,0
#
</code></pre></div> </details> <details class=summary> <summary>For the SM-type meter DD3 2R06 DTA SMZ1 the following script worked without having to apply the above patch, because it uses 8N1 for communication</summary> <div class=highlight><pre><span></span><code>&gt;D
&gt;B
;TelePeriod 30
=&gt;sensor53 r
&gt;M 1
; Device: eBZ DD3 2R06 DTA SMZ1
; protocol is D0 SML HEX
; 9600@7E1 for OD-type devices, 9600@8N1 for SM-type devices
+1,13,s,0,9600,SML
; Zählerstand zu +A, tariflos, 
; Auflösung 10 µW*h (6 Vorkomma- und 8 Nachkommastellen)
1,77070100010800FF@100000000,Energie Bezug,kWh,1_8_0,8
; Zählerstand zu +A, Tarif 1
; Auflösung 1 W*h (6 Vorkomma- und 3 Nachkommastellen)
1,77070100010801FF@1000,Energie Bezug NT,kWh,1_8_1,3
; Zählerstand zu +A, Tarif 2
; Auflösung 1 W*h (6 Vorkomma- und 3 Nachkommastellen)
1,77070100010802FF@1000,Energie Bezug HT,kWh,1_8_2,3
; Zählerstand zu -A, tariflos
; Auflösung 10 µW*h (6 Vorkomma- und 8 Nachkommastellen)
1,77070100020800FF@100000000,Energie Export,kWh,2_8_0,8
; Summe der Momentan-Leistungen in allen Phasen, Auflösung 0,01W (5 Vorkomma- und 2 Nachkommastellen)
1,77070100100700FF@1,Leistung,W,16_7_0,18
; Momentane Leistung in Phase Lx, Auflösung 0,01W (5 Vorkomma- und 2 Nachkommastellen)
1,77070100240700FF@1,Leistung L1,W,36_7_0,18
1,77070100380700FF@1,Leistung L2,W,56_7_0,18
1,770701004C0700FF@1,Leistung L3,W,76_7_0,18
; Spannung in Phase Lx, Auflösung 0,1V (nur über MSB)
1,77070100200700FF@1,Spannung L1,V,32_7_0,1
1,77070100340700FF@1,Spannung L2,V,52_7_0,1
1,77070100480700FF@1,Spannung L3,V,72_7_0,1
; Statuswort, 4 Byte Information über den Betriebszustand, HEX string
; tasmota can decode one string per device only!
;1,1-0:96.5.0*255@#),Status1,,96_5_0,0
;1,1-0:96.8.0*255@#),Status2,,96_8_0,0
; Hersteller-Identifikation, Hersteller-Kennung und Typ mit Software Version
;1,77078181C78203FF@#),Herstellerkennung,,Typ,0
; Eigentumsnummer nach Kundenwunsch, sonst nach DIN 43863-5
;1,77070100000000FF@#),Eigentumsnummer,,0_0_0,0
; Geräte-Identifikation, Nach DIN 43863-5 
;1,77070100000009FF@#),Identifikation,,96_1_0,0
#
</code></pre></div> </details> <h3 id=ebz-md3-sml>eBZ MD3 (SML)<a class=headerlink href=#ebz-md3-sml title="Permanent link">~</a></h3> <details class=summary> <summary>View script</summary> <div class=highlight><pre><span></span><code>&gt;D
&gt;B
=&gt;sensor53 r
&gt;M 1
+1,3,s,0,9600,Smartmeter
1,77070100010800ff@100000000,Total consumption,kWh,Total_in,3
1,77070100020800ff@100000000,Total generation,kWh,Total_out,3
1,77070100100700ff@1,Power L1+L2+L3,W,P_L1_L2_L3,18
1,77070100240700ff@1,Power L1,W,P_L1,18
1,77070100380700ff@1,Power L2,W,P_L2,18
1,770701004C0700ff@1,Power L3,W,P_L3,18
#
</code></pre></div> </details> <h3 id=easymeter-q1a-sml>EasyMeter Q1A (SML)<a class=headerlink href=#easymeter-q1a-sml title="Permanent link">~</a></h3> <p>The Q1A series of EasyMeter is available as one- or two-way meter, with and without backstop respectively. It is also available as single or dual tariff meter. The script below works for the Q1Ax1054 variant. This variant is a single-tariff one-way meter with a backstop mechanism. The script only reads two values: the energy counter value and the current power value.</p> <p>The meter has no bidirectional IR-communication port, only an "INFO-DSS" send-only IR-LED. It also has no metal plate to attach a magnet so the IR reader has to be attached in another way.</p> <p>The current power and counter in high resolution are available after PIN entry with a flashlight, see manual.</p> <details class=summary> <summary>View script</summary> <div class=highlight><pre><span></span><code>&gt;D
&gt;B
=&gt;sensor53 r
&gt;M 1
+1,3,s,16,9600,SML
1,77070100010800ff@1000,Zaehlerstand,kWh,Counter,6
1,77070100100700ff@1,Verbrauch,W,Power,1
#
</code></pre></div> </details> <h3 id=easymeter-m60-v1402-sml>EasyMeter M60 V14.02 (SML)<a class=headerlink href=#easymeter-m60-v1402-sml title="Permanent link">~</a></h3> <p>Communication with the EasyM electricity meter occurs serially via two infrared data interfaces (DSS). The baud rate is 9600 Baud (8N1). All telegrams are encoded using the SML transport protocol (V1.04).</p> <p>The electricity meter is a 3-Phase AC meter that can handle two tarifs as well as counters from the grid and what was delivered to the grid. When the PIN is entered more information is available on via the INFO-DSS like Voltage and Power per Phase.</p> <p>There are two communication interfaces:</p> <ul> <li>INFO-DSS: Unidirectional infrared interface. Permanently outputs (every second) billing-relevant measured values and other information. (used for the script)</li> <li>MSB-DSS: Bidirectional infrared interface. Permanently outputs (every second) billing-relevant measured values and other information. Additionally, the MSB interface is used for setting meter parameters and controlling tariffs. (Not tested/ used for the script)</li> </ul> <p>For the counter value precision 1 is used for the rest i only took the numbers without any decimal points</p> <details class=summary> <summary>View script</summary> <p>```</p> <blockquote> <p>D B =&gt;sensor53 r M 1 +1,3,s,16,9600,ESY 1,77070100010800ff@1000,Zaehlerstand,kWh,Bezug_Summe,1 1,77070100020800ff@1000,Einspeisung,kWh,Einspeisung_Summe,1 1,77070100100700ff@1,Verbrauch,W,Leistung_Total,0 1,77070100240700ff@1,L1,W,Leistung_L1,0 1,77070100380700ff@1,L2,W,Leistung_L2,0 1,770701004c0700ff@1,L3,W,Leistung_L3,0 1,77070100200700ff@1,U1,V,Spannung_L1,0 1,77070100340700ff@1,U2,V,Spannung_L2,0 1,77070100480700ff@1,U3,V,Spannung_L3,0</p> </blockquote> <h1 id=_1><a class=headerlink href=#_1 title="Permanent link">~</a></h1> <p>...</p> </details> <h3 id=easymeter-q1d-ascii-obis>EasyMeter Q1D (ASCII OBIS)<a class=headerlink href=#easymeter-q1d-ascii-obis title="Permanent link">~</a></h3> <p>This script is for the EasyMeter Q1DB1004 variant of the Q1D series. This variant is a one-phase one-way electricity counter with a backstop mechanism. </p> <p>Therefore the script reads only two values: the energy counter value and the power value. The power value is positive when you are drawing power from the public grid, and negative when you are feeding power to the public grid. Due to the backstop mechanism, the energy counter value will not decrease when you feed power to the public grid.</p> <p>The meter's manufacturer's datasheet neatly explains the serial message format used, so you can easily adapt the code below to your EasyMeter Q1D, e.g. if you have a two-way counter variant like the EasyMeter Q1DA1026.</p> <details class=summary> <summary>View script</summary> <div class=highlight><pre><span></span><code>&gt;D
&gt;B
=&gt;sensor53 r
&gt;M 1
+1,3,o,0,9600,SML
1,1-0:1.8.0*255(@1,EC_CounterVal,kWh,EC_CounterVal,4
1,1-0:61.7.255*255(@1,EC_PowerVal,W,EC_PowerVal,0
#
</code></pre></div> <p>According to the manufacturer's datasheet, the serial parameters are 9600 baud and 7E1. </p> <p>For Tasmota versions that are built with a TasmotaSerial.cpp of version 3.5.0 (and probably all higher versions, too), no modification of the TasmotaSerial.cpp source code (as suggested in other entries of this documentation) is necessary to set the serial parameters to 7E1: By configuring the <a href=#meter-definition>meter type</a> as OBIS ("o") in line 5 of the above code, you implicitly tell Tasmota to set the serial parameters to 7E1 (probably the same applies to all other meters in this documentation where a modification of TasmotaSerial.cpp has previously been recommended).</p> </details> <h3 id=efr-sgm-dd-4a92t-sml>EFR SGM-DD-4A92T (SML)<a class=headerlink href=#efr-sgm-dd-4a92t-sml title="Permanent link">~</a></h3> <p>Energy provider supplied a PIN code to enable output of additional data.</p> <details class=summary> <summary>View script</summary> <div class=highlight><pre><span></span><code>&gt;D
&gt;B
spinm(4 1)
=&gt;sensor53 r
&gt;M 1
+1,3,s,0,9600,sml
1,77070100010800FF@1000,Bezug,kWh,Bezug,19
1,77070100010801FF@1000,Bezug T1,kWh,t1_Bezug,19
1,77070100010802FF@1000,Bezug T2,kWh,t2_Bezug,19
1,77070100020800FF@1000,Einspeisung,kWh,Einspeisung,19
1,77070100020801FF@1000,Einspeisung T1,kWh,t1_Einspeisung,19
1,77070100020802FF@1000,Einspeisung T2,kWh,t2_Einspeisung,19
1,77070100100700FF@1,aktuelle Wirkleistung,W,Leistung,16
#
</code></pre></div> </details> <h3 id=efr-sgm-c2c4d4-sml>EFR SGM-C2/C4/D4 (SML)<a class=headerlink href=#efr-sgm-c2c4d4-sml title="Permanent link">~</a></h3> <p>By default, the energy meter only sends the total energy values. To be able to read all the other values, you need to enter the PIN and set <code>InF on</code>. The PIN must be requested from the metering provider, which is usually your local grid provider and not your energy provider (but they know whom to ask). After entering the PIN and setting <code>InF on</code>, all the values will be available. The jsonPrefix <code>ENERGY</code> and variable names (between second to last and last <code>,</code>) Total, Power, Voltage and Current are chosen to match the regular MQTT message format, used by tasmota powerplugs. For SGM-C4 or SGM-D4, double-tariff variants or meters measuring supply remove the appropriate leading <code>;</code> to uncomment and enable the values you are interested in.</p> <details class=summary> <summary>View script</summary> <div class=highlight><pre><span></span><code>&gt;D
&gt;B
-&gt;sensor53 r
&gt;M 1
+1,3,s,16,9600,ENERGY
1,77070100010800ff@1000,Comsumption,kWh,Total,4
;for meters measuring feed-in SGM-Cx-xxx2xx
;1,77070100020800ff@1000,Supply,kWh,Supply,4
;next 4 lines for double-tariff meters SGM-Cx-xxxxTx
;1,77070100010801ff@1000,Comsumption_t1,kWh,Total_t1,4
;1,77070100010802ff@1000,Comsumption_t2,kWh,Total_t2,4
;1,77070100020801ff@1000,Supply_t1,kWh,Supply_t1,4
;1,77070100020802ff@1000,Supply_t2,kWh,Supply_t2,4
;all commented lines from here on for 3-phase meter SGM-C4
1,77070100100700ff@1,Actual Power,W,Power,0
1,77070100200700ff@1,Voltage L1,V,Voltage,1
;1,77070100340700ff@1,Voltage L2,V,Voltage_L2,1
;1,77070100480700ff@1,Voltage L3,V,Voltage_L3,1
1,770701001f0700ff@1,Current L1,A,Current,2
;1,77070100330700ff@1,Current L2,A,Current_L2,2
;1,77070100470700ff@1,Current L3,A,Current_L3,2
;1,77070100510701ff@1,Phaseangle L2-L1,deg,phase_angle_L2_L1,0
;1,77070100510702ff@1,Phaseangle L3-L1,deg,phase_angle_L3_L1,0
1,77070100510704ff@1,Phaseangle I/U L1,deg,phase_angle_L1,1 
;1,7707010051070fff@1,Phaseangle I/U L2,deg,phase_angle_L2,1  
;1,7707010051071aff@1,Phaseangle I/U L3,deg,phase_angle_L3,1 
1,770701000e0700ff@1,Frequency,Hz,Freq,1
;all commented lines from here on just for completeness
;1,7707010000020000@1,Firmware Version,,FwVer,0
;1,77070100605a0201@1,Firmware Checksum,,FwCheck,0
;1,7707010061610000@1,Error Register,,ErrorReg,0
;1,7707010060320101@1,Hardware Version,,HwVer,0
;1,7707010060320104@1,Parameter Version,,ParamVer,0
1,77070100600100ff@#,Server-ID,,ID,0
;You can find your server-id printed on your meter. If you want you can also convert it to your Identifikationsnummer with some ASCII, DEC and HEX encoding. 0A-01-45-46-52-ST-UV-WX-YZ = 1EFR + string(S) + string(T) + hexToDec(UVWXYZ)
#
</code></pre></div> <p>Overview of the codes <img alt=image src=https://user-images.githubusercontent.com/5443580/186160623-3db77d01-429f-49db-86ff-d804578aad99.png></p> </details> <h3 id=efr-sgm-d4a920n>EFR SGM-D4A920N<a class=headerlink href=#efr-sgm-d4a920n title="Permanent link">~</a></h3> <p>By default, the energy meter only sends the total energy values. To be able to read all the other values, you need to enter the PIN and set <code>InF on</code>. (can be done with "optical" button) The PIN must be requested from the metering provider, which is usually your local grid provider and not your energy provider (but they know whom to ask). After entering the PIN and setting <code>InF on</code>, all the values will be available. A few values I wasn't able to figure out, but the most relevant are there. If you want to try this parameters you have to comment out the lines (remove leading ;)</p> <details class=summary> <summary>View script</summary> <div class=highlight><pre><span></span><code>&gt;D
&gt;B
spinm(4 1)
=&gt;sensor53 r
&gt;M 1
+1,3,s,0,9600,sml
1,77070100010800FF@1000,Bezug (180),kWh,zaehlerstand_180,3
;1,77070100010801FF@1,Tarif 1 (180),Wh,zaehlerstand_tarif_1_180,3
;1,77070100010802FF@1,Tarif 2 (180),Wh,zaehlerstand_tarif_2_180,3
1,77070100020800FF@1000,Einspeisung (280),kWh,zaehlerstand_280,3
;1,77070100020801FF@1,Tarif 1 (280),Wh,zaehlerstand_tarif_1_280,3
;1,77070100020802FF@1,Tarif 2 (280),Wh,zaehlerstand_tarif_2_280,3
1,770701000E0700FF@1,Netz Frequenz,Hz,netz_frequenz,1
1,77070100100700FF@1,aktuelle Wirkleistung,W,aktuelle_wirkleistung,0
1,770701001F0700FF@1,Strom L1,A,strom_l1,2
1,77070100200700FF@1,Spannung L1,V,spannung_l1,1
1,77070100240700FF@1,Wirkleistung L1,W,wirkleistung_l1,0
1,77070100330700FF@1,Strom L2,A,strom_l2,2
1,77070100340700FF@1,Spannung L2,V,spannung_l2,1
1,77070100380700FF@1,Wirkleistung L2,W,wirkleistung_l2,0
1,77070100470700FF@1,Strom L3,A,strom_l3,2
1,77070100480700FF@1,Spannung L3,V,spannung_l3,1
1,770701004C0700FF@1,Wirkleistung L3,W,wirkleistung_l3,0
1,77070100510701FF@1,Phasenwinkel U L1/L2,°,phasenwinkel_u_l1_l2,0
1,77070100510702FF@1,Phasenwinkel U L1/L3,°,phasenwinkel_u_l1_l3,0
1,77070100510704FF@1,Phasenwinkel I/U L1,°,phasenwinkel_i_u_l1,0
1,7707010051070FFF@1,Phasenwinkel I/U L2,°,phasenwinkel_i_u_l2,0
1,7707010051071AFF@1,Phasenwinkel I/U L3,°,phasenwinkel_i_u_l3,0
;1,77070100600100FF@#,Seriennummer,,seriennummer,0
;1,7707010060320101@#,Hersteller,,hersteller,0
;1,7707010060320104@#,HW Version,,hw_version,0
;1,7707010060320204@#,HW Version PCB2,,hw_version,0
;1,7707010060320404@#,Parameter Version,,parameter_version,0
;1,77070100605A0201@#,FW Checksum,,fw_checksum,0
;1,77070100605A0202@#,Unbekannt 2,,unbekanntes_mqtt_topic_2,0
;1,7707010000020000@#,Firmware Version,,firmwareversion,0
;1,7707010000020001@#,Unbekannt 1,,unbekanntes_mqtt_topic_1,0
#
</code></pre></div> </details> <h3 id=ehzb>eHZB<a class=headerlink href=#ehzb title="Permanent link">~</a></h3> <details class=summary> <summary>View script</summary> <div class=highlight><pre><span></span><code>&gt;D
&gt;B
-&gt;sensor53 r
&gt;M 1
+1,3,s,0,9600,ENERGY
1,77070100600100FF@#,Meter ID,,ID,0
1,77070100010800FF@1000,Meter Reading Total,kWh,meter_reading_total,1
1,77070100020800FF@1000,Negative Active Energy,kWh,neg_active_total,1
1,770701000E0700FF@1,Net Frequency,Hz,net_frequency,1
1,77070100100700FF@1,Actual Power,W,actual_power,0
1,770701001F0700FF@1,Current L1,A,current_l1,2
1,77070100200700FF@1,Voltage L1,V,voltage_l1,1
1,77070100240700FF@1,Effective Power L1,W,eff_power_l1,0
1,77070100330700FF@1,Current L2,A,current_l2,2
1,77070100340700FF@1,Voltage L2,V,voltage_l2,1
1,77070100380700FF@1,Effective Power L2,W,eff_power_l2,0
1,77070100470700FF@1,Current L3,A,current_l3,2
1,77070100480700FF@1,Voltage L3,V,voltage_l3,1
1,770701004C0700FF@1,Effective Power L3,W,eff_power_l3,0
1,77070100510701FF@1,Phase L1/L2,deg,phase_l1_l2,0
1,77070100510702FF@1,Phase L1/L3,deg,phase_l1_l3,0
1,77070100510704FF@1,Phase L1,deg,phase_l1,0
1,7707010051070FFF@1,Phase L2,deg,phase_l2,0
1,7707010051071AFF@1,Phase L3,deg,phase_l3,0
#
</code></pre></div> </details> <h3 id=elster-honeywell-as1440-obis>Elster / Honeywell AS1440 (OBIS)<a class=headerlink href=#elster-honeywell-as1440-obis title="Permanent link">~</a></h3> <p>Based on Landis script with changed timings in the &gt;F section, as AS1440 seems to be slower in responding.</p> <p>This defines metrics for totals and current power usage for both incoming and outgoing power. Just delete the lines you don't need from the last sections.<br> Current power values get published to mqtt immediately when received from the meter.</p> <details class=summary> <summary>View script</summary> <div class=highlight><pre><span></span><code>&gt;D
scnt=0
res=0

&gt;B
=&gt;sensor53 r

&gt;F
; count 100ms
scnt+=1
switch scnt

;300ms after start: set sml driver to 300 baud and send /?! as HEX to trigger the Meter
case 3
res=sml(1 0 300)
res=sml(1 1 &quot;2F3F210D0A&quot;)

;1700ms later: Ack and ask for switching to 9600 baud
case 20
res=sml(1 1 &quot;063035300D0A&quot;)

;300ms later: switch sml driver to 9600 baud
case 23
res=sml(1 0 9600)

;6000ms after start: Restart sequence
case 60
scnt=0

ends

&gt;M 1
+1,3,o,0,9600,AS1440,1
1,1.7.0(@0.001,Power In,W,power_in,16
1,1.8.1(@1,Total In,kWh,Total_in,1
1,2.7.0(@0.001,Power Out,W,power_out,16
1,2.8.1(@1,Total Out,kWh,Total_out,1
#
</code></pre></div> </details> <h3 id=elster-f96-plus-sharky-775-ditech-integral-v-ultralite-pro-m-bus>Elster F96 Plus (Sharky 775) (Ditech Integral-V UltraLite PRO) M-Bus<a class=headerlink href=#elster-f96-plus-sharky-775-ditech-integral-v-ultralite-pro-m-bus title="Permanent link">~</a></h3> <p>This heat meter needs a wakeup sequence with 2400 Baud 8N1, wheras communication is done by 2400 Baud 8E1. The script will therefore only rund starting with Tasmota 12.2 where switching parity is implemented. For compiling, add the following to your <code>user_config_override.h</code> to increase serial communication buffer size and enable MQTT and Web publishing:</p> <details class=summary> <summary>View user_config_override.h</summary> <div class=highlight><pre><span></span><code>#ifndef USE_SCRIPT
#define USE_SCRIPT
#endif
#ifndef USE_SML_M
#define USE_SML_M
#endif
#ifdef USE_RULES
#undef USE_RULES
#endif
#ifndef SML_BSIZ
#define SML_BSIZ 200
#endif
#ifndef USE_SML_SCRIPT_CMD
#define USE_SML_SCRIPT_CMD
#endif
#ifndef USE_SCRIPT_JSON_EXPORT
#define USE_SCRIPT_JSON_EXPORT
#endif
#ifndef USE_SCRIPT_WEB_DISPLAY
#define USE_SCRIPT_WEB_DISPLAY
#endif
</code></pre></div> </details> <p>Delta calculation for previous day is included as the meter shall not be read often when operated with a battery.</p> <details class=summary> <summary>View script</summary> <div class=highlight><pre><span></span><code>&gt;D
;start, define variables
cnt=1
timer=1
w_new=0
w_delta=0
p:w_last=0

&gt;B
;setup sensor
-&gt;sensor53 r

&gt;T
w_new=WAERME#w_total

&gt;S
timer=int(time)
if chg[timer]&gt;0 
then
switch timer
case 0
print It is midnight
print wakeup start
sml(-1 1 &quot;2400:8N1&quot;)
for cnt 1 72 1
sml(1 1 &quot;55555555555555555555&quot;)
next
print wakeup end
print wait for the meter
delay(350)
sml(-1 1 &quot;2400:8E1&quot;)
print request data
sml(1 1 &quot;105BFE5916&quot;)
case 1
print It is a minute after midnight
print calculating daily value
print w_last %0w_last%
w_delta=w_new-w_last
w_last=w_new
svars
print w_new %0w_new%
print w_delta %0w_delta%
ends
endif

&gt;J  
,&quot;w_delta&quot;:%w_delta% 

&gt;W
===============
Vortagsverbrauch:    {m} %3w_delta% kWh 

&gt;M 1
+1,3,rE1,0,2400,WAERME,1
1,0C06bcd8@1,Total Energy,kWh,w_total,0
1,0C13bcd8@1000,Total volume,m³,v_total,2
1,0C2Bbcd8@1,Current power,W,p_act,0
1,0B3Bbcd6@1000,Current flow,m³/h,F_akt,3
1,0A5Abcd4@10,Flow temp,°C,t_flow,1
1,0A5Ebcd4@10,Return temp,°C,t_return,1
1,0A62bcd4@10,Temp diff,°C,t_diff,2
#
</code></pre></div> </details> <h3 id=elster-honeywell-as2020-sml>Elster / Honeywell AS2020 (SML)<a class=headerlink href=#elster-honeywell-as2020-sml title="Permanent link">~</a></h3> <details class=summary> <summary>View script</summary> <div class=highlight><pre><span></span><code>&gt;D
&gt;B
-&gt;sensor53 r
&gt;M 1
+1,3,s,0,9600,,1
1,77070100600100ff@#,Server-ID,,Wert,0
1,77070100010800ff@1000,Total Consumed,kWh,total_consumed_kwh,1
1,77070100020800ff@1000,Total Delivered,kWh,total_delivered_kwh,1
1,77070100100700ff@0.1,Current Consumption,W,current_consumption,0
#
</code></pre></div> </details> <h3 id=elster-t510-obis>Elster T510 (OBIS)<a class=headerlink href=#elster-t510-obis title="Permanent link">~</a></h3> <p>It seems you can not read the total power like <code>1,1.7.0(@0.001,Leistung,W,Power_curr,0</code>, as the value just alternates between the values of the three phases. So in this script the three phases get added and published as <code>Power_total</code>.</p> <details class=summary> <summary>View script</summary> <div class=highlight><pre><span></span><code>&gt;D
;Var for baudrate changing
res=0
;Var for counter see &gt;F=ms  
scnt=0  

&gt;B
-&gt;sensor53 r
;Set teleperiod to 20sec  
;tper=10

&gt;F
; count 100ms   
scnt+=1  
switch scnt  
case 6  
;set sml driver to 300 baud and send /?! as HEX to trigger the Meter   
res=sml(1 0 300)  
res=sml(1 1 &quot;2F3F210D0A&quot;)  

;1800ms later \&gt; Ack and ask for switching to 9600 baud  
case 18  
res=sml(1 1 &quot;063035300D0A&quot;)  

;2000ms later \&gt; Switching sml driver to 9600 baud    
case 20  
res=sml(1 0 9600)  

;Restart sequence after 50x100ms    
case 50  
; 5000ms later \&gt; restart sequence    
scnt=0  
ends  

&gt;M 1

+1,3,o,0,9600,,1
1,0.0.0(@1,Zählernummer,,Meter_number,0
1,0.9.1(@#),Zeitstempel,Uhr,timestamp,0
1,1.8.0(@1,Zählerstand,kWh,Total_in,3
1,21.7.0(@0.001,Leistung Phase 1,W,Power_L1,0
1,41.7.0(@0.001,Leistung Phase 2,W,Power_L2,0
1,61.7.0(@0.001,Leistung Phase 3,W,Power_L3,0
1,=m 4+5+6 @1,Leistung,W,Power_total,0
1,31.7.0(@1,Strom Phase 1,A,Current_L1,2
1,51.7.0(@1,Strom Phase 2,A,Current_L2,2
1,71.7.0(@1,Strom Phase 3,A,Current_L3,2
#
</code></pre></div> </details> <h3 id=emh-ebzd-sml>EMH eBZD (SML)<a class=headerlink href=#emh-ebzd-sml title="Permanent link">~</a></h3> <details class=summary> <summary>View script</summary> <div class=highlight><pre><span></span><code>&gt;D
&gt;B
-&gt;sensor53 r
&gt;M 1
+1,3,s,0,9600,Main
1,77070100100700ff@1,Power,W,power,0
1,77070100010800ff@1000,Total Consumed,kWh,counter_pos,3
1,77070100020800ff@1000,Total Feed,kWh,counter_neg,3
#
</code></pre></div> </details> <h3 id=emh-ed300l-sml>EMH ED300L (SML)<a class=headerlink href=#emh-ed300l-sml title="Permanent link">~</a></h3> <details class=summary> <summary>View script</summary> <div class=highlight><pre><span></span><code>&gt;D    
&gt;B   
-&gt;sensor53 r  
&gt;M 2  
+1,13,s,0,9600,Haus  
+2,12,s,0,9600,Heizung  
1,770701000F0700FF@1,Aktuell,W,Power_curr,0  
1,77070100010800FF@1000,Zählerstand Verb.,kWh,Tariflos,2  
1,77070100020800FF@1000,Zählerstand Einsp.,kWh,Tariflos,2  
2,=h==================  
2,770701000F0700FF@1,Aktuell,W,Power_curr,0  
2,77070100010800FF@1000,Zählerstand Verb.,kWh,Tariflos,2  
2,77070100020800FF@1000,Zählerstand Einsp.,kWh,Tariflos,2  
#    
</code></pre></div> </details> <h3 id=emh-ed300s-sml>EMH ED300S (SML)<a class=headerlink href=#emh-ed300s-sml title="Permanent link">~</a></h3> <details class=summary> <summary>View script</summary> <div class=highlight><pre><span></span><code>&gt;D
&gt;B
-&gt;sensor53 r
&gt;M 1
+1,3,s,0,9600,Main
1,77070100100700ff@1,Power,W,power,0
1,77070100010800FF@1000,Counter,kWh,counter,3
#
</code></pre></div> </details> <h3 id=emh-ehz-generation-k-sml>EMH eHZ Generation K (SML)<a class=headerlink href=#emh-ehz-generation-k-sml title="Permanent link">~</a></h3> <details class=summary> <summary>View script</summary> <div class=highlight><pre><span></span><code>&gt;D
&gt;B

=&gt;sensor53 r
&gt;M 1
+1,3,s,0,9600,
1,77070100010800ff@1000,Total consumption,kWh,total_in,2
1,77070100020800ff@1000,Total feed-in,kWh,total_out,2
1,77070100100700ff@1,Power,W,power_curr,0
#
</code></pre></div> </details> <h3 id=emh-ehzm-sml>EMH eHZM (SML)<a class=headerlink href=#emh-ehzm-sml title="Permanent link">~</a></h3> <p><a href=https://emh-metering.com/produkte/haushaltszaehler-smart-meter/ehzm/ >Website</a></p> <p><a href=https://emh-metering.com/wp-content/uploads/2021/02/eHZM-DAB-D-1-00.pdf>Datasheet</a> </p> <p><a href=https://emh-metering.com/wp-content/uploads/2022/11/eHZM-BIA-D-1.11.pdf>Manual (+OBIS Registers)</a></p> <details class=summary> <summary>View script</summary> <div class=highlight><pre><span></span><code>&gt;D
&gt;B
-&gt;sensor53 r
&gt;M 1
+1,3,s,0,9600,
1,77070100600100FF@#,Zaehlernummer,,serialnr,16
1,77070100010800FF@1000,Pos Wirkenergie tariflos,kWh,pos_wirk_tariflos,1
1,77070100010801FF@1000,Pos Wirkenergie Tarif 1,kWh,pos_wirk_tarif_1,1
1,77070100010802FF@1000,Pos Wirkenergie Tarif 2,kWh,pos_wirk_tarif_2,1
1,77070100020800FF@1000,Neg Wirkenergie tariflos,kWh,neg_wirk_tariflos,1
1,77070100020801FF@1000,Neg Wirkenergie Tarif 1,kWh,neg_wirk_tarif_1,1
1,77070100020802FF@1000,Neg Wirkenergie Tarif 2,kWh,neg_wirk_tarif_2,1
1,77070100100700FF@1,Momentanwirkleistung,W,momentanwirkleistung,0
#
</code></pre></div> </details> <h3 id=emh-mme40-sml>EMH mMe4.0 (SML)<a class=headerlink href=#emh-mme40-sml title="Permanent link">~</a></h3> <details class=summary> <summary>View script</summary> <div class=highlight><pre><span></span><code>&gt;D
&gt;B
-&gt;sensor53 r
&gt;M 1
+1,3,s,0,9600,Main,1,10
1,77070100010800FF@1000,Total Consumed,kWh,counter_pos,3
1,77070100020800FF@1000,Total Feed,kWh,counter_neg,3
1,77070100100700FF@1,Power,W,power,0
#
</code></pre></div> </details> <h3 id=emh-diz-w1el-00-km0-0m-200010-e50k-m-bus>EMH DIZ-W1EL-00-KM0-0M-200010-E50/K (M-Bus)<a class=headerlink href=#emh-diz-w1el-00-km0-0m-200010-e50k-m-bus title="Permanent link">~</a></h3> <details class=summary> <summary>View script</summary> <div class=highlight><pre><span></span><code>&gt;D
&gt;B
=&gt;sensor53 r
&gt;M 1
; ***************************************
; * EMH DIZ-W1EL-00-KM0-0M-200010-E50/K *
; ***************************************
; Serial: 2400 baud
; Device parity: EVEN
; Slave address: 001
; ***************************************
+1,3,rE1,0,2400,MBUS,1,10,1040014116,105b015c16
1,68282868080272bcd8@1@1,Zähler-Nr.,,0_0_0,0
1,68282868080272xxxxxxxxa8150002xxxx00008c1006bcd8@1,total energy,kWh,1_8_0,0
1,68282868080272xxxxxxxxa8150002xxxx00008c1006xxxxxxxx8c2006xxxxxxxxc4002auuUUuuUUs@10000,instantaneous power,kW,1_7_0,3
#
</code></pre></div> </details> <h3 id=emh-eiz-gdwl739b-m-bus>EMH EIZ-GDWL739B (M-Bus)<a class=headerlink href=#emh-eiz-gdwl739b-m-bus title="Permanent link">~</a></h3> <details class=summary> <summary>View script</summary> <div class=highlight><pre><span></span><code>&gt;D
&gt;B
=&gt;sensor53 r
&gt;M 1
; ***************************************
; *   EMH EIZ-GDWL739B                  *
; ***************************************
; Serial: 2400 baud
; Device parity: EVEN
; Slave address: 001
; ***************************************
+1,3,rE1,0,2400,MBUS,1,10,1040014116,105b015c16
1,68363668080172bcd8@1@1,Zähler-Nr.,,0_0_0,0
1,68363668080172xxxxxxxxa8150002xxxx0000046dxxxxxxxx0422xxxxxxxx0405uuUUuuUUs@10,total energy,kWh,1_8_0,1
1,68363668080172xxxxxxxxa8150002xxxx0000046dxxxxxxxx0422xxxxxxxx0405xxxxxxxx042auuUUuuUUs@10000,instantaneous power,kW,1_7_0,3
#
</code></pre></div> </details> <h3 id=emh-lzqj-xc-obis>EMH LZQJ-XC (OBIS)<a class=headerlink href=#emh-lzqj-xc-obis title="Permanent link">~</a></h3> <p>Script to read a EMH metering LZQJ-XC smart meter.</p> <p>This script is for a smart meter that is set to "Protocol mode A" IEC 62056-21:2002(E) 6.4.1 by the supplier. Therefore it is set to a fixed baud rate of 300 and can not be switched to a higher baudrate.</p> <details class=summary> <summary>View script</summary> <div class=highlight><pre><span></span><code>&gt;D
res=0
scnt=0

&gt;B
=&gt;sensor53 r

&gt;F
;F section is executed every 100ms
scnt+=1
switch scnt
;300ms after start: set sml driver to 300 baud and send /?! as HEX to trigger the Meter.
case 3
;Statt in &gt;M Sektion hier den Zähler alle 300s triggern. 
;Denn das Kommando &quot;+1,5,o,0,300,METER,4,3000,2F3F210D0A&quot; in &gt;M Sektion funktioniert nicht richtig - &lt;txPeriod&gt; = 3000 wird nicht angewendet. 
;Der Zähler wird sofort nach dem Auslesen (nach 261s) erneut getriggert, was zu einem Versatz in den Messwerten führt.
res=sml(1 0 300)
res=sml(1 1 &quot;2F3F210D0A&quot;)
;300000ms after start: Restart sequence
case 3000
scnt=0
ends

&gt;M 1
; Device: EMH metering LZQJ-XC
; protocol is OBIS ASCII
; Gerät mit hex &quot;2F3F210D0A&quot; = ASCII &quot;/?!&quot; aufwecken.
; Zaehler EMH LZQJ-XC arbeitet im &quot;Protocol mode A&quot; IEC 62056-21:2002(E) 6.4.1
; mit einer festen Baudrate von 300 Baud und kann nicht umgeschaltet werden
; Zaehler EMH LZQJ-XC auslesen dauert 4:21 Minuten. Kuerzere TelePeriod als 300sek/5min daher nicht sinnvoll.

+1,5,o,0,300,METER,4
1,0.0.0(@1,Zähler-Nr.,,0_0_0,0
1,0.0.9(@#),Zähler-ID,,0_0_9,0
1,0.9.1(@1),Uhrzeit,,0_9_1,0
1,0.9.2(@1),Datum,,0_9_1,0

1,1.6.1(@1,MaxBezugT1,kW,1_6_1,3
1,1.6.2(@1,MaxBezugT2,kW,1_6_2,3

1,1.8.0(@1,WirkEnBezug,kWh,1_8_0,3
1,1.8.1(@1,WirkEnBezugNT,kWh,1_8_1,3
1,1.8.2(@1,WirkEnBezugHT,kWh,1_8_2,3

1,2.6.1(@1,MaxEinspT1,kW,2_6_1,3
1,2.6.2(@1,MaxEinspT2,kW,2_6_2,3

1,2.8.0(@1,WirkEnEinsp,kWh,2_8_0,3
1,2.8.1(@1,WirkEnEinspNT,kWh,2_8_1,3
1,2.8.2(@1,WirkEnEinspHT,kWh,2_8_2,3

1,3.8.0(@1,BlindEnBezug,kvarh,3_8_0,3
1,3.8.1(@1,BlindEnBezugT1,kvarh,3_8_1,3
1,3.8.2(@1,BlindEnBezugT2,kvarh,3_8_2,3

1,4.8.0(@1,BlindEnEinsp,kvarh,4_8_0,3
1,4.8.1(@1,BlindEnEinspT1,kvarh,4_8_1,3
1,4.8.2(@1,BlindEnEinspT2,kvarh,4_8_2,3
#
</code></pre></div> </details> <h3 id=finder-7m38-series-bi-directional-multi-functional-energy-meter>Finder 7M.38 Series bi-directional multi-functional energy meter<a class=headerlink href=#finder-7m38-series-bi-directional-multi-functional-energy-meter title="Permanent link">~</a></h3> <p>A Finder 7M.38 series energy meter can be read out using Modbus. To use it, a RS485 converter is needed to interface to an ESPs serial IOs.</p> <p>Official Product <a href=https://www.findernet.com/en/usa/series/7m-series-smart-energy-meters/type/type-7m-38-three-phase-multi-function-bi-directional-energy-meters-with-backlit-matrix-lcd-display/ >Finder 7M.38 Series</a></p> <p>The amount of values collected by this energy meter is huge, any value offered can be added by adding the adresses in the script. For further values and their corresponding adresses consult the official manual.</p> <h4 id=modbus-serial-configuration>Modbus Serial Configuration<a class=headerlink href=#modbus-serial-configuration title="Permanent link">~</a></h4> <p>Make sure you set the correct parameters on your meter. Either via NFC (Finder Toolbox App) or directly with the touch button on the device.</p> <p>The following sample scripts will use this parameters - Baudrate 115200 - Stopbits 1 - Parity even</p> <p>In short: 115200 baud, 8E1</p> <h4 id=hardware-connection>Hardware connection<a class=headerlink href=#hardware-connection title="Permanent link">~</a></h4> <p>Connect the hardware with an ESP8266 as follows, make sure GPIO1 and GPIO3 are not assigned so the script can use them.</p> <p><img alt src=../_media/Smart-Meter-Interface/Finder7M38_HardwareESP8266.png></p> <p>Connect the hardware with an ESP32-C3 as follows, make sure GPIO20 and GPI21 are not assigned so the script can use them.</p> <p><img alt src=../_media/Smart-Meter-Interface/Finder7M38_HardwareESP32.png></p> <h4 id=script-explanation>Script explanation<a class=headerlink href=#script-explanation title="Permanent link">~</a></h4> <p>The following line should ouput apparent power of phase 2. This value is given as in the registers 2548 and 2549. Encoding is T_float meaning a IEEE 754 Floating-Point Single Precision Value (32 bit). The leading 45 is 0x45 (0d69) the address of the Modbus device. 04 refers to the Modbus function code. ffffffff converts the values into a float. i14 is the 15th value (count from 0) requested in the main meter line (see 450409F2) where 0x09F2 (0d2548) is the starting address of the desired register.</p> <div class=highlight><pre><span></span><code>```
1,450404ffffffff@i14:1,Apparent_Power_S_L2,var,sl2,3
```
</code></pre></div> <p>Breakdown</p> <ul> <li>1 refers to meter 1</li> <li>450404 refers to Modbus device address 0x45 (0d69) and Modbus function code 04</li> <li>ffffffff converts the register contents to float</li> <li>i14 refers to the index 14 of all requested registers (see first meter line 15th entry (count from 0) -&gt; 450409F2)</li> <li>1 is scaling with 1, here with no effect</li> <li>Apparent_Power_S_L2 is the label in the web ui</li> <li>var is the unit in the web ui</li> <li>sl2 is the label for the measurement</li> </ul> <h4 id=sample-script-three-phase-system>Sample script three phase system<a class=headerlink href=#sample-script-three-phase-system title="Permanent link">~</a></h4> <p>Full script using a three phase system with L1, L2, L3</p> <details class=summary> <summary>View script</summary> <div class=highlight><pre><span></span><code>&gt;D
&gt;B
-&gt;sensor53 r
&gt;M 1
+1,3,M,0,115200,Finder,1,10,450300CA,45040A62,450409C2,450409C4,450409C6,450409C8,450409D4,450409D6,450409D8,450409EA,450409EC,450409EE,450409F0,450409F2,450409F4,450409F6,450409F8,450409E2,450409E4,450409E6,450409BA,450409FA,450409FC,450409FE,45040A00,45040AC0,45040AC2
1,450304UUuu@i0:1,Modbus_Address,,MBaddress,0
1,450404ffffffff@i1:1,Temperature,°C,temperature,2
1,450404ffffffff@i2:1,Frequency,Hz,freq,3
1,450404ffffffff@i3:1,Voltage_L1,V,U1,2
1,450404ffffffff@i4:1,Voltage_L2,V,U2,2
1,450404ffffffff@i5:1,Voltage_L3,V,U3,2
1,450404ffffffff@i6:1,Current_L1,A,i1,3
1,450404ffffffff@i7:1,Current_L2,A,i2,3
1,450404ffffffff@i8:1,Current_L3,A,i3,3
1,450404ffffffff@i9:1,Reactive_Power_Q_L1,VAR,ql1,3
1,450404ffffffff@i10:1,Reactive_Power_Q_L2,VAR,ql2,3
1,450404ffffffff@i11:1,Reactive_Power_Q_L3,VAR,ql3,3
1,450404ffffffff@i12:1,Reactive_Power_Total,VAR,qt,3
1,450404ffffffff@i13:1,Apparent_Power_S_L1,VA,sl1,3
1,450404ffffffff@i14:1,Apparent_Power_S_L2,VA,sl2,3
1,450404ffffffff@i15:1,Apparent_Power_S_L3,VA,sl3,3
1,450404ffffffff@i16:1,Apparent_Power_Total,VA,st,3
1,450404ffffffff@i17:1,Active_Power_L1,W,pl1,3
1,450404ffffffff@i18:1,Active_Power_L2,W,pl2,3
1,450404ffffffff@i19:1,Active_Power_L3,W,pl3,3
1,450404ffffffff@i20:1,Active_Power_Total,W,pt,3
1,450404ffffffff@i21:1,Power_Factor_L1,,pfl1,3
1,450404ffffffff@i22:1,Power_Factor_L2,,pfl2,3
1,450404ffffffff@i23:1,Power_Factor_L3,,pfl3,3
1,450404ffffffff@i24:1,Power_Factor_Total,,pft,3
1,450404ffffffff@i25:1000,Energy_Total_In_1_8_0,kWh,eti180,2
1,450404ffffffff@i26:1000,Energy_Total_Out_2_8_0,kWh,eto280,2
#
</code></pre></div> </details> <h4 id=sample-script-single-phase-system>Sample script single phase system<a class=headerlink href=#sample-script-single-phase-system title="Permanent link">~</a></h4> <p>Using a three phase energy meter in a single phase system requires using phase 3 only. See Finder 7M.38 Series manual, page 12 image 6.</p> <p>Full script using a single phase system with L3 as single phase</p> <details class=summary> <summary>View script</summary> <div class=highlight><pre><span></span><code>&gt;D
&gt;B
-&gt;sensor53 r
&gt;M 1
+1,3,M,0,115200,Finder,1,10,450300CA,45040A62,450409C2,450409C8,450409D8,450409F0,450409F8,450409BA,45040A00,45040AC0,45040AC2
1,450304UUuu@i0:1,Modbus_Address,,MBaddress,0
1,450404ffffffff@i1:1,Temperature,°C,temperature,2
1,450404ffffffff@i2:1,Frequency,Hz,freq,3
1,450404ffffffff@i3:1,Voltage_L3,V,U3,2
1,450404ffffffff@i4:1,Current_L3,A,i3,3
1,450404ffffffff@i5:1,Reactive_Power_Total,VAR,qt,3
1,450404ffffffff@i6:1,Apparent_Power_Total,VA,st,3
1,450404ffffffff@i7:1,Active_Power_Total,W,pt,3
1,450404ffffffff@i8:1,Power_Factor_Total,,pft,3
1,450404ffffffff@i9:1000,Energy_Total_In_1_8_0,kWh,eti180,2
1,450404ffffffff@i10:1000,Energy_Total_Out_2_8_0,kWh,eto280,2
#
</code></pre></div> </details> <h3 id=fronius-symo-100-3-m-modbus-tcp>Fronius Symo 10.0-3-M (MODBus TCP)<a class=headerlink href=#fronius-symo-100-3-m-modbus-tcp title="Permanent link">~</a></h3> <p>Fronius inverter, using Modbus TCP feature.</p> <p>For this script the inverter must be configured to use Sunspec Model Type "int+SF"</p> <details class=summary> <summary>View script</summary> <div class=highlight><pre><span></span><code>&gt;D 48
&gt;B
=&gt;sensor53 r
&gt;M 2
+1,[192.168.3.38],m,0,502,mod1,1,10,r01039C870015
1,=so3,128
1,01032aUUuu@i0:1,AC Current,A,AC_Current,0
1,01032ax2UUuu@i0:1,Phase 1 Current,A,Phase_1_Current,0
1,01032ax4UUuu@i0:1,Phase 2 Current,A,Phase_2_Current,0
1,01032ax6UUuu@i0:1,Phase 3 Current,A,Phase_3_Current,0
1,01032ax8SSss@i0:1,Curr Scale Fctr,SF,Curr_SF,0
1,01032ax16UUuu@i0:1,Phase 1 Voltage,A,Phase_1_Voltage,0
1,01032ax18UUuu@i0:1,Phase 2 Voltage,A,Phase_2_Voltage,0
1,01032ax20UUuu@i0:1,Phase 3 Voltage,A,Phase_3_Voltage,0
1,01032ax22SSss@i0:1,Vltg Scale Fctr,SF,Vltg_SF,0
1,01032ax24UUuu@i0:1,Output Power,W,Output_Power,0
1,01032ax26SSss@i0:1,Pwr Scale Fctr,SF,Pwr_SF,0
1,01032ax28UUuu@i0:1,Frequency,Hz,Frequency,0
1,01032ax30SSss@i0:1,Freq Scale Fctr,SF,Freq_SF,0
1,01032ax36UUuu@i0:1,Temperature,C,Temperature,0
1,01032ax38SSss@i0:1,Temp Scale Fctr,SF,Temp_SF,0
+2,[192.168.3.23],m,0,502,mod2,1,10,r01039C870015
2,=so3,128
2,01032aUUuu@i0:1,AC Current,A,AC_Current,0
2,01032ax2UUuu@i0:1,Phase 1 Current,A,Phase_1_Current,0
2,01032ax4UUuu@i0:1,Phase 2 Current,A,Phase_2_Current,0
2,01032ax6UUuu@i0:1,Phase 3 Current,A,Phase_3_Current,0
2,01032ax8SSss@i0:1,Curr Scale Fctr,SF,Curr_SF,0
2,01032ax16UUuu@i0:1,Phase 1 Voltage,A,Phase_1_Voltage,0
2,01032ax18UUuu@i0:1,Phase 2 Voltage,A,Phase_2_Voltage,0
2,01032ax20UUuu@i0:1,Phase 3 Voltage,A,Phase_3_Voltage,0
2,01032ax22SSss@i0:1,Vltg Scale Fctr,SF,Vltg_SF,0
2,01032ax24UUuu@i0:1,Output Power,W,Output_Power,0
2,01032ax26SSss@i0:1,Pwr Scale Fctr,SF,Pwr_SF,0
2,01032ax28UUuu@i0:1,Frequency,Hz,Frequency,0
2,01032ax30SSss@i0:1,Freq Scale Fctr,SF,Freq_SF,0
2,01032ax36UUuu@i0:1,Temperature,C,Temperature,0
2,01032ax38SSss@i0:1,Temp Scale Fctr,SF,Temp_SF,0
#
</code></pre></div> </details> <p>Use this script when the inverter is configured to use Sunspec Model Type "float":</p> <details class=summary> <summary>View script</summary> <div class=highlight><pre><span></span><code>&gt;D
&gt;B
-&gt;sensor53 r

&gt;M 1
+1,[192.168.2.251],m,0,502,FRONIUS,0,100,r01039C870020
1,=so3,80
1,010340ffffffff@i0:1,AC Current,A,11_7_0,3
1,010340x4ffffffff@i0:1,L1 Current,A,31_7_0,3
1,010340x8ffffffff@i0:1,L2 Current,A,51_7_0,3
1,010340x12ffffffff@i0:1,L3 Current,A,71_7_0,3
1,010340x28ffffffff@i0:1,L1 Voltage,V,32_7_0,2
1,010340x32ffffffff@i0:1,L2 Voltage,V,52_7_0,2
1,010340x36ffffffff@i0:1,L3 Voltage,V,72_7_0,2
1,010340x40ffffffff@i0:1000,Output Power,kW,2_7_0,3
1,010340x44ffffffff@i0:1,Frequency,Hz,14_7_0,3
1,010340x48ffffffff@i0:1000,Apparent Power,kVA,9_7_0,3
1,010340x52ffffffff@i0:1000,Reactive Power,kVAr,4_7_0,3
1,010340x56ffffffff@i0:1,Power Factor,,13_7_0,3
1,010340x60ffffffff@i0:1000,AC Lifetime En,kWh,2_8_0,3
#    
</code></pre></div> </details> <h3 id=growatt-max4200-modbus>Growatt MAX4200 (MODBus)<a class=headerlink href=#growatt-max4200-modbus title="Permanent link">~</a></h3> <p>Growatt solar inverter. this example also shows how to send cmds to modbus </p> <details class=summary> <summary>View script</summary> <div class=highlight><pre><span></span><code>&gt;D 22

cstr=&quot;&quot;
gl=0
tmp=0

&gt;B
=&gt;sensor53 r


&gt;S
if chg[gl]&gt;0 {
    ; change limit
    tmp=int(gl/42)
    cstr=&quot;r0106000300&quot;+hn(tmp)
    sml(1 3 cstr)
}

&gt;M 1
+1,18,m,0,9600,GRW,19,5,01040026,01040028,01040005,01040009,01030003
1,010404UUuu@i0:10,Netzspannung,V,mainsv,1
1,010404xxxxUUuu@i0:10,Einspeisestrom,A,mainsc,1
1,010404UUuuUUuu@i1:10,Einspeiseleistung,W,mainsw,1
1,010404UUuuUUuu@i2:10,string 1 unten,W,s1w,1
1,010404UUuuUUuu@i3:10,string 2 oben,W,s2w,1
1,010304UUuu@i4:1,limit,%,limit,0
#

&gt;W
&lt;hr&gt;
nm(1000 3600 10 gl &quot;Growatt limit (W) &quot; 80 0) 
</code></pre></div> </details> <h3 id=hager-ehz161-ehz361-obis>Hager EHZ161 / EHZ361 (OBIS)<a class=headerlink href=#hager-ehz161-ehz361-obis title="Permanent link">~</a></h3> <details class=summary> <summary>View script</summary> <div class=highlight><pre><span></span><code>&gt;D
&gt;B
-&gt;sensor53 r
&gt;M 1
+1,3,o,0,9600,OBIS
1,1-0:0.0.0*255(@#),Meter Number,,meter_number,0
1,1-0:1.8.0*255(@1,Power Consumption A+,kWh,zaehler_a+,4
1,1-0:2.8.0*255(@1,Power Feed A-,kWh,zaehler_a-,4
1,1-0:32.7.0*255(@1,Volt_L1,V,volt_l1,2
1,1-0:52.7.0*255(@1,Volt_L2,V,volt_l2,2
1,1-0:72.7.0*255(@1,Volt_L3,V,volt_l3,2
1,1-0:31.7.0*255(@1,Ampere_L1,A,volt_l1,2
1,1-0:51.7.0*255(@1,Ampere_L2,A,volt_l2,2
1,1-0:71.7.0*255(@1,Ampere_L3,A,volt_l3,2
1,1-0:21.7.0*255(@1,Watt_L1,W,watt_l1,0
1,1-0:41.7.0*255(@1,Watt_L2,W,watt_l2,0
1,1-0:61.7.0*255(@1,Watt_L3,W,watt_l3,0
#
</code></pre></div> </details> <h3 id=hager-ehz363>Hager EHZ363<a class=headerlink href=#hager-ehz363 title="Permanent link">~</a></h3> <details class=summary> <summary>View script</summary> <div class=highlight><pre><span></span><code>&gt;D
&gt;B
-&gt;sensor53 r
&gt;M 1
+1,3,s,0,9600,SML
1,77070100010800ff@1000,Total consumption,kWh,Total_in,4
1,77070100020800ff@1000,Total Feed,kWh,Total_out,4
1,77070100100700ff@1,Current consumption,W,Power_curr,0
1,77070100200700ff@1,Voltage L1,V,Volt_p1,1
1,77070100340700ff@1,Voltage L2,V,Volt_p2,1
1,77070100480700ff@1,Voltage L3,V,Volt_p3,1
1,770701001f0700ff@1,Amperage L1,A,Amperage_p1,1
1,77070100330700ff@1,Amperage L2,A,Amperage_p2,1
1,77070100470700ff@1,Amperage L3,A,Amperage_p3,1
1,77070100510704ff@1,Phaseangle I-L1/U-L1,deg,phase_angle_p1,1 
1,7707010051070fff@1,Phaseangle I-L27I-L2,deg,phase_angle_p2,1  
1,7707010051071aff@1,Phaseangle I-L3/I-L3,deg,phase_angle_p3,1 
1,770701000e0700ff@1,Frequency,Hz,frequency,0
#
</code></pre></div> </details> <details class=summary> <summary>SML with daily values</summary> <div class=highlight><pre><span></span><code>&gt;D  
pin=0  
pout=0  
pi_d=0  
po_d=0  
hr=0  
; permanent midnight values  
p:pi_m=0  
p:po_m=0  
&gt;B  
-&gt;sensor53 r  
&gt;T  
; get total consumption and total feed  
pin=SML#Total_in  
pout=SML#Total_out  
&gt;S  
; at midnight, save meter total values  
hr=hours  
if chg[hr]&gt;0  
and hr==0  
then  
pi_m=pin  
po_m=pout  
svars  
endif  
; on teleperiod calculate current daily values from midnight  
if upsecs%tper==0  
then  
pi_d=pin-pi_m  
po_d=pout-po_m  
endif  
; show these values on WEB UI  
&gt;W  
Tagesverbrauch: {m} %pi_d% kWh  
Tageseinspeisung: {m} %po_d% kWh    
; transmit these values with MQTT  
&gt;J  
,&quot;daily_consumption&quot;:%pi_d%,&quot;daily_feed&quot;:%po_d%  
; meter definition  
&gt;M 1  
+1,3,s,0,9600,SML  
1,77070100010800ff@1000,Total Consumed,kWh,Total_in,4  
1,77070100020800ff@1000,Total Delivered,kWh,Total_out,4  
1,77070100100700ff@1,Current Consumption,W,Power_curr,0  
1,77070100000009ff@#,Meter Number,,Meter_number,0  
#
</code></pre></div> </details> <h3 id=hiking-dds238-2-zns3-4x-modbus>Hiking DDS238-2 ZN/S3 4x (MODBus)<a class=headerlink href=#hiking-dds238-2-zns3-4x-modbus title="Permanent link">~</a></h3> <p>This is an example for 4 MODBus devices on the same bus (at different addresses).</p> <details class=info> <summary>Wiring diagram</summary> <p><img alt=94788926-930d3b00-03d4-11eb-8951-7b379c65f9ca src=https://user-images.githubusercontent.com/11647075/94828106-6cb5c280-0409-11eb-9f8c-c907b56a6707.png></p> </details> <details class=summary> <summary>View script</summary> <div class=highlight><pre><span></span><code>&gt;D
&gt;B
-&gt;sensor53 r
&gt;M 1
+1,3,m,1,9600,Hiking,1,10,0103000c,0103000e,0303000c,0303000e,0403000c,0403000e,0503000c,0503000e
;---&gt; two groups of registers for each device --&gt; default 2 registers returned ---&gt; 4 values per device
1,=h Contatore 1
1,010304UUuu@i0:10,C1_Voltage,V,C1Voltage,1
;---&gt; decoder for the first registry returned for the first group
1,010304xxxxUUuu@i0:1000,C1_Current,A,C1Current,3
;---&gt; decoder for the second registry returned for the first group
1,010304SSss@i1:1,C1_ActivePower,W,C1ActivePower,0
1,010304xxxxUUuu@i1:1,C1_ReactivePower,Var,C1ReactivePower,0
1,=h Contatore 3
1,030304UUuu@i2:10,C3_Voltage,V,C3Voltage,1
1,030304xxxxUUuu@i2:1000,C3_Current,A,C3Current,3
1,030304SSss@i3:1,C3_ActivePower,W,C3ActivePower,0
1,030304xxxxUUuu@i3:1,C3_ReactivePower,Var,C3ReactivePower,0
1,=h Contatore 4
1,040304UUuu@i4:10,C4_Voltage,V,C4Voltage,1
1,040304xxxxUUuu@i4:1000,C4_Current,A,C4Current,3
1,040304SSss@i5:1,C4_ActivePower,W,C4ActivePower,0
1,040304xxxxUUuu@i5:1,C4_ReactivePower,Var,C4ReactivePower,0
1,=h Contatore 5
1,050304UUuu@i6:10,C5_Voltage,V,C5Voltage,1
1,050304xxxxUUuu@i6:1000,C5_Current,A,C5Current,3
1,050304SSss@i7:1,C5_ActivePower,W,C5ActivePower,0
1,050304xxxxUUuu@i7:1,C5_ReactivePower,Var,C5ReactivePower,0
#
</code></pre></div> </details> <h3 id=holley-dtz541-sml>Holley DTZ541 (SML)<a class=headerlink href=#holley-dtz541-sml title="Permanent link">~</a></h3> <p>This script reads pretty much all given information. Make sure to enable <code>info</code> in the settings, otherwise you only get total / current consuption and total export.</p> <p>This script was used and tested on a WeMos D1 mini with an IR Head connected to the RX pin (3).</p> <details class=summary> <summary>View script</summary> <div class=highlight><pre><span></span><code>&gt;D
&gt;B
-&gt;sensor53 r
&gt;M 1
+1,3,s,16,9600,SML
1,77070100600100ff@#,Server ID,,server_id,0
1,77070100020800ff@1000,Export (Total),kWh,export_total_kwh,4
1,77070100010800ff@1000,Consumption (Total),kWh,total_kwh,4
1,77070100100700ff@1,Consumption (Current),W,curr_w,0
1,77070100200700ff@1,Voltage L1,V,volt_p1,1
1,77070100340700ff@1,Voltage L2,V,volt_p2,1
1,77070100480700ff@1,Voltage L3,V,volt_p3,1
1,770701001f0700ff@1,Amperage L1,A,amp_p1,1
1,77070100330700ff@1,Amperage L2,A,amp_p2,1
1,77070100470700ff@1,Amperage L3,A,amp_p3,1
1,77070100510701ff@1,Phase angle U-L2/U-L1,deg,phase_angle_l2_l1,1
1,77070100510702ff@1,Phase angle U-L3/U-L1,deg,phase_angle_l3_l1,1
1,77070100510704ff@1,Phase angle I-L1/U-L1,deg,phase_angle_p1,1
1,7707010051070fff@1,Phase angle I-L2/U-L2,deg,phase_angle_p2,1
1,7707010051071aff@1,Phase angle I-L3/U-L3,deg,phase_angle_p3,1
1,770701000e0700ff@1,Frequency,Hz,freq,0
#
</code></pre></div> </details> <h3 id=holley-dtz541-zdba-sml>Holley DTZ541-ZDBA (SML)<a class=headerlink href=#holley-dtz541-zdba-sml title="Permanent link">~</a></h3> <p>This meter differatiates between day and night time consumption. The script is based on the DTZ541. Look above for more information. </p> <details class=summary> <summary>View script</summary> <div class=highlight><pre><span></span><code>&gt;D
&gt;B
-&gt;sensor53 r
&gt;M 1
+1,3,s,16,9600,SML
1,77070100600100ff@#,Server ID,,server_id,0
1,77070100020800ff@1000,Export (Total),kWh,export_total_kwh,4
1,77070100010802ff@1000,Night (Total),kWh,total_night_kwh,4
1,77070100010801ff@1000,Day (Total),kwH,total_day_kwh,4
1,77070100100700ff@1,Consumption (Current),W,curr_w,0
1,77070100200700ff@1,Voltage L1,V,volt_p1,1
1,77070100340700ff@1,Voltage L2,V,volt_p2,1
1,77070100480700ff@1,Voltage L3,V,volt_p3,1
1,770701001f0700ff@1,Amperage L1,A,amp_p1,1
1,77070100330700ff@1,Amperage L2,A,amp_p2,1
1,77070100470700ff@1,Amperage L3,A,amp_p3,1
1,77070100510701ff@1,Phase angle U-L2/U-L1,deg,phase_angle_l2_l1,1
1,77070100510702ff@1,Phase angle U-L3/U-L1,deg,phase_angle_l3_l1,1
1,77070100510704ff@1,Phase angle I-L1/U-L1,deg,phase_angle_p1,1
1,7707010051070fff@1,Phase angle I-L2/U-L2,deg,phase_angle_p2,1
1,7707010051071aff@1,Phase angle I-L3/U-L3,deg,phase_angle_p3,1
1,770701000e0700ff@1,Frequency,Hz,freq,0
#
</code></pre></div> </details> <h3 id=holley-ehz541-be-sml>Holley EHZ541-BE (SML)<a class=headerlink href=#holley-ehz541-be-sml title="Permanent link">~</a></h3> <p>This Meter is sending negative values similiar to the DTZ541 model, you have to use the special option 1 (so1) as described in the 'special commands' section. Make sure to acquire the PIN from your energyprovider. </p> <p>After unlocking the meter, you can run the following script</p> <details class=summary> <summary>View script</summary> <div class=highlight><pre><span></span><code>&gt;D
&gt;B
-&gt;sensor53 r
&gt;M 1
+1,3,s,16,9600,SML
1,77070100600100ff@#,Server ID,,server_id,0
1,77070100010800ff@1000,Consumption (Total),kWh,total_kwh,4
1,=so1,00010800,65,11,65,11,00100700
1,77070100100700ff@1,Consumption (Current),W,curr_w,0
#
</code></pre></div> </details> <h3 id=huawei-sun2000-10ktl-modbus>Huawei SUN2000-10KTL (MODBus)<a class=headerlink href=#huawei-sun2000-10ktl-modbus title="Permanent link">~</a></h3> <p>For writing 32-bit registers like 40126, use <a href=../Modbus-Bridge/ >ModBus Bridge</a> driver and send two 16-bit numbers. i.e. <code>modbussend {"deviceaddress": 1, "functioncode": 16, "startaddress":40126, "type":"int16", "count":2, "values":["0","6666"]}</code> </p> <details class=summary> <summary>View script</summary> <div class=highlight><pre><span></span><code>&gt;D
&gt;B
-&gt;sensor53 r
&gt;M 1
+1,3,m,0,9600,modbus,1,10,r01037D100004,01037D00,01037D08,01037D40,r01037D450003,r01037D48000A,01037D55,01037D57,01037D59,01037D6A,01037D72
1,010308SSss@i0:10,PV1 Voltage,V,PV1_Voltage,1
1,010308x2SSss@i0:100,PV1 Current,A,PV1_Current,2
1,010308x4SSss@i0:10,PV2 Voltage,V,PV2_Voltage,1
1,010308x6SSss@i0:100,PV2 Current,A,PV2_Current,2
1,010304UUuu@i1:1,State Code,SC,State_Code,0
1,010304UUuuUUuu@i2:1,Error Code,EC,Error_Code,0
1,010304SSssSSss@i3:1,Input Power,W,Input_Power,0
1,010306UUuu@i4:10,Phase 1 Voltage,V,Phase_1_Voltage,1
1,010306x2UUuu@i4:10,Phase 2 Voltage,V,Phase_2_Voltage,1
1,010306x4UUuu@i4:10,Phase 3 Voltage,V,Phase_3_Voltage,1
1,010314SSssSSss@i5:1000,Phase 1 Current,A,Phase_1_Current,2
1,010314x4SSssSSss@i5:1000,Phase 2 Current,A,Phase_2_Current,2
1,010314x8SSssSSss@i5:1000,Phase 3 Current,A,Phase_3_Current,2
1,010314x16SSssSSss@i5:1,Active Power,W,Active_Power,0
1,010304UUuu@i6:100,Frequency,Hz,Frequency,2
1,010304SSss@i7:10,Internal Temperature,c,Internal_Temperature,1
1,010304UUuu@i8:1,Status Code,SC,Status_Code,0
1,010304UUuuUUuu@i9:100,Total Yield,TY,Total_Yield,2
1,010304UUuuUUuu@i10:100,Daily Yield,DY,Daily_Yield,2
#
</code></pre></div> </details> <h3 id=inepro-pro380-mod-modbus>inepro PRO380-Mod (MODBus)<a class=headerlink href=#inepro-pro380-mod-modbus title="Permanent link">~</a></h3> <details class=summary> <summary>View script</summary> <div class=highlight><pre><span></span><code>&gt;D
&gt;B
=&gt;sensor53 r

&gt;M 1    
+1,3,M,0,9600,MODBUS,1,1,01035002,01035004,01035006,01035008,0103500C,0103500E,01035010,01035012,01035014,01035016,01035018,0103501A,0103501C,0103501E,01035020,01035022,01035024,01035026,01035028,0103502A,0103502C,0103502E,01035030,0103600C,01036018,01036030,0103603C
; ***************************************
; *   inepro PRO380-Mod Energy Meter    *
; ***************************************
; Serial: 9600
; Device parity: EVEN
; Slave address: 0x01
; ***************************************
1,010304ffffffff@i0:1,L1 Voltage,V,32_7_0,3
1,010304ffffffff@i1:1,L2 Voltage,V,52_7_0,3
1,010304ffffffff@i2:1,L3 Voltage,V,72_7_0,3
1,010304ffffffff@i3:1,Grid frequency,Hz,14_7_0,3
1,010304ffffffff@i4:1,L1 Current,A,31_7_0,3
1,010304ffffffff@i5:1,L2 Current,A,51_7_0,3
1,010304ffffffff@i6:1,L3 Current,A,71_7_0,3
1,010304ffffffff@i7:1,Tot act power,kW,1_7_0,3
1,010304ffffffff@i8:1,L1 Act power,kW,21_7_0,3
1,010304ffffffff@i9:1,L2 Act power,kW,41_7_0,3
1,010304ffffffff@i10:1,L3 Act power,kW,61_7_0,3
1,010304ffffffff@i11:1,Tot react power,kvar,3_7_0,3
1,010304ffffffff@i12:1,L1 react power,kvar,23_7_0,3
1,010304ffffffff@i13:1,L2 react power,kvar,43_7_0,3
1,010304ffffffff@i14:1,L3 react power,kvar,63_7_0,3
1,010304ffffffff@i15:1,Tot appar power,kVA,9_7_0,3
1,010304ffffffff@i16:1,L1 appar power,kVA,29_7_0,3
1,010304ffffffff@i17:1,L2 appar Power,kVA,49_7_0,3
1,010304ffffffff@i18:1,L3 appar Power,kVA,69_7_0,3
1,010304ffffffff@i19:1,Power factor,,13_7_0,3
1,010304ffffffff@i20:1,L1 Power factor,,33_7_0,3
1,010304ffffffff@i21:1,L2 Power factor,,53_7_0,3
1,010304ffffffff@i22:1,L3 Power factor,,73_7_0,3
1,010304ffffffff@i23:1,Forw act en,kWh,1_8_0,3
1,010304ffffffff@i24:1,Rev act en,kWh,2_8_0,3
1,010304ffffffff@i25:1,Forw react en,kvarh,3_8_0,3
1,010304ffffffff@i26:1,Rev react en,kvarh,4_8_0,3
#
</code></pre></div> </details> <h3 id=iskra-am550>Iskra AM550<a class=headerlink href=#iskra-am550 title="Permanent link">~</a></h3> <p>(Wiener Netze)</p> <p>Based on the spec found <a href=https://www.wienernetze.at/kundenschnittstelle2>at Wiener Netze</a></p> <details class=summary> <summary>View script</summary> <div class=highlight><pre><span></span><code>&gt;D
&gt;B
=&gt;sensor53 r
&gt;M 1
+1,3,r,0,9600,HHStrom
1,=so3,256
1,=so4,&lt;your key&gt;
1,0209090cUUuu@1,year,,year,0
1,0209090cx2ss@1,month,,month,0
1,0209090cx3ss@1,day,,day,0
1,0209090cx5ss@1,hh,,hh,0
1,0209090cx6ss@1,mm,,mm,0
1,0209090cx7ss@1,ss,,ss,0
1,0209090cx13UUuuUUuu@1000,Zählerstand,kWh,Zaehlerstand,3
1,0209090cx18UUuuUUuu@1000,Einspeisung,kWh,Einspeisung,3
1,0209090cx23UUuuUUuu@1000,Blindenergie,varh,Blindenergie,3
1,0209090cx28UUuuUUuu@1000,Blindenergie einsp,varh,Blindenergie einsp,3
; Letzter Paramater (Precision) = add 16 to send data immediately 0 + 16 = 16
1,0209090cx33UUuuUUuu@1,Momentanleistung,W,Momentanleistung,16
1,0209090cx38UUuuUUuu@1,Einspeiseleistung,W,Einspeiseleistung,0
1,0209090cx43UUuuUUuu@1,Blindleistung,var,Blindleistung,0
1,0209090cx48UUuuUUuu@1,Blindleistung einsp,var,Blindleistung einsp,0
#
</code></pre></div> </details> <p>You need to adapt the identifier string at the beginning of the decoding lines ('0209090c' here) to the code shown in your dump.</p> <p>To start the dump enter 'sensor53 d1' in the Console, to stop it 'sensor53 d0'. The dump delivers something like:</p> <div class=highlight><pre><span></span><code>18:12:11.474 SML: decrypted block: 56 bytes
18:12:11.476 :&gt;02 09 09 0c 07 e8 0b 0e 04 12 0c 0c 00 ff c4 00 
18:12:11.477 :&gt;06 00 01 5a b1 06 00 03 db c9 06 00 00 3d 1b 06 
18:12:11.479 :&gt;00 02 7b e4 06 00 00 00 11 06 00 00 00 00 06 00 
18:12:11.481 :&gt;00 00 00 06 00 00 00 ba 
18:12:11.523 :&gt;00 00 00 06 00 00 00 ba 
</code></pre></div> <p>As long as you don't get this dump, either the interface is not operational or the provided code from your provider is wrong.</p> <p>Take the first four bytes from your dump ('02 09 09 0c´ here) and adapt the script.</p> <p>Be aware that the data sent has separator-bytes between the values (`04' and ´06'). And the last line seems repeated.</p> <p>This is the interpreted dump:</p> <table> <thead> <tr> <th>Obis</th> <th>Data</th> <th>Value</th> </tr> </thead> <tbody> <tr> <td>Key(?)</td> <td>02 09 09 0c</td> <td></td> </tr> <tr> <td>year</td> <td><strong>07 e8</strong></td> <td>2024</td> </tr> <tr> <td>month</td> <td><strong>0b</strong></td> <td>11</td> </tr> <tr> <td>day</td> <td><strong>0e</strong></td> <td>14</td> </tr> <tr> <td>sep</td> <td>04</td> <td></td> </tr> <tr> <td>hh</td> <td><strong>12</strong></td> <td>18</td> </tr> <tr> <td>mm</td> <td><strong>0c</strong></td> <td>12</td> </tr> <tr> <td>ss</td> <td><strong>0c</strong></td> <td>12</td> </tr> <tr> <td>(??)</td> <td>00 ff c4 00 06</td> <td></td> </tr> <tr> <td>+A</td> <td><strong>00 01 5a b1</strong> 06</td> <td>88753</td> </tr> <tr> <td>-A</td> <td><strong>00 03 db c9</strong> 06</td> <td>252873</td> </tr> <tr> <td>+R</td> <td><strong>00 00 3d 1b</strong> 06</td> <td>15643</td> </tr> <tr> <td>-R</td> <td><strong>00 02 7b e4</strong> 06</td> <td>16278817</td> </tr> <tr> <td>+P</td> <td><strong>00 00 00 11</strong> 06</td> <td>17</td> </tr> <tr> <td>-P</td> <td><strong>00 00 00 00</strong> 06</td> <td>0</td> </tr> <tr> <td>+Q</td> <td><strong>00 00 00 00</strong> 06</td> <td>0</td> </tr> <tr> <td>-Q</td> <td><strong>00 00 00 ba</strong></td> <td>186</td> </tr> </tbody> </table> <h3 id=iskra-mt-174-obis>Iskra MT 174 (OBIS)<a class=headerlink href=#iskra-mt-174-obis title="Permanent link">~</a></h3> <details class=summary> <summary>View script</summary> <div class=highlight><pre><span></span><code>&gt;D
&gt;B
-&gt;sensor53 r
&gt;M 1
+1,3,o,0,300,STROM,1,100,2F3F210D0A
1,1-0:1.8.1*255(@1,Total Consumed,kWh,Total_in,3
1,1-0:2.8.1*255(@1,Total Delivered,kWh,Total_out,3
1,1-0:0.0.0*255(@#),Meter Number,,Meter_number,0
#
</code></pre></div> </details> <h3 id=iskra-mt-175-sml>Iskra MT 175 (SML)<a class=headerlink href=#iskra-mt-175-sml title="Permanent link">~</a></h3> <p>This meter needs a PIN to unlock the current power usage. You need to ask your provider. </p> <details class=summary> <summary>View script</summary> <div class=highlight><pre><span></span><code>&gt;D
&gt;B
-&gt;sensor53 r
&gt;M 1
+1,3,s,16,9600,MT175
1,77070100010800ff@1000,E_in,kWh,E_in,1
1,77070100020800ff@1000,E_out,kWh,E_out,1
1,77070100100700ff@1,P,W,P,18
1,77070100240700ff@1,L1,W,L1,18
1,77070100380700ff@1,L2,W,L2,18
1,770701004C0700ff@1,L3,W,L3,18
1,77070100000009ff@#,Server_ID,,Server_ID,0
#
</code></pre></div> </details> <h3 id=iskra-mt-631-sml>Iskra MT 631 (SML)<a class=headerlink href=#iskra-mt-631-sml title="Permanent link">~</a></h3> <p>This meter requires a PIN to unlock the current power usage details. To obtain the PIN, you'll need to contact your utility provider. Once you have the PIN, deactivate it on the meter and enable the detailed information display to also get the "Current Consumption". Please note that the "Total Delivered" value may show as zero on some devices.</p> <details class=summary> <summary>View script</summary> <div class=highlight><pre><span></span><code>&gt;D
&gt;B
=&gt;sensor53 r
&gt;M 1
+1,3,s,0,9600,MT631
1,77070100010800ff@1000,Total Consumed,kWh,Total_in,2
1,77070100020800ff@1000,Total Delivered,kWh,Total_out,2
1,77070100100700ff@1,Current Consumption,W,Power_cur,0
#
</code></pre></div> </details> <h3 id=iskra-mt-681-sml>Iskra MT 681 (SML)<a class=headerlink href=#iskra-mt-681-sml title="Permanent link">~</a></h3> <p>This is script for a two-direction meter (consumption and delivery) for the Isra MT 681, that is widely used in Germany. If you don't deliver energy, just delete the "Total Delivered" line. If the meter provides the consumption values for the 3 phases depends also on the configuration by your local energy provider.</p> <details class=summary> <summary>View script</summary> <div class=highlight><pre><span></span><code>&gt;D
&gt;B
=&gt;sensor53 r
&gt;M 1
+1,3,s,0,9600,MT681
1,77070100010800ff@1000,Total Consumed,kWh,Total_in,3
1,77070100100700ff@1,Current Consumption,W,Power_cur,0
1,77070100240700ff@1,Current Consumption P1,W,Power_p1,0
1,77070100380700ff@1,Current Consumption P2,W,Power_p2,0
1,770701004c0700ff@1,Current Consumption P3,W,Power_p3,0
1,77070100020800ff@1000,Total Delivered,kWh,Total_out,3
1,77070100000009ff@#,Service ID,,Meter_id,0
#
</code></pre></div> </details> <h3 id=iskra-ehz-mt681-d4a51-k0p>Iskra eHZ-MT681-D4A51-K0p<a class=headerlink href=#iskra-ehz-mt681-d4a51-k0p title="Permanent link">~</a></h3> <p>2012 version of the Iskra MT 681 with slightly different OBIS codes for the power values.</p> <details class=summary> <summary>View script</summary> <div class=highlight><pre><span></span><code>&gt;D
&gt;B
=&gt;sensor53 r
&gt;M 1
+1,3,s,0,9600,MT681
1,77070100010800ff@1000,Gesamtverbrauch,kWh,Total_in,3
1,770701000f0700ff@1,Leistung,W,Power_cur,0
1,77070100150700ff@1,Leistung P1,W,Power_p1,0
1,77070100290700ff@1,Leistung P2,W,Power_p2,0
1,770701003d0700ff@1,Leistung P3,W,Power_p3,0
1,77070100020800ff@1000,Gesamteinspeisung,kWh,Total_out,3
1,77070100000009ff@#,Service ID,,Meter_id,0
#
</code></pre></div> </details> <h3 id=iskra-ehz-mt681-d4a52-k0p>Iskra eHZ-MT681-D4A52-K0p<a class=headerlink href=#iskra-ehz-mt681-d4a52-k0p title="Permanent link">~</a></h3> <p>2023 Version Zweiwegezähler</p> <details class=summary> <summary>View script</summary> <div class=highlight><pre><span></span><code>&gt;D
&gt;B
=&gt;sensor53 r
&gt;M 1
+1,3,s,0,9600,MT681
1,77070100010800ff@1000,Verbrauch,kWh,Total_in,4
1,77070100100700ff@1,Leistung,W,Power_cur,0
1,77070100020800ff@1000,Erzeugung,kWh,Total_out,4
1,77070100000009ff@#,Service ID,,Meter_id,0
#
</code></pre></div> </details> <h3 id=iskra-ehz-ms2020-mt691-d4a52-kdy-h03-grid>Iskra eHZ-MS2020 MT691-D4A52-KDy-H03 GRID<a class=headerlink href=#iskra-ehz-ms2020-mt691-d4a52-kdy-h03-grid title="Permanent link">~</a></h3> <p>"Moderne Messeinrichtung" installed in 2024 </p> <details class=summary> <summary>View script</summary> <div class=highlight><pre><span></span><code>&gt;D
&gt;B
=&gt;sensor53 r
&gt;M 1
+1,3,s,0,9600,MT691
1,77070100010800ff@1000,Total Consumed,kWh,Total_in,3
1,77070100100700ff@1,Current Consumption,W,Power_cur,0
1,77070100240700ff@1,Current Consumption P1,W,Power_p1,0
1,77070100380700ff@1,Current Consumption P2,W,Power_p2,0
1,770701004c0700ff@1,Current Consumption P3,W,Power_p3,0
1,77070100020800ff@1000,Total Delivered,kWh,Total_out,3
#
</code></pre></div> </details> <h3 id=itron-sml-v104>Itron (SML V1.04)<a class=headerlink href=#itron-sml-v104 title="Permanent link">~</a></h3> <p>The Itron electrical meter is a German end-user meter installed by EnBW. You can read values using an IR Sensor. The following script shows the meter number and the consuption and the generation of a Photovoltaik generator. </p> <details class=summary> <summary>View script</summary> <div class=highlight><pre><span></span><code>&gt;D
&gt;B
=&gt;sensor53 r
&gt;M 1
+1,12,s,0,9600,ELZ
1,77070100600100ff@#,Zählernummer,,Wert,0
1,77070100010800ff@1000,Verbrauch,kWh,ELZ_PV_1.8.0,1
1,77070100020800ff@1000,Erzeugung,kWh,ELZ_PV_2.8.0,1
#
</code></pre></div> </details> <details class=summary> <summary>This script additionally reads the power in watts</summary> <p>It has enhanced precision of 4 decimal places for the total consumption. Be sure to turn on the full precision at the meter using a flashlight (if you see <code>inF=Off</code>, hold for 5 seconds until you see <code>inF=On</code>)</p> <div class=highlight><pre><span></span><code>&gt;D
&gt;B
=&gt;sensor53 r
;Set teleperiod to 20sec  
tper=10  
&gt;M 1
+1,3,s,0,9600,Power
1,77070100600100ff@#,Zählernummer,,Meter_Number,0
1,77070100010800ff@1000,Verbrauch,kWh,Total_in,4
1,77070100100700ff@1,Leistung,W,Power_curr,0
1,77070100020800ff@1000,Erzeugung,kWh,Total_out,4
#
</code></pre></div> </details> <h3 id=janitza-b23-modbus>Janitza B23 (MODBus)<a class=headerlink href=#janitza-b23-modbus title="Permanent link">~</a></h3> <details class=summary> <summary>View script</summary> <div class=highlight><pre><span></span><code>&gt;D
&gt;B  
-&gt;sensor53 r
&gt;M 1  
+1,3,m,0,9600,Janitza,1,1,01034A38,01034A3A,01034A3C,01034A4C,01034A4E,01034A50,01034A72,01034A7A,01034A82  
1,010304ffffffff@i0:1,Voltage L1-N,V,Voltage_L1-N,2  
1,010304ffffffff@i1:1,Voltage L2-N,V,Voltage_L2-N,2  
1,010304ffffffff@i2:1,Voltage L3-N,V,Voltage_L3-N,2  
1,010304ffffffff@i3:1,Real power L1-N,W,Real_power_L1-N,2  
1,010304ffffffff@i4:1,Real power L2-N,W,Real_power_L2-N,2  
1,010304ffffffff@i5:1,Real power L3-N,W,Real_power_L3-N,2  
1,010304ffffffff@i6:1,Real energy L3,Wh,Real_energy_L3,2  
1,010304ffffffff@i7:1,Real energy L3-consumed,Wh,Real_energy_L3_consumed,2  
1,010304ffffffff@i8:1,Real energy L3-delivered,Wh,Real_energy_L3_delivered,2   
#
</code></pre></div> </details> <h3 id=janz-c3801-modbus>JANZ C3801 (MODBus)<a class=headerlink href=#janz-c3801-modbus title="Permanent link">~</a></h3> <p>This is an example for one of the many quite similar smart meters implemented in Portugal, by EDP Distribuição S.A. May be valid for many more models, as stated.</p> <details class=summary> <summary>View script</summary> <div class=highlight><pre><span></span><code>&gt;D
&gt;B
=&gt;sensor53 r
&gt;M 1
+1,14,m,1,9600,EB,5,50,0104006C,01040079,0104007A,0104007F,01040026,01040027,01040028,0104000B,01040084
1,=hVALORES TÉCNICOS
1,010404UUuuxxxx@i0:10,Tensão,V,Voltage_P1,17
1,010404xxxxUUuu@i0:10,Corrente,A,Current_P1,17
1,010408UUuuUUuuxxxxxxxxxxxx@i1:1,Potência ativa,W,Power_P1,16
1,010406xxxxxxxxUUuu@i2:1000,Fator de potência,pu,PFactor_P1,19
1,01040aUUuuxxxx@i3:10,Frequência,Hz,Frequency_P1,17
1,=h&amp;#8205;
1,=hTOTALIZADORES DE ENERGIA
1,010408UUuuUUuuxxxxxxxxxxxx@i4:1000,Vazio (1),kWh,Energy_P1_R1,17
1,010408UUuuUUuuxxxxxxxxxxxx@i5:1000,Ponta (2),kWh,Energy_P1_R2,17
1,010408UUuuUUuuxxxxxxxxxxxx@i6:1000,Cheia (3),kWh,Energy_P1_R3,17
1,=h&amp;#8205;
1,=hESTADOS
1,010406uuxxxxxxxx@i7:1,Tarifa,,Tariff_P1,16
1,010406uuxxxxxxxx@i8:1,DCP,,DCP_P1,16
#
</code></pre></div> </details> <h3 id=kaifa-mb310h4bde>KAIFA MB310H4BDE<a class=headerlink href=#kaifa-mb310h4bde title="Permanent link">~</a></h3> <p>By default, the KAIFA MB310H4BDE will only deliver the Total_in and Total_out values (without decimals). In order to get precise values, and especially in order to receive Power_curr, you have to login to configure it: Press the button besides the display. When asked for pin, enter it with a flashlight or by pressing the same button repeatedly. (If you don't have a PIN, get it from your grid operator.) If that was successful, you will see accurate values in the meters display already. To activate them on the SML interface, press the button repeatedly for 13 times, until "INF OFF" is displayed. Now press and hold the button, until it switches to INF ON. After that, you should receive all values.</p> <details class=summary> <summary>View script</summary> <div class=highlight><pre><span></span><code>&gt;D
&gt;B
=&gt;sensor53 r
&gt;M 1
+1,3,s,0,9600,Haus
1,77070100010800ff@1000,Zaehlerstand In,kWh,Total_in,2
1,77070100020800ff@1000,Zaehlerstand Out,kWh,Total_out,2
1,77070100100700ff@1,Leistung-akt.,W,Power_curr,0
1,77070100600100ff@#,Server-ID,,Meter_Number,0
#
</code></pre></div> </details> <h3 id=kamstrup-382lx7>Kamstrup 382Lx7<a class=headerlink href=#kamstrup-382lx7 title="Permanent link">~</a></h3> <details class=summary> <summary>View script</summary> <div class=highlight><pre><span></span><code>&gt;D
&gt;B
=&gt;sensor53 r
&gt;S
&gt;M 1
+1,5,k,0,9600,K382Lx7,4,10,3F100200010002,3F1003041E041F0420,3F1003043404350436,3F100203ff0400,
1,3F100001kstr@i0:1,EnergyIn,kWh,EnergyIn,16
1,3F10x08xx0002kstr@i0:1,EnergyOut,kWh,EnergyOut,16
1,3F10041ekstr@i1:1,VoltageP1,V,VoltageP1,16
1,3F10x06xx041fkstr@i1:1,VoltageP2,V,VoltageP2,16
1,3F10x13xx0420kstr@i1:1,VoltageP3,V,VoltageP3,16
1,3F100434kstr@i2:100,CurrentP1,A,CurrentP1,18
1,3F10x08xx0435kstr@i2:100,CurrentP2,A,CurrentP2,18
1,3F10x17xx0436kstr@i2:100,CurrentP3,A,CurrentP2,18
1,3F1003ffkstr@i3:1,PowerIN,W,PowerIN,16
1,3F10x08xx0400kstr@i3:1,PowerOUT,W,PowerOUT,16
#
</code></pre></div> </details> <h3 id=kamstrup-multical-4xx-6xx-8xx>Kamstrup Multical 4xx / 6xx / 8xx<a class=headerlink href=#kamstrup-multical-4xx-6xx-8xx title="Permanent link">~</a></h3> <p>Those meters provide <a href=https://github.com/tvwerkhoven/PyMultical/blob/master/pymultical.py>several registers</a> via <a href=https://wiki.hal9k.dk/projects/kamstrup>optical interface</a> called <a href=https://www.msxfaq.de/sonst/bastelbude/smartmeter_d0_sml.htm>D0 interface</a>. Baudrate is only 1200 thus reading multiple registers simultaneously takes some time (e.g. one: ~300ms, six ~750ms). Size of response varies depending on register type and needs to be considered when reading more than one with a single telegram. Analyze length with <code>sensor53 d1</code>. Responses have format of <code>3F10&lt;rg&gt;&lt;response&gt;&lt;rg&gt;&lt;response&gt;</code>. So asking for 0x003C and 0x0056 with telegram <code>3F10 02 003C 0056</code> could be responded with <code>3F10 003C xxXXxxXXxxXXxx 0056 xxXXxxXXxx</code>.</p> <p>Default buffer size suffices for <strong>four values</strong> at once. The following example reads seven values at once so please <code>#define SML_BSIZ 90</code>. SML allows only one date value per meter at the moment.</p> <details class=summary> <summary>View script (seven at once, needs #define SML_BSIZ 90)</summary> <div class=highlight><pre><span></span><code>&gt;D
&gt;B
=&gt;sensor53 r
&gt;M 1
+1,3,kN2,0,1200,KSMC403,1,10,3F1007003C005600570059004A0044007B
1,3F10003Ckstr@i0:1000,Wärmemenge,MWh,HeatEnergyE1,3
1,3F10x08xx0056kstr@i0:100,Vorlauftemp.,°C,PreTemp,2
1,3F10x15xx0057kstr@i0:100,Rücklauftemp.,°C,AftTemp,2
1,3F10x22xx0059kstr@i0:100,Temp.diff.,°C,DifTemp,2
1,3F10x29xx004Akstr@i0:1,Fließgeschw.,l/h,Flow,0
1,3F10x36xx0044kstr@i0:100,Volumenstrom,m³,Volume,2
1,3F10x45xx007Bkstr@#,max. Fluss am,,MaxFlowDate,0
#
</code></pre></div> </details> <details class=summary> <summary>View script (same as above with two telegrams and default SML_BSIZ)</summary> <div class=highlight><pre><span></span><code>&gt;D
&gt;B
=&gt;sensor53 r
&gt;M 1
+1,3,kN2,0,1200,KSMC403,1,5,3F1004003C005600570059,3F1003004A0044007B
1,3F10003Ckstr@i0:1000,Wärmemenge,MWh,HeatEnergyE1,3
1,3F10x08xx0056kstr@i0:100,Vorlauftemp.,°C,PreTemp,2
1,3F10x15xx0057kstr@i0:100,Rücklauftemp.,°C,AftTemp,2
1,3F10x22xx0059kstr@i0:100,Temp.diff.,°C,DifTemp,2
1,3F10004Akstr@i1:1,Fließgeschw.,l/h,Flow,0
1,3F10x06xx0044kstr@i1:100,Volumenstrom,m³,Volume,2
1,3F10x15xx007Bkstr@#,max. Fluss am,,MaxFlowDate,0
#
</code></pre></div> </details> <h3 id=landis-gyr-e220-sml>Landis + Gyr E220 (SML)<a class=headerlink href=#landis-gyr-e220-sml title="Permanent link">~</a></h3> <p>For read-out of "current power" the advanced data set has to be enabled in user menu</p> <details class=summary> <summary>View script</summary> <div class=highlight><pre><span></span><code>&gt;D
&gt;B
=&gt;sensor53 r
;Set teleperiod to 20sec  
tper=10  
&gt;M 1
+1,3,s,0,9600,Power
1,77070100600100ff@#,Server-ID,,Meter_Number,0
1,77070100010800ff@1000,Verbrauch,kWh,Total_in,4
1,77070100100700ff@1,Leistung-akt.,W,Power_curr,0
#
</code></pre></div> </details> <h3 id=landis-gyr-e320-sml>Landis + Gyr E320 (SML)<a class=headerlink href=#landis-gyr-e320-sml title="Permanent link">~</a></h3> <p>For read-out of "Current power" the advanced data set has to be enabled in user menu</p> <details class=summary> <summary>View script</summary> <div class=highlight><pre><span></span><code>&gt;D
&gt;B
=&gt;sensor53 r
&gt;M 1
+1,3,s,20,9600,E320
1,77070100020800ff@1000,Total Delivered,kWh,Total_out,3
1,77070100010800ff@1000,Total Consumed,kWh,Total_in,3
1,77070100100700ff@1,Current power,W,Power_in,19
1,77070100600100ff@#,Server-ID,,Meter_Number,0    
#
</code></pre></div> </details> <h3 id=landis-gyr-e350-obis>Landis + Gyr E350 (OBIS)<a class=headerlink href=#landis-gyr-e350-obis title="Permanent link">~</a></h3> <p>Requesting data with a baud rate change during operation.</p> <p>According to its manual the meter seems to support many more metrics that were not tested, and are not listed here because of that.</p> <details class=summary> <summary>View script</summary> <div class=highlight><pre><span></span><code>&gt;D
scnt=0
res=0

&gt;B
-&gt;sensor53 r
tper=20

&gt;F
scnt+=1
switch scnt
case 6
res=sml(1 0 300)
res=sml(1 1 &quot;2F3F210D0A&quot;)

case 18
res=sml(1 1 &quot;063035300D0A&quot;)

case 20
res=sml(1 0 9600)

case 50
scnt=0
ends

&gt;M 1
+1,3,o,0,9600,,1
;1,C.1.0(@1,Server-ID,,Meter_number,0
1,=h===================
1,1.8.0(@1,Total Consumed,kWh,Total_in,3
;1,1.8.1(@1,Primary Consumed,kWh,P_Total_in,3
;1,1.8.2(@1,Secondary Consumed,kWh,S_Total_in,3
1,=h===================
1,16.7(@1,Current power,kW,Power_in,2
#
</code></pre></div> </details> <h3 id=landis-gyr-zmb120-t213cs-obis>Landis + Gyr ZMB120 T213CS (OBIS)<a class=headerlink href=#landis-gyr-zmb120-t213cs-obis title="Permanent link">~</a></h3> <p>This meter may need a PIN to unlock the current power usage - ask your provider. </p> <details class=summary> <summary>View script</summary> <div class=highlight><pre><span></span><code>&gt;D
&gt;B
=&gt;sensor53 r
&gt;M 1
+1,3,o,0,300,STROM,1,10,2F3F210D0A,063030300D0A
1,0(@1,Zählernummer,,Meter_number,0  
1,=h===================  
1,8.0(@1,Total T1 &amp; T2,kWh,Total,2  
1,8.1(@1,T1 aktuell,kWh,Total_T1,2  
1,8.2(@1,T2 aktuell,kWh,Total_T2,2  
1,=h===================  
1,8.1.1(@1,T1 letzte Saison,kWh,Total_T1-1,2   
1,8.2.1(@1,T2 letzte Saison,kWh,Total_T2-1,2   
1,8.1.2(@1,T1 vorletzte Saison,kWh,Total_T1-2,2
1,8.2.2(@1,T2 vorletzte Saison,kWh,Total_T2-2,2     
#
</code></pre></div> </details> <h3 id=landis-gyr-zmr120ares2r2sfcs-obis>Landis + Gyr ZMR120AReS2R2sfCS (OBIS)<a class=headerlink href=#landis-gyr-zmr120ares2r2sfcs-obis title="Permanent link">~</a></h3> <p>Example: Changing the baud rate during operation.</p> <details class=summary> <summary>View script</summary> <div class=highlight><pre><span></span><code>&gt;D  
;Var Power consumption total HT+NT  
v1=0  
;HT Main electricity tariff consumption total   
v2=0  
;NT Night electricity tariff consumption total  
v3=0  
; Energie L1+L2+L3  
v4=0  
;recent Energie L1  
v5=0  
;recent Energie L2  
v6=0  
;recent Energie L3  
v7=0  

;Var minute   
min=0  
;Var hour  
hr=0  
;Var begin of the month 01.xx.20xx 0:00 Uhr  
md=0  
;Var begin of the year 01.01. 0:00 Uhr  
yr=0  
;Var for counter see &gt;F=ms  
scnt=0  
;Var for baudrate changing
res=0  

;Permanent Var Meter1 0:00   
p:sm=0  
p:HT_sm=0  
p:NT_sm=0  
;Var for daily =0  
sd=0  
HT_sd=0  
NT_sd=0  
;Permanent Var for month begin  
p:sma=0  
p:HT_sma=0  
p:NT_sma=0  
;Var for monthly =0  
smn=0  
HT_smn=0  
NT_smn=0  
;Permanent Var for year begin  
p:sya=0  
p:HT_sya=0  
p:NT_sya=0  
;Var for yearly =0  
syn=0  
HT_syn=0  
NT_syn=0  

;Fill vars with content on teleperiod    
&gt;T  
v1=#Total_in  
v2=#HT_Total_in  
v3=#NT_Total_in  
v4=#kW_L1+L2+L3  
v5=#kw_L1  
v6=#kw_L2  
v7=#kw_L3  

&gt;B  
;Restart driver  
-&gt;sensor53 r  
;Set teleperiod to 20sec  
tper=20  

&gt;F  
; count 100ms   
scnt+=1  
switch scnt  
case 6  
;set sml driver to 300 baud and send /?! as HEX to trigger the Meter   
res=sml(1 0 300)  
res=sml(1 1 &quot;2F3F210D0A&quot;)  

;1800ms later \&gt; Ack and ask for switching to 9600 baud  
case 18  
res=sml(1 1 &quot;063035300D0A&quot;)  

;2000ms later \&gt; Switching sml driver to 9600 baud    
case 20  
res=sml(1 0 9600)  

;Restart sequence after 50x100ms    
case 50  
; 5000ms later \&gt; restart sequence    
scnt=0  
ends  

&gt;S  
;daily usage  
hr=hours  
if chg[hr]&gt;0  
and hr==0  
and v1&gt;0  
then  
sm=v1  
HT_sm=v2  
NT_sm=v3  
svars  
endif  

if upsecs%tper==0{  
sd=v1-sm  
HT_sd=v2-HT_sm  
NT_sd=v3-NT_sm  
}  

;Monthly usage  
md=day  
if chg[md]&gt;0  
and md==1  
and v1&gt;0  
then  
sma=v1  
HT_sma=v2  
NT_sma=v3  
svars  
endif  

if upsecs%tper==0{  
smn=v1-sma  
HT_smn=v2-HT_sma  
NT_smn=v3-NT_sma  
}  

;Yearly usage  
yr=year  
if chg[yr]&gt;0  
and v1&gt;0  
then  
sya=v1  
HT_sya=v2  
NT_sya=v3  
svars  
endif  

if upsecs%tper==0{  
syn=v1-sya  
HT_syn=v2-HT_sya  
NT_syn=v3-NT_sya  

; Json payload \&gt; send on teleperiod  
&gt;J  
,&quot;Strom_Vb_Tag&quot;:%3sd%  
,&quot;HT_Strom_Vb_Tag&quot;:%3HT_sd%  
,&quot;NT_Strom_Vb_Tag&quot;:%3NT_sd%  
,&quot;Strom_Vb_M&quot;:%1smn%  
,&quot;HT_Strom_Vb_M&quot;:%1HT_smn%  
,&quot;NT_Strom_Vb_M&quot;:%1NT_smn%  
,&quot;Strom_Vb_Jahr&quot;:%0syn%  
,&quot;HT_Strom_Vb_Jahr&quot;:%0HT_syn%  
,&quot;NT_Strom_Vb_Jahr&quot;:%0NT_syn%  
,&quot;Strom_0:00 _Uhr&quot;:%1sm%  
,&quot;HT_Strom_0:00 _Uhr&quot;:%1HT_sm%  
,&quot;NT_Strom_0:00 _Uhr&quot;:%1NT_sm%  
,&quot;Strom_Ma&quot;:%3sma%  
,&quot;HT_Strom_Ma&quot;:%3HT_sma%  
,&quot;NT_Strom_Ma&quot;:%3NT_sma%  
,&quot;Strom_Ja&quot;:%3sya%  
,&quot;HT_Strom_Ja&quot;:%3HT_sya%  
,&quot;NT_Strom_Ja&quot;:%3NT_sya%  

;Webdisplay stuff  
&gt;W  

0:00 Uhr Σ HT+NT: {m} %0sm% kWh  
HT: {m} %0HT_sm% kWh  
NT: {m} %0NT_sm% kWh  

Monatsanfang: {m} %1sma% kWh  
HT: {m} %1HT_sma% kWh  
NT: {m} %1NT_sma% kWh  

Jahresanfang: {m} %0sya% kWh  
HT: {m} %0HT_sya% kWh  
NT: {m} %0NT_sya% kWh  
.............................  
Tagesverbrauch: {m} %1sd% kWh  
HT: {m} %1HT_sd% kWh  
NT: {m} %1NT_sd% kWh  

Monatsverbrauch: {m} %0smn% kWh  
HT: {m} %0HT_smn% kWh  
NT: {m} %0NT_smn% kWh  
    -  
Jahresverbrauch: {m} %0syn% kWh  
HT: {m} %0HT_syn% kWh  
0:00 Uhr Σ HT+NT: {m} %0sm% kWh  
HT: {m} %0HT_sm% kWh  
NT: {m} %0NT_sm% kWh  

Monatsanfang: {m} %1sma% kWh  
HT: {m} %1HT_sma% kWh  
NT: {m} %1NT_sma% kWh  

Jahresanfang: {m} %0sya% kWh  
HT: {m} %0HT_sya% kWh  
NT: {m} %0NT_sya% kWh  
.............................  
Tagesverbrauch: {m} %1sd% kWh  
HT: {m} %1HT_sd% kWh  
NT: {m} %1NT_sd% kWh  

Monatsverbrauch: {m} %0smn% kWh  
HT: {m} %0HT_smn% kWh  
NT: {m} %0NT_smn% kWh  
    -  
Jahresverbrauch: {m} %0syn% kWh  
HT: {m} %0HT_syn% kWh  
NT: {m} %0NT_syn% kWh  

&gt;M 1  
+1,3,o,0,9600,,1  
1,0.0.1(@1,Zählernummer,,Meter_number,0  
1,0.9.1(@#),Zeitstempel,Uhr,time-stamp,0  
1,=h===================  
1,1.8.0(@1,HT+NT Zählerstand,kWh,Total_in,3  
1,1.8.1(@1,HT,kWh,HT_Total_in,3  
1,1.8.2(@1,NT,kWh,NT_Total_in,3  
1,=h===================  
1,36.7.0(@1,Power_L1,kW,kW_L1,2  
1,56.7.0(@1,Power_L2,kW,kW_L2,2  
1,76.7.0(@1,Power_L3,kW,kW_L3,2  
1,16.7.0(@1,Σ_L1+L2+L3,kW,kW_L1+L2+L3,2  
1,=h===================  
1,31.7.0(@1,Strom_L1,A,I_L1,2  
1,51.7.0(@1,Strom_L2,A,I_L2,2  
1,71.7.0(@1,Strom_L3,A,I_L3,2  
#
</code></pre></div> </details> <h3 id=2-landisgyr-e450-encrypted>2 * Landis+Gyr E450 (encrypted)<a class=headerlink href=#2-landisgyr-e450-encrypted title="Permanent link">~</a></h3> <details class=summary> <summary>View script</summary> <div class=highlight><pre><span></span><code>&gt;D
&gt;B
smlj=0
=&gt;sensor53 r
&gt;R
smlj=0
&gt;S
if upsecs&gt;22
then
smlj|=1
endif
&gt;M 2
+1,17,r,0,2400,Heizung
1,=so3,512
1,=so4,GUEK
1,pm(1.8.0)@1000,kWh_IN,kWh,kWh_IN,3;Wirkenergie Lieferung (+A)
1,pm(1.8.1)@1000,kWh_IN_T1,kWh,kWh_IN_T1,3;Wirkenergie Lieferung (+A) Tarif 1
1,pm(1.8.2)@1000,kWh_IN_T2,kWh,kWh_IN_T2,3;Wirkenergie Lieferung (+A) Tarif 2
1,pm(1.7.0)@1000,kW_IN,kW,kW_IN,3;Momentane Wirkleistung Lieferung (+A)
;1,pm(2.8.0)@1000,kWh_OUT,kWh,kWh_OUT,3;Wirkenergie Bezug (-A)
;1,pm(2.8.1)@1000,kWh_OUT_T1,kWh,kWh_OUT_T1,3;Wirkenergie Bezug (-A) Tarif 1
;1,pm(2.8.2)@1000,kWh_OUT_T2,kWh,kWh_OUT_T2,3;Wirkenergie Bezug (-A) Tarif 2
;1,pm(.2.7.0)@1000,kW_OUT,kW,kW_OUT,3;Momentane Wirkleistung Bezug (-A)
1,pm(3.8.0)@1000,kvarh_IN,kvarh,kvarh_IN,3;Blindenergie Lieferung (+R)
1,pm(.3.8.1)@1000,kvarh_IN_T1,kvarh,kvarh_IN_T1,3;Blindenergie Lieferung (+R) Tarif 1
1,pm(.3.8.2)@1000,kvarh_IN_T2,kvarh,kvarh_IN_T2,3;Blindenergie Lieferung (+R) Tarif 2
1,pm(.3.7.0)@1000,kvar_IN,kvar,kvar_IN,3;Momentane Blindleistung Lieferung (+R)
1,pm(4.8.0)@1000,kvarh_OUT,kvarh,kvarh_OUT,3;Blindenergie Bezug (-R)
1,pm(.4.8.1)@1000,kvarh_OUT_T1,kvarh,kvarh_OUT_T1,3;Blindenergie Bezug (-R) Tarif 1
1,pm(.4.8.2)@1000,kvarh_OUT_T2,kvarh,kvarh_OUT_T2,3;Blindenergie Bezug (-R) Tarif 2
1,pm(.4.7.0)@1000,kvar_OUT,kvar,kvar_OUT,3;Momentane Blindleistung Bezug (-R)

+2,16,r,0,2400,Haus
2,=so3,512
2,=so4,GUEK
2,pm(1.8.0)@1000,kWh_IN,kWh,kWh_IN,3;Wirkenergie Lieferung (+A)
2,pm(1.8.1)@1000,kWh_IN_T1,kWh,kWh_IN_T1,3;Wirkenergie Lieferung (+A) Tarif 1
2,pm(1.8.2)@1000,kWh_IN_T2,kWh,kWh_IN_T2,3;Wirkenergie Lieferung (+A) Tarif 2
2,pm(1.7.0)@1000,kW_IN,kW,kW_IN,3;Momentane Wirkleistung Lieferung (+A)
;2,pm(2.8.0)@1000,kWh_OUT,kWh,kWh_OUT,3;Wirkenergie Bezug (-A)
;2,pm(2.8.1)@1000,kWh_OUT_T1,kWh,kWh_OUT_T1,3;Wirkenergie Bezug (-A) Tarif 1
;2,pm(2.8.2)@1000,kWh_OUT_T2,kWh,kWh_OUT_T2,3;Wirkenergie Bezug (-A) Tarif 2
;2,pm(2.7.0)@1000,kW_OUT,kW,kW_OUT,3;Momentane Wirkleistung Bezug (-A)
2,pm(.3.8.0)@1000,kvarh_IN,kvarh,kvarh_IN,3;Blindenergie Lieferung (+R)
2,pm(3.8.1)@1000,kvarh_IN_T1,kvarh,kvarh_IN_T1,3;Blindenergie Lieferung (+R) Tarif 1
2,pm(3.8.2)@1000,kvarh_IN_T2,kvarh,kvarh_IN_T2,3;Blindenergie Lieferung (+R) Tarif 2
2,pm(3.7.0)@1000,kvar_IN,kvar,kvar_IN,3;Momentane Blindleistung Lieferung (+R)
2,pm(4.8.0)@1000,kvarh_OUT,kvarh,kvarh_OUT,3;Blindenergie Bezug (-R)
2,pm(4.8.1)@1000,kvarh_OUT_T1,kvarh,kvarh_OUT_T1,3;Blindenergie Bezug (-R) Tarif 1
2,pm(4.8.2)@1000,kvarh_OUT_T2,kvarh,kvarh_OUT_T2,3;Blindenergie Bezug (-R) Tarif 2
2,pm(4.7.0)@1000,kvar_OUT,kvar,kvar_OUT,3;Momentane Blindleistung Bezug (-R)
#
</code></pre></div> </details> <h3 id=landisgyr-e650-obis>Landis+Gyr E650 (OBIS)<a class=headerlink href=#landisgyr-e650-obis title="Permanent link">~</a></h3> <p>The script switches to a higher baud rate as the data set is pretty big and takes minutes to complete at 300 baud. The usable speed for my setup/hardware was 4800 baud.</p> <p>The script requires tasmota version 12+ so it supports variables.</p> <p>Switching to different baud rates requires changing the ack sequence 06303x300D0A, the baud rate in 2 places 4800-&gt;x and the case 200 (20x100ms) so the cycle can complete before restarting.</p> <details class=summary> <summary>View script</summary> <div class=highlight><pre><span></span><code>&gt;D
; Script needs v12+
res=0
scnt=0
&gt;F
;F section is executed every 100ms
scnt+=1
switch scnt
case 6
;set sml driver to 300 baud and send /?! as HEX to trigger the Meter
res=sml(1 0 300)
res=sml(1 1 &quot;2F3F210D0A&quot;)
;1800ms later \&gt; Send ACK and ask for switching to 4800 baud
case 18
res=sml(1 1 &quot;063034300D0A&quot;)
res=sml(1 0 4800)
case 200
; 20s later \&gt; restart sequence
scnt=0
ends      
&gt;M 1
+1,3,o,0,4800,data,1

1,1-1:1.8.0(@1,energy_import,kWh,1-8-0,1
1,1-1:2.8.0(@1,energy_export,kWh,2-8-0,1
1,1-1:36.7.0(@1,power_L1,kWh,36-7-0,2
1,1-1:56.7.0(@1,power_L2,kWh,56-7-0,2
1,1-1:76.7.0(@1,power_L3,kWh,76-7-0,2
1,1-1:31.7.0(@1,current_L1,A,31-7-0,2
1,1-1:51.7.0(@1,current_L2,A,51-7-0,2
1,1-1:71.7.0(@1,current_L3,A,71-7-0,2
1,1-1:16.7.0(@1,power_total,W,16-7-0,2
#
</code></pre></div> </details> <h3 id=logarex-lk11bl-obis>Logarex LK11BL (OBIS)<a class=headerlink href=#logarex-lk11bl-obis title="Permanent link">~</a></h3> <div class=highlight><pre><span></span><code>This script keeps optical communication on the initial 300 baud speed and reject to switch any other speed smart meter requests.

In my case, smart meter wanted to switch to 9600 baud but I felt it is better to follow the &#39;keep it simple&#39; principle at the script&#39;s level and use 300 baud through the whole communication.

If you know the meaning of the below unnamed OBIS codes please update the script.
</code></pre></div> <details class=summary> <summary>View script</summary> <div class=highlight><pre><span></span><code>&gt;D
&gt;B
=&gt;sensor53 r
&gt;M 1
+1,3,o,0,300,zm,1,100,2F3F210D0A,060000D0A

1,15.8.0(@1,total,kWh,total,3
1,0.0.0(@1,serial,,serial,0
1,F.F(@1,F.F,,F.F,0
1,C.8.0(@1,C.8.0,,C.8.0,0
1,0.2.0(@#),ver,,ver,3
1,0.3.0(@1,0.3.0,imp/kWh,0.3.0,0
1,.8.1(@1,.8.1,,.8.1,0
1,C.7.1(@1,C.7.1,,C.7.1,0
1,C.2.1(@1,C.2.1,,C.2.1,0
1,C.2.9(@1,C.2.9,,C.2.9,0
#
</code></pre></div> </details> <h3 id=logarex-lk13be-obis>Logarex LK13BE (OBIS)<a class=headerlink href=#logarex-lk13be-obis title="Permanent link">~</a></h3> <details class=summary> <summary>View script</summary> <div class=highlight><pre><span></span><code>&gt;D
&gt;B
=&gt;sensor53 r
&gt;M 1
+1,3,o,0,9600,LK13BE,13,30,2F3F210D0A,063035310D0A

1,1-0:1.8.0*255(@1,Gesamtverbrauch,kWh,total,4
1,1-0:1.8.0*96(@1,Verbrauch 1 Tag,kWh,total_1d,4
1,1-0:1.8.0*97(@1,Verbrauch 7 Tage,kWh,total_7d,4
1,1-0:1.8.0*98(@1,Verbrauch 30 Tage,kWh,total_30d,4
1,1-0:1.8.0*99(@1,Verbrauch 365 Tage,kWh,total_365d,4
1,1-0:16.7.0*255(@1,Verbrauch aktuell,W,power,20
#
</code></pre></div> </details> <h3 id=logarex-lk13be803039>Logarex LK13BE803039<a class=headerlink href=#logarex-lk13be803039 title="Permanent link">~</a></h3> <p>The Logarex LK13BE803039 does publish the data automatically. Do not poll this can lead to missreadings</p> <details class=summary> <summary>View script</summary> <div class=highlight><pre><span></span><code>&gt;D
&gt;B
=&gt;sensor53 r
&gt;M 1
+1,3,o,0,9600,LK13BE

1,1-0:1.8.0*255(@1,Gesamtverbrauch,kWh,total,4
1,1-0:1.8.0*96(@1,Verbrauch 1 Tag,kWh,total_1d,4
1,1-0:1.8.0*97(@1,Verbrauch 7 Tage,kWh,total_7d,4
1,1-0:1.8.0*98(@1,Verbrauch 30 Tage,kWh,total_30d,4
1,1-0:1.8.0*99(@1,Verbrauch 365 Tage,kWh,total_365d,4
1,1-0:16.7.0*255(@1,Verbrauch aktuell,W,current,20
1,1-0:2.8.0*255(@1,Gesamteinspeisung,kWh,total_out,4
#
</code></pre></div> </details> <h3 id=logarex-lk13be803319-obis>Logarex LK13BE803319 (OBIS)<a class=headerlink href=#logarex-lk13be803319-obis title="Permanent link">~</a></h3> <p>setupline for the HichiIR WiFi module (GPIO1: send, GPIO3: receive)</p> <details class=summary> <summary>View script</summary> <div class=highlight><pre><span></span><code>&gt;D
&gt;B
=&gt;sensor53 r
&gt;M 1
; setupline
+1,3,o,0,9600,LK13BE,1,30,2F3F210D0A,063035310D0A
; available without PIN, remove the semicolon the enable some optional values
; only one string (@#) can be decoded per meter
1,1-0:96.1.0*255(@#),Zählernummer,,id,0
;1,1-0:0.2.0*255(@#),Firmware,,fw,0
1,1-0:1.8.0*255(@1,Gesamtverbrauch,kWh,total,4
; available with PIN
1,1-0:1.8.0*96(@1,Verbrauch 1 Tag,kWh,total_1d,4
1,1-0:1.8.0*97(@1,Verbrauch 7 Tage,kWh,total_7d,4
1,1-0:1.8.0*98(@1,Verbrauch 30 Tage,kWh,total_30d,4
1,1-0:1.8.0*99(@1,Verbrauch 365 Tage,kWh,total_365d,4
1,1-0:1.8.0*100(@1,Verbrauch ab reset,kWh,total_reset,4
1,1-0:16.7.0*255(@1,Verbrauch aktuell,W,power,20
; available with PIN and full dataset enabled
1,1-0:32.7.0*255(@1,Spannung L1,V,voltage_l1,1
1,1-0:52.7.0*255(@1,Spannung L2,V,voltage_l2,1
1,1-0:72.7.0*255(@1,Spannung L3,V,voltage_l3,1
1,1-0:31.7.0*255(@1,Strom L1,A, amperage_l1,1
1,1-0:51.7.0*255(@1,Strom L2,A, amperage_l2,1
1,1-0:71.7.0*255(@1,Strom L3,A, amperage_l3,1
1,1-0:81.7.1*255(@1,UL2 zu UL1,deg,angle_ul2_ul1,0
1,1-0:81.7.2*255(@1,UL3 zu UL1,deg,angle_ul3_ul1,0
1,1-0:81.7.4*255(@1,IL1 zu UL1,deg,angle_il1_ul1,0
1,1-0:81.7.15*255(@1,IL2 zu UL2,deg,angle_il2_ul2,0
1,1-0:81.7.26*255(@1,IL3 zu UL3,deg,angle_il2_ul3,0
1,1-0:14.7.0*255(@1,Frequenz,Hz,frequency,1
#
</code></pre></div> </details> <h3 id=logarex-lk13be-sml-lk13be904639>Logarex LK13BE (SML) (LK13BE904639)<a class=headerlink href=#logarex-lk13be-sml-lk13be904639 title="Permanent link">~</a></h3> <p>This meter does not provide detailed information regarding phase etc.</p> <details class=summary> <summary>View script</summary> <div class=highlight><pre><span></span><code>&gt;D
&gt;B
=&gt;sensor53 r
; Monitor Sensor at GPIO25
=&gt;sensor53 l25
&gt;M 1
+1,3,s,0,9600,LK13BE,1,10,2F3F210D0A,063035310D0A

1,77070100010800ff@1000,Energie gesamt,kWh,energy_sum,3 
1,77070100010801ff@1000,Energie Tarif 1,kWh,energy_tarif1,3 
1,77070100010802ff@1000,Energie Tarif 2,kWh,energy_tarif2,3
1,77070100020800ff@1000,Einspeisung,kWh,energy_supply,3
1,=h --------------
1,77070100100700ff@1,Leistung,W,power,16
1,=h --------------
1,77070100600100ff@#,Server ID,,meter_number,0
#
</code></pre></div> </details> <h3 id=logarex-lk13be-sml-eg-lk13be6067x9>Logarex LK13BE (SML) (e.g. LK13BE6067x9)<a class=headerlink href=#logarex-lk13be-sml-eg-lk13be6067x9 title="Permanent link">~</a></h3> <details class=summary> <summary>View script</summary> <div class=highlight><pre><span></span><code>&gt;D
&gt;B
-&gt;sensor53 r
&gt;M 1
+1,3,s,0,9600,LK13BE,1,10,2F3F210D0A,063035310D0A

1,77070100010800ff@1000,Gesamt kWh bezogen,kWh,Power_total_in,1
1,77070100020800ff@1000,Gesamt kWh geliefert,kWh,Power_total_out,1
1,77070100100700ff@1,Verbrauch aktuell,W,Power_curr,0
1,77070100240700ff@1,Power L1,W,Power_L1_curr,0
1,77070100380700ff@1,Power L2,W,Power_L2_curr,0
1,770701004C0700ff@1,Power L3,W,Power_L3_curr,0
1,77070100200700ff@1,Voltage L1,V,Volt_L1_curr,1
1,77070100340700ff@1,Voltage L2,V,Volt_L2_curr,1
1,77070100480700ff@1,Voltage L3,V,Volt_L3_curr,1
1,770701001f0700ff@1,Amperage L1,A,Amperage_L1_curr,2
1,77070100330700ff@1,Amperage L2,A,Amperage_L2_curr,2
1,77070100470700ff@1,Amperage L3,A,Amperage_L3_curr,2
1,770701000e0700ff@1,Frequency,Hz,HZ,2
1,77070100510704ff@1,Phaseangle I-L1/U-L1,deg,phase_angle_p1,1 
1,7707010051070fff@1,Phaseangle I-L2/I-L2,deg,phase_angle_p2,1  
1,7707010051071aff@1,Phaseangle I-L3/I-L3,deg,phase_angle_p3,1 
1,77070100510701ff@1,Phase angle U-L2/U-L1,deg,phase_angle_l2_l1,1
1,77070100510702ff@1,Phase angle U-L3/U-L1,deg,phase_angle_l3_l1,1
#
</code></pre></div> </details> <h3 id=metcom-mcs301>MetCom MCS301<a class=headerlink href=#metcom-mcs301 title="Permanent link">~</a></h3> <p>Reading the data (at 300 baud!) takes longer than a minute!</p> <details class=summary> <summary>View script</summary> <div class=highlight><pre><span></span><code>&gt;D
&gt;B
-&gt;sensor53 r
&gt;M 1
+1,3,o,0,300,H37,1,600,2F3F210D0A,063030300D0A
1,0.0.0(@1),Counter number,,znr,0
1,0.0.1(@#),Counter ID,,zid,0
1,1.7.0(@0.001,Import Act. Power,W,pimport,1
1,1.6.1(@0.001,Import Act. Max. Power,Wpeak,maximport,1
1,1.8.0(@0.001,Import Act. Energy,Wh,import,1
1,1.8.1(@0.001,Import Act. Energy Tar.1,Wh,importht,1
1,1.8.2(@0.001,Import Act. Energy Tar.2 NT,Wh,importnt,1
1,2.7.0(@0.001,Export Act. Power,W,pexport,1
1,2.6.1(@0.001,Export Act. Max. Power,Wpeak,maxexport,1
1,2.8.0(@0.001,Export Act. Energy,Wh,export,1
1,2.8.1(@0.001,Export Act. Energy Tar.1,Wh,exportht,1
1,2.8.2(@0.001,Export Act. Energy Tar.2,Wh,exportnt,1
1,31.7.0(@1,Current L1,A,il1,3
1,51.7.0(@1,Current L2,A,il2,3
1,51.7.0(@1,Current L3,A,il3,3
1,32.7.0(@1,Voltage L1,V,ul1,2
1,52.7.0(@1,Voltage L2,V,ul2,2
1,52.7.0(@1,Voltage L3,V,ul3,2
1,14.7.0(@0.001,Frequency,Hz,freq,2
#
</code></pre></div> </details> <h3 id=pafal-20ec3gr>PAFAL 20EC3gr<a class=headerlink href=#pafal-20ec3gr title="Permanent link">~</a></h3> <p>Documentation for this Counter is very small. This informations were collected across the internet.</p> <details class=summary> <summary>View script</summary> <div class=highlight><pre><span></span><code>&gt;D
&gt;B
-&gt;sensor53 r
&gt;M 1
+1,3,o,0,300,PAFAL,1,30,2F3F210D0A,063030300D0A
1,1.8.1*00(@1),Gesamtverbrauch_HT,kWh,Total_IN,2
1,1.8.2*00(@1),Gesamtverbrauch_NT,kWh,Total_IN,2
1,2.8.0*00(@1),Einspeisung,kWh,Total_OUT,2
#
</code></pre></div> </details> <details class=summary> <summary>Dump of the script</summary> <div class=highlight><pre><span></span><code>15:48:40.855 : �H/PAF5EC3gr00006
15:48:45.643 : �0.0.0(serialnumber)
15:48:46.260 : 0.0.1(PAF)
15:48:46.768 : F.F(00)
15:48:47.405 : 0.2.0(1.27)
15:48:48.314 : 1.8.1*00(071354.27)
15:48:49.228 : 1.8.2*00(070726.91)
15:48:50.149 : 2.8.0*00(013640.33)
15:48:52.730 : C.2.1(000000000000)(                                                )
15:48:53.542 : 0.2.2(:::::G11)!
</code></pre></div> </details> <h3 id=peacefair-pzem004tv30-modbus>Peacefair PZEM004TV30 (MODBus)<a class=headerlink href=#peacefair-pzem004tv30-modbus title="Permanent link">~</a></h3> <p>PZEM004T V30 multiple meters on Modbus</p> <details class=summary> <summary>View script</summary> <div class=highlight><pre><span></span><code>&gt;D
&gt;B
-&gt;sensor53 r
&gt;M 1
+1,3,m,0,9600,ENERGY,1,1,02040000,02040001,02040003,02040005,02040007,02040008,03040000,03040001,03040003,03040005,03040007,03040008,05040000,05040001,05040003,05040005,05040007,05040008
1,=h&lt;hr/&gt;Sensor-2
1,020404UUuuxxxxxxxx@i0:10,Voltage,V,Sensor-1-V,2
1,020404UUuuUUuusxxxx@i1:1000,Current,A,Sensor-1-A,2
1,020404UUuuUUuusxxxx@i2:10,Power,W,Sensor-1-W,2
1,020404UUuuUUuusxxxx@i3:1000,Energy,kWh,Sensor-1-kWh,4
1,020404UUuuxxxxxxxx@i4:10,Frequency,Hz,Sensor-1-hz,2
1,020404UUuuxxxxxxxx@i5:100,Power Factor,PF,Sensor-1-PF,2
1,=h&lt;hr/&gt;Sensor-3
1,030404UUuuxxxxxxxx@i6:10,Voltage,V,Sensor-2-V,2
1,030404UUuuUUuusxxxx@i7:1000,Current,A,Sensor-2-A,2
1,030404UUuuUUuusxxxx@i8:10,Power,W,Sensor-2-W,2
1,030404UUuuUUuusxxxx@i9:1000,Energy,kWh,Sensor-2-kWh,4
1,030404UUuuxxxxxxxx@i10:10,Frequency,Hz,Sensor-2-hz,2
1,030404UUuuxxxxxxxx@i11:100,Power Factor,PF,Sensor-2-PF,2
1,=h&lt;hr/&gt;Sensor-5
1,050404UUuuxxxxxxxx@i12:10,Voltage,V,Sensor-05-V,2
1,050404UUuuUUuusxxxx@i13:1000,Current,A,Sensor-05-A,2
1,050404UUuuUUuusxxxx@i14:10,Power,W,Sensor-05-W,2
1,050404UUuuUUuusxxxx@i15:1000,Energy,kWh,Sensor-05-kWh,4
1,050404UUuuxxxxxxxx@i16:10,Frequency,Hz,Sensor-05-hz,2
1,050404UUuuxxxxxxxx@i17:100,Power Factor,PF,Sensor-05-PF,2

#
</code></pre></div> </details> <h3 id=peacefair-pzem004tv40-modbus>Peacefair PZEM004TV4.0 (MODBus)<a class=headerlink href=#peacefair-pzem004tv40-modbus title="Permanent link">~</a></h3> <p>PZEM004T V4.0 multiple meters on Modbus</p> <details class=summary> <summary>View script</summary> <div class=highlight><pre><span></span><code>&gt;D
&gt;B
-&gt;sensor53 r
&gt;M 1
+1,3,m,0,9600,modbus,1,3,r010400000009,r020400000009,r030400000009
1,010412UUuu@i0:10,Voltage,V,Volt_2,1
1,010412x2UUuuUUuus@i0:1000,Current,A,Curr_1,3
1,010412x6UUuuUUuus@i0:10,Power,W,Pow_1,1
1,010412x14UUuu@i0:10,Frequency,Hz,Freq_1,1
1,010412x16UUuu@i0:100,Power Factor,PF,PF_1,2
1,020412UUuu@i1:10,Voltage,V,Volt_2,1
1,020412x2UUuuUUuus@i1:1000,Current,A,Curr_2,3
1,020412x6UUuuUUuus@i1:10,Power,W,Pow_2,1
1,020412x14UUuu@i1:10,Frequency,Hz,Freq_2,1
1,020412x16UUuu@i1:100,Power Factor,PF,PF_2,2
1,030412UUuu@i2:10,Voltage,V,Volt_3,1
1,030412x2UUuuUUuus@i2:1000,Current,A,Curr_3,3
1,030412x6UUuuUUuus@i2:10,Power,W,Pow_3,1
1,030412x14UUuu@i2:10,Frequency,Hz,Freq_3,1
1,030412x16UUuu@i2:100,Power Factor,PF,PF_3,2
#
</code></pre></div> </details> <h3 id=resol-deltasol-bs-plus-vbus>Resol Deltasol BS Plus (VBus)<a class=headerlink href=#resol-deltasol-bs-plus-vbus title="Permanent link">~</a></h3> <p>This is a controller for standard solar thermal systems equipped with VBus data interface. Outputs data every second at 9600 baud 8N1. To connect to this and read data from the bus a level shifting is needed as the voltage is around 8V. Although this is a symmetric connection supporting long wires for our purposes it's enough to measure its polarity with a voltmeter and adapt the level appropriately to 3.3V using the below circuit (many others exist but this is simple and works). Do not connect the GND pin of Wemos with the ground of Resol unit as that may damage the output port of it. The Wemos module needs its own power supply (double insulated recommended). </p> <p><img alt src=../_media/Resol_VBus_adaptor_to_WemosD1Mini.png></p> <details class=summary> <summary>The script (compile firmware with <code>SML_REPLACE_VARS</code>)</summary> <div class=highlight><pre><span></span><code>&gt;D
r=&quot;1,AA100021421000010774&quot;
&gt;B
=&gt;sensor53 r
&gt;M 1
+1,3,v,0,9600,Solar
%r%vo12ut@#,time,,zeit,1
%r%vo0sw@10,S1 COL,°C,sens1,1
%r%vo2sw@10,S2 TST1,°C,sens2,1
%r%vo4sw@10,S3 TST2,°C,sens3,1
%r%vo6sw@10,S4 TR,°C,sens4,1
%r%vo10ub@b0:1,R1 PUMP,,relay1,0
%r%vo10ub@b1:1,R2 VALVE,,relay2,0
%r%vo8ub@1,Pump1 speed,%%,pump1,0
%r%vo9ub@1,Pump2 speed,%%,pump2,0
%r%vo20uw@1,p1,Wh,p1,0
%r%vo22uw@1,p1000,Wh,p2,0
%r%vo24uw@1,p1000000,Wh,p3,0
%r%vo15ub@b0:1,Col Max,,col1,0
%r%vo15ub@b1:1,Col Min,,col2,0
%r%vo15ub@b2:1,Col Frost,,col3,0
%r%vo15ub@b3:1,Col Opt,,col4,0
%r%vo15ub@b4:1,Col Rueck,,col5,0
%r%vo15ub@b5:1,Col WMZ,,col6,0
#
</code></pre></div> </details> <h3 id=sanxing-sx6x1-sxxu1x-ascii-obis>Sanxing SX6x1 (SxxU1x) (Ascii OBIS)<a class=headerlink href=#sanxing-sx6x1-sxxu1x-ascii-obis title="Permanent link">~</a></h3> <p>Tested on SX631 (S34U18). Needs an RJ12 cable and a small adaptor circuit: <img alt src=../_media/p1-smartmeter/p1-smartmeter_v2.png> (Note how power for the Wemos module is drawn directly from the meter. No external power supply needed)</p> <p>This meter sends bursts of data at 115200 baud every 10 seconds. Some data lines exceed 1038 characters. To adapt to these conditions, compile firmware with: <div class=highlight><pre><span></span><code><span class=cp>#define SML_BSIZ 1060</span>
<span class=cp>#define MAX_METERS 1</span>
<span class=cp>#define TMSBSIZ 2048</span>
<span class=cp>#define USE_SML_SCRIPT_CMD</span>
<span class=cp>#define SML_REPLACE_VARS</span>
</code></pre></div></p> <details class=summary> <summary>View script</summary> <div class=highlight><pre><span></span><code>&gt;D
r=&quot;1,0-0:98.1.0(@(&quot;
;use a variable to store the decode string
&gt;B
smlj=0
;don&#39;t send teleperiod MQTT at boot, because we can have 0 values (meter didn&#39;t send data yet)
-&gt;sensor53 r
&gt;R
smlj=0
;don&#39;t send teleperiod MQTT at script restart, because we can have 0 values (meter didn&#39;t send data yet)
&gt;S
if upsecs&gt;22
then
smlj|=1
endif
;only send teleperiod MQTT if 22 seconds passed since boot (during this time meter most probably sent data)
&gt;M 1
+1,3,o,16,115200,Name,1
1,1-0:32.7.0(@1,L1 Voltage,V,volts_l1,1
1,1-0:52.7.0(@1,L2 Voltage,V,volts_l2,1
1,1-0:72.7.0(@1,L3 Voltage,V,volts_l3,1
1,1-0:14.7.0(@1,Frequency,Hz,freq,2
1,0-0:96.14.0(@1,Current tariff,,tariff,0
1,=h&lt;hr/&gt;
1,1-0:1.8.0(@1,Energy import,kWh,enrg_imp,3
1,1-0:2.8.0(@1,Energy export,kWh,enrg_exp,3
1,1-0:1.8.1(@1,Energy import T1,kWh,enrg_imp_t1,3
1,1-0:1.8.2(@1,Energy import T2,kWh,enrg_imp_t2,3
1,1-0:2.8.1(@1,Energy export T1,kWh,enrg_exp_t1,3
1,1-0:2.8.2(@1,Energy export T2,kWh,enrg_exp_t2,3
1,1-0:1.7.0(@1,Power import,kW,pwr_imp,3
1,1-0:2.7.0(@1,Power export,kW,pwr_exp,3
1,1-0:13.7.0(@1,Power factor,,factor,3
1,=h&lt;hr/&gt;
1,1-0:3.8.0(@1,Reactive nrg import,kvarh,nrg_reac_imp,3
1,1-0:4.8.0(@1,Reactive nrg export,kvarh,nrg_reac_exp,3
1,1-0:5.8.0(@1,Reactive energy QI,kvarh,nrg_reac_q1,3
1,1-0:6.8.0(@1,Reactive energy QII,kvarh,nrg_reac_q2,3
1,1-0:7.8.0(@1,Reactive energy QIII,kvarh,nrg_reac_q3,3
1,1-0:8.8.0(@1,Reactive energy QIV,kvarh,nrg_reac_q4,3
1,1-0:5.7.0(@1,Reactive power QI,kvar,pwr_reac_q1,3
1,1-0:6.7.0(@1,Reactive power QII,kvar,pwr_reac_q2,3
1,1-0:7.7.0(@1,Reactive power QIII,kvar,pwr_reac_q3,3
1,1-0:8.7.0(@1,Reactive power QIV,kvar,pwr_reac_q4,3
1,=h&lt;hr/&gt;
1,=hPrevious month stats:
%r%1:1,Energy import,kWh,mo_enrg_imp,3
%r%2:1,Energy import T1,kWh,mo_enrg_impt1,3
%r%3:1,Energy import T2,kWh,mo_enrg_impt2,3
%r%4:1,Energy export,kWh,mo_enrg_exp,3
%r%5:1,Energy export T1,kWh,mo_enrg_expt1,3
%r%6:1,Energy export T2,kWh,mo_enrg_expt2,3
%r%7:1,Reactive nrg import,kvarh,mo_nrg_reac_imp,3
%r%8:1,Reactive nrg export,kvarh,mo_nrg_reac_exp,3
%r%9:1,Reactive energy QI,kvarh,mo_nrg_reac_q1,3
%r%10:1,Reactive energy QII,kvarh,mo_nrg_reac_q2,3
%r%11:1,Reactive energy QIII,kvarh,mo_nrg_reac_q3,3
%r%12:1,Reactive energy QIV,kvarh,mo_nrg_reac_q4,3
%r%13:1,Reactive energy SUM?,kvarh,mo_nrg_reac_sum,3
%r%14:1,Peak power import L1,kW,mo_pw_pk_in_l1,3
%r%15:1,Peak power import L2,kW,mo_pw_pk_in_l2,3
%r%16:1,Peak power import L3,kW,mo_pw_pk_in_l3,3
%r%17:1,Peak power export L1,kW,mo_pw_pk_ex_l1,3
%r%18:1,Peak power export L2,kW,mo_pw_pk_ex_l2,3
%r%19:1,Peak power export L3,kW,mo_pw_pk_ex_l3,3
#
</code></pre></div> </details> <details class=info> <summary>Sample data</summary> <div class=highlight><pre><span></span><code>/1234567890123

0-0:1.0.0(202056789012W)
0-0:42.0.0(AUX1234567890123)
0-0:96.1.0(1234567890)
0-0:96.14.0(0001)
0-0:96.50.68(ON)
0-0:17.0.0(90.000*kW)
1-0:1.8.0(000258.072*kWh)
1-0:1.8.1(000103.782*kWh)
1-0:1.8.2(000154.290*kWh)
1-0:1.8.3(000000.000*kWh)
1-0:1.8.4(000000.000*kWh)
1-0:2.8.0(000048.367*kWh)
1-0:2.8.1(000032.813*kWh)
1-0:2.8.2(000015.554*kWh)
1-0:2.8.3(000000.000*kWh)
1-0:2.8.4(000000.000*kWh)
1-0:3.8.0(000003.513*kvarh)
1-0:4.8.0(000156.910*kvarh)
1-0:5.8.0(000003.498*kvarh)
1-0:6.8.0(000000.015*kvarh)
1-0:7.8.0(000027.718*kvarh)
1-0:8.8.0(000129.192*kvarh)
1-0:15.8.0(000306.440*kWh)
1-0:32.7.0(233.0*V)
1-0:52.7.0(230.6*V)
1-0:72.7.0(228.7*V)
1-0:31.7.0(002*A)
1-0:51.7.0(002*A)
1-0:71.7.0(001*A)
1-0:13.7.0(0.758)
1-0:33.7.0(0.615)
1-0:53.7.0(0.746)
1-0:73.7.0(0.937)
1-0:14.7.0(49.98*Hz)
1-0:1.7.0(00.000*kW)
1-0:2.7.0(00.854*kW)
1-0:5.7.0(00.000*kvar)
1-0:6.7.0(00.000*kvar)
1-0:7.7.0(00.735*kvar)
1-0:8.7.0(00.000*kvar)
0-0:98.1.0(210301000000W)(000249.070*kWh)(000100.816*kWh)(000148.254*kWh)(000047.903*kWh)(000032.349*kWh)(000015.554*kWh)(000003.513*kvarh)(000150.665*kvarh)(000003.498*kvarh)(000000.015*kvarh)(000027.119*kvarh)(000123.546*kvarh)(000296.974*kWh)(04.872*kW)(04.872*kW)(04.072*kW)(01.844*kW)(01.672*kW)(01.844*kW)
0-0:96.13.0(����������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������)
!DA6A
</code></pre></div> </details> <h3 id=sbc-ale3-modbus>SBC ALE3 (MODBus)<a class=headerlink href=#sbc-ale3-modbus title="Permanent link">~</a></h3> <details class=summary> <summary>View script</summary> <div class=highlight><pre><span></span><code>&gt;DH
&gt;B
-&gt;sensor53 r
&gt;M 1
+1,3,M,1,9600,SBC,1,1,02030023,02030028,0203002d,02030025,0203002a,0203002f,02030032,02030027,0203002c,02030031,02030021,02030015,02030018
1,020304UUuu@i0:1,Spannung L1,V,Voltage_L1,0
1,020304UUuu@i1:1,Spannung L2,V,Voltage_L2,0
1,020304UUuu@i2:1,Spannung L3,V,Voltage_L3,0
1,020304xxxxUUuu@i0:10,Strom L1,A,Current_L1,2
1,020304xxxxUUuu@i1:10,Strom L2,A,Current_L2,2
1,020304xxxxUUuu@i2:10,Strom L3,A,Current_L3,2
1,=h=
1,020304UUuu@i3:100,Leistung L1,kW,Power_L1,3
1,020304UUuu@i4:100,Leistung L2,kW,Power_L2,3
1,020304UUuu@i5:100,Leistung L3,kW,Power_L3,3
1,020304UUuu@i6:100,Leistung Total,kW,Power_Total,3
1,020304xxxxSSss@i3:100,BlindLeistung L1,kVAr,ReaktivePower_L1,3
1,020304xxxxSSss@i4:100,BlindLeistung L2,kVAr,ReaktivePower_L2,3
1,020304xxxxSSss@i5:100,BlindLeistung L3,kVAr,ReaktivePower_L3,3
1,020304xxxxSSss@i6:100,BLeistung Total,kVAr,ReaktivePower_Total,3
1,=h=
1,020304UUuu@i7:100,CosPhi L1,,CosPhi_L1,2
1,020304UUuu@i8:100,CosPhi L2,,CosPhi_L2,2
1,020304UUuu@i9:100,CosPhi L3,,CosPhi_L3,2
1,=h=
1,020304UUuuUUuu@i10:100,T2 Wert,kWh,T2_Value,2
#
</code></pre></div> </details> <h3 id=sbc-ale3-2x-modbus>SBC ALE3 2x (MODBus)<a class=headerlink href=#sbc-ale3-2x-modbus title="Permanent link">~</a></h3> <details class=summary> <summary>View script</summary> <div class=highlight><pre><span></span><code>&gt;D
&gt;B
-&gt;sensor53 r
&gt;M 1
+1,3,M,1,9600,Meter,1,1,01030023,01030028,0103002d,01030025,0103002a,0103002f,01030032,01030027,0103002c,01030031,0103001B,0103001d,03030023,03030028,0303002d,03030025,0303002a,0303002f,03030032,03030027,0303002c,03030031,0303001B,0303001d
1,=h Domestic Electricity:
1,010304UUuuUUuu@i10:100,1 Tariff 1 total,kWh,M1_T1_total,2
1,010304UUuuUUuu@i11:100,1 Tariff 1 partial,kWh,M1_T1_par,2
1,=h Readings:
1,010304UUuu@i0:1,1 Voltage L1,V,M1_Voltage_L1,0
1,010304UUuu@i1:1,1 Voltage L2,V,M1_Voltage_L2,0
1,010304UUuu@i2:1,1 Voltage L3,V,M1_Voltage_L3,0
1,010304xxxxUUuu@i0:10,1 Current L1,A,M1_Current_L1,2
1,010304xxxxUUuu@i1:10,1 Current L2,A,M1_Current_L2,2
1,010304xxxxUUuu@i2:10,1 Current L3,A,M1_Current_L3,2
1,010304UUuu@i3:100,1 Active Power L1,kW,M1_PRMS_L1,3
1,010304UUuu@i4:100,1 Active Power L2,kW,M1_PRMS_L2,3
1,010304UUuu@i5:100,1 Active Power L3,kW,M1_PRMS_L3,3
1,010304UUuu@i6:100,1 Active Power total,kW,M1_PRMS_total,3
1,010304xxxxSSss@i3:100,1 Reactive Power L1,kVAr,M1_QRMS_L1,3
1,010304xxxxSSss@i4:100,1 Reactive Power L2,kVAr,M1_QRMS_L2,3
1,010304xxxxSSss@i5:100,1 Reactive Power L3,kVAr,M1_QRMS_L3,3
1,010304xxxxSSss@i6:100,1 Reactive Power total,kVAr,M1_QRMS_total,3
1,010304UUuu@i7:100,1 CosPhi L1,,M1_CosPhi_L1,2
1,010304UUuu@i8:100,1 CosPhi L2,,M1_CosPhi_L2,2
1,010304UUuu@i9:100,1 CosPhi L3,,M1_CosPhi_L3,2
1,=h________________________________________________
; meter 2 +12 offset
1,=h Heat Pump
1,030304UUuuUUuu@i22:100,2 Tariff 1 total,kWh,M2_T1_total,2
1,030304UUuuUUuu@i23:100,2 Tariff 1 partial,kWh,M2_T1_par,2
1,=h Readings:
1,030304UUuu@i12:1,2 Voltage L1,V,M2_Voltage_L1,0
1,030304UUuu@i13:1,2 Voltage L2,V,M2_Voltage_L2,0
1,030304UUuu@i14:1,2 Voltage L3,V,M2_Voltage_L3,0
1,030304xxxxUUuu@i12:10,2 Current L1,A,M2_Current_L1,2
1,030304xxxxUUuu@i13:10,2 Current L2,A,M2_Current_L2,2
1,030304xxxxUUuu@i14:10,2 Current L3,A,M2_Current_L3,2
1,030304UUuu@i15:100,2 Active Power L1,kW,M2_PRMS_L1,3
1,030304UUuu@i16:100,2 Active Power L2,kW,M2_PRMS_L2,3
1,030304UUuu@i17:100,2 Active Power L3,kW,M2_PRMS_L3,3
1,030304UUuu@i18:100,2 Active Power total,kW,M2_PRMS_total,3
1,030304xxxxSSss@i15:100,2 Reactive Power L1,kVAr,M2_QRMS_L1,3
1,030304xxxxSSss@i16:100,2 Reactive Power L2,kVAr,M2_QRMS_L2,3
1,030304xxxxSSss@i16:100,2 Reactive Power L3,kVAr,M2_QRMS_L3,3
1,030304xxxxSSss@i18:100,2 Reactive Power total,kVAr,M2_QRMS_total,3
1,030304UUuu@i19:100,2 CosPhi L1,,M2_CosPhi_L1,2
1,030304UUuu@i20:100,2 CosPhi L2,,M2_CosPhi_L2,2
1,030304UUuu@i21:100,2 CosPhi L3,,M2_CosPhi_L3,2
#
</code></pre></div> </details> <h3 id=schneider-iem3150-modbus>Schneider iEM3150 (MODBus)<a class=headerlink href=#schneider-iem3150-modbus title="Permanent link">~</a></h3> <p>Set device parity to EVEN. Set device serial baud rate to 9600.</p> <details class=summary> <summary>View script</summary> <div class=highlight><pre><span></span><code>&gt;D
&gt;B
=&gt;sensor53 r

&gt;M 1
+1,3,M,0,9600,MODBUS,1,1,0103B02B,01030BB7,01030BB9,01030BBB,01030BC1,01030BCB,01030BCD,01030BCF,01030BD1,01030BD3,01030BD5,01030BD7,01030BDB,01030BED,01030BEF,01030BF1,01030BF3,01030C0B,01030C25
; ***************************************
; *   Schneider iEM3150 Energy Meter    *
; ***************************************
; Serial: 9600
; Device parity: EVEN
; Slave address: 0x01
; ***************************************
1,010304ffffffff@i0:1,Wirkenergie,kWh,1_8_0,3
1,010304ffffffff@i1:1,Strom L1,A,31_7_0,3
1,010304ffffffff@i2:1,Strom L2,A,51_7_0,3
1,010304ffffffff@i3:1,Strom L3,A,71_7_0,3
1,010304ffffffff@i4:1,Strom Avg,A,11_7_0,3
1,010304ffffffff@i5:1,Spannung L1-L2,V,V_L1-L2,3
1,010304ffffffff@i6:1,Spannung L2-L3,V,V_L2-L3,3
1,010304ffffffff@i7:1,Spannung L3-L1,V,V_L3-L1,3
1,010304ffffffff@i8:1,Spannung L-L,V,V_L-L_sum,3
1,010304ffffffff@i9:1,Spannung L1-N,V,32_7_0,3
1,010304ffffffff@i10:1,Spannung L2-N,V,52_7_0,3
1,010304ffffffff@i11:1,Spannung L3-N,V,72_7_0,3
1,010304ffffffff@i12:1,Spannung L-N,V,12_7_0,3
1,010304ffffffff@i13:1,Wirkleistung L1,kW,21_7_0,3
1,010304ffffffff@i14:1,Wirkleistung L2,kW,41_7_0,3
1,010304ffffffff@i15:1,Wirkleistung L3,kW,61_7_0,3
1,010304ffffffff@i16:1,Wirkleistung,kW,1_7_0,3
1,010304ffffffff@i17:1,Leistungsfaktor,,13_7_0,3
1,010304ffffffff@i18:1,Frequenz,Hz,14_7_0,3
#
</code></pre></div> </details> <h3 id=schneider-iem3155-modbus>Schneider iEM3155 (MODBus)<a class=headerlink href=#schneider-iem3155-modbus title="Permanent link">~</a></h3> <p>Set device parity to NONE</p> <details class=summary> <summary>View script</summary> <div class=highlight><pre><span></span><code>&gt;D  
&gt;B  
-&gt;sensor53 r
&gt;M 1  
+1,3,m,0,19200,iEM3155,1,1,0103B02D,0103B02B,01030BF3,01030BED,01030BEF,01030BF1,01030BD3,01030BD5,01030BD7,01030BB7,01030BB9,01030BBB,01030C0B,01030C25
; ***************************************
; *   Schneider iEM3155 Energy Meter    *
; ***************************************
; Serial: 19200
; Set device parity to NONE
; Slave address: 0x01
; https://download.schneider-electric.com/files?p_Doc_Ref=DOCA0005EN&amp;p_enDocType=User+guide&amp;p_File_Name=DOCA0005EN-13.pdf
1,010304ffffffff@i0:1,Gesamteinspeisung,kWh,Gesamteinspeisung,0
1,010304ffffffff@i1:1,Gesamtverbrauch,kWh,Gesamtverbrauch,0
1,010304ffffffff@i2:0.001,Momentanverbrauch,W,Momentanverbrauch,0
1,010304ffffffff@i3:1,L1 Wirkenergie,kW,L1Wirkenergie,3
1,010304ffffffff@i4:1,L2 Wirkenergie,kW,L2Wirkenergie,3
1,010304ffffffff@i5:1,L3 Wirkenergie,kW,L3Wirkenergie,3
1,010304ffffffff@i6:1,L1 Spannung,V,L1Spannung,0
1,010304ffffffff@i7:1,L2 Spannung,V,L2Spannung,0
1,010304ffffffff@i8:1,L3 Spannung,V,L3Spannung,0
1,010304ffffffff@i9:1,L1 Strom,A,L1Strom,2
1,010304ffffffff@i10:1,L2 Strom,A,L2Strom,2
1,010304ffffffff@i11:1,L3 Strom,A,L3Strom,2
1,010304ffffffff@i12:1,Leistungsfaktor,,Leistungsfaktor,2
1,010304ffffffff@i13:1,Frequenz,Hz,Frequenz,0
#
</code></pre></div> </details> <h3 id=sdm230-modbus>SDM230 (MODBus)<a class=headerlink href=#sdm230-modbus title="Permanent link">~</a></h3> <details class=summary> <summary>View script</summary> <div class=highlight><pre><span></span><code>&gt;D  
ms=&quot;1,010404ffffffff@&quot;  
&gt;B  
-&gt;sensor53 r  
&gt;M 1  
+1,3,m,0,9600,PV,1,2,01040000,01040006,0104000C,01040012,01040018,0104001E,01040024,01040046,01040048,0104004A,0104004C,0104004E,01040054,01040056,01040058,0104005A,0104005C,0104005E,01040102,01040108,01040152,01040158,01040180,01040182  
%ms%i0:1,Volt,V,Volt,2  
%ms%i1:1,Strom P1,A,Strom,3  
%ms%i2:1,*,W,Leistung,2  
%ms%i3:1,Scheinleistung,VA,ScheinLeistung,2  
%ms%i4:1,Blindleistung,VAr,Blindleistung,2  
%ms%i5:1,P-Faktor,,P_Faktor,1  
%ms%i6:1,cosPhi,°,cosPhi,2  
%ms%i7:1,Frequenz,Hz, Frequenz,1  
%ms%i8:1,Wirkleistung Import,kWh,Wirkleistung_Im1,3  
%ms%i9:1,Wirkleistung Export,kWh,Wirkleistung_Ex,3  
%ms%i10:1,Blindleistung Import,VkkVARh,Blindleistung_Im,3  
%ms%i11:1,Blindleistung Export,VkkVARh,Blindleistung_Ex,3  
%ms%i12:1,Gesamtleistungsbedarf,W,GesLeistBed,2  
%ms%i13:1,GesamtLeistung Max,W,GesLeistMax,2  
%ms%i14:1,Akt.Nachfrage,W,AktNachfrage,2  
%ms%i15:1,Rückleistungs Bed,W,RueckLeistBed,2  
%ms%i16:1,Rückleistungs Bed Max,W,RueckLeistBedMax,2  
%ms%i17:1,Strom Nachfrage,A,StromNachfrage2,2  
%ms%i19:1,Max Strombedarf,A,StromBedMax,2  
%ms%i20:1,Wirkleistung Gesamt,kWh,Wirkleistung_total,2  
%ms%i21:1,Blindleistung Gesamt,kVARh,Blindleistung_total,2  
%ms%i22:1,Temp Gesamtleistung,kWh,TempGesamtLeist,2  
#  
</code></pre></div> </details> <h3 id=sdm530-modbus>SDM530 (MODBus)<a class=headerlink href=#sdm530-modbus title="Permanent link">~</a></h3> <details class=summary> <summary>View script</summary> <div class=highlight><pre><span></span><code>&gt;D  
&gt;B  
-&gt;sensor53 r
&gt;M 1  
+1,3,m,0,9600,MODBUS,1,1,01040000,01040002,01040004,01040006,01040008,0104000a,0104000c,0104000e,01040010  
1,010404ffffffff@i0:1,Voltage P1,V,Voltage_P1,2  
1,010404ffffffff@i1:1,Voltage P2,V,Voltage_P2,2  
1,010404ffffffff@i2:1,Voltage P3,V,Voltage_P3,2  
1,010404ffffffff@i3:1,Current P1,A,Current_P1,2  
1,010404ffffffff@i4:1,Current P2,A,Current_P2,2  
1,010404ffffffff@i5:1,Current P3,A,Current_P3,2  
1,010404ffffffff@i6:1,Active Power P1,W,Power_P1,2  
1,010404ffffffff@i7:1,Active Power P2,W,Power_P2,2  
1,010404ffffffff@i8:1,Active Power P3,W,Power_P3,2  
#  
</code></pre></div> </details> <h3 id=sdm630-modbus>SDM630 (MODBus)<a class=headerlink href=#sdm630-modbus title="Permanent link">~</a></h3> <p>Show how to request multiple registers.</p> <details class=summary> <summary>View script</summary> <div class=highlight><pre><span></span><code>&gt;D
&gt;B
-&gt;sensor53 r

; multiple float register request, 9 at once
&gt;M 1
+1,3,m,0,9600,SDM630,1,20,r010400000012
1,010424ffffffff@i0:1,Voltage P1,V,Voltage_P1,2
1,010424x4ffffffff@i0:1,Voltage P2,V,Voltage_P2,2
1,010424x8ffffffff@i0:1,Voltage P3,V,Voltage_P3,2
1,010424x12ffffffff@i0:1,Current P1,A,Current_P1,2
1,010424x16ffffffff@i0:1,Current P2,A,Current_P2,2
1,010424x20ffffffff@i0:1,Current P3,A,Current_P3,2
1,010424x24ffffffff@i0:1,Active Power P1,W,Power_P1,2
1,010424x28ffffffff@i0:1,Active Power P2,W,Power_P2,2
1,010424x32ffffffff@i0:1,Active Power P3,W,Power_P3,2
#

; multiple float register request, 3 at once
&gt;xM 1
+1,3,m,0,9600,SDM630,1,10,r010400000006,r010400060006,r0104000c0006
1,01040cffffffff@i0:1,Voltage P1,V,Voltage_P1,2
1,01040cx4ffffffff@i0:1,Voltage P2,V,Voltage_P2,2
1,01040cx8ffffffff@i0:1,Voltage P3,V,Voltage_P3,2
1,01040cffffffff@i1:1,Current P1,A,Current_P1,2
1,01040cx4ffffffff@i1:1,Current P2,A,Current_P2,2
1,01040cx8ffffffff@i1:1,Current P3,A,Current_P3,2
1,01040cffffffff@i2:1,Active Power P1,W,Power_P1,2
1,01040cx4ffffffff@i2:1,Active Power P2,W,Power_P2,2
1,01040cx8ffffffff@i2:1,Active Power P3,W,Power_P3,2
#

; single float register request
&gt;xM 1
+1,3,m,0,960,SDM630,1,5,01040000,01040002,01040004,01040006,01040008,0104000a,0104000c,0104000e,01040010,,01040048,0104004a
1,010404ffffffff@i0:1,Voltage P1,V,Voltage_P1,2
1,010404ffffffff@i1:1,Voltage P2,V,Voltage_P2,2
1,010404ffffffff@i2:1,Voltage P3,V,Voltage_P3,2
1,010404ffffffff@i3:1,Current P1,A,Current_P1,2
1,010404ffffffff@i4:1,Current P2,A,Current_P2,2
1,010404ffffffff@i5:1,Current P3,A,Current_P3,2
1,010404ffffffff@i6:1,Active Power P1,W,Power_P1,2
1,010404ffffffff@i7:1,Active Power P2,W,Power_P2,2
1,010404ffffffff@i8:1,Active Power P3,W,Power_P3,2
1,010404ffffffff@i9:1,Total Import,KWh,Timp,3
1,010404ffffffff@i10:1,Total Export,KWh,Texp,3
#
</code></pre></div> </details> <h3 id=sdm72d-modbus>SDM72D (MODBus)<a class=headerlink href=#sdm72d-modbus title="Permanent link">~</a></h3> <p>Script to extract readings from Eastron <a href=https://www.eastroneurope.com/products/view/sdm72modbus>SDM72D Series</a> devices (tested on SDM72D-M). Manual with comprehensive documentation about all Modbus registers available <a href=https://stromzähler.eu/media/pdf/93/17/d7/SDM72DM-V2.pdf>here</a>.</p> <details class=summary> <summary>View script</summary> <div class=highlight><pre><span></span><code>&gt;D
&gt;B
-&gt;sensor53 r
&gt;M 1
+1,25,mN1,0,9600,SDM72D,26,1,01040000,01040002,01040004,01040006,01040008,0104000a,0104000c,0104000e,01040010,01040012,01040014,01040016,01040018,0104001a,0104001c,0104001e,01040020,01040022,0104002a,0104002e,01040030,01040034,01040038,0104003c,0104003e,01040046,01040048,0104004A,01040156,01040158,0104018c,01040500,01040502
1,010404ffffffff@i0:1,Voltage P1,V,voltage_phase1,2
1,010404ffffffff@i1:1,Voltage P2,V,voltage_phase2,2
1,010404ffffffff@i2:1,Voltage P3,V,voltage_phase3,2
1,010404ffffffff@i3:1,Current P1,A,current_phase1,2
1,010404ffffffff@i4:1,Current P2,A,current_phase2,2
1,010404ffffffff@i5:1,Current P3,A,current_phase3,2
1,010404ffffffff@i6:1,Power P1,W,power_phase1,2
1,010404ffffffff@i7:1,Power P2,W,power_phase2,2
1,010404ffffffff@i8:1,Power P3,W,power_phase3,2
1,010404ffffffff@i9:1,Power Apparent P1,VA,power_apparent_phase1,2
1,010404ffffffff@i10:1,Power Apparent P2,VA,power_apparent_phase2,2
1,010404ffffffff@i11:1,Power Apparent P3,VA,power_apparent_phase3,2
1,010404ffffffff@i12:1,Power Reactive P1,VAr,power_reactive_phase1,2
1,010404ffffffff@i13:1,Power Reactive P2,VAr,power_reactive_phase2,2
1,010404ffffffff@i14:1,Power Reactive P3,VAr,power_reactive_phase3,2
1,010404ffffffff@i15:1,Power Factor P1,,power_factor_phase1,2
1,010404ffffffff@i16:1,Power Factor P2,,power_factor_phase2,2
1,010404ffffffff@i17:1,Power Factor P3,,power_factor_phase3,2
1,010404ffffffff@i18:1,Average Voltage,V,voltage_avg,2
1,010404ffffffff@i19:1,Average Current,A,current_avg,2
1,010404ffffffff@i20:1,Current Total,A,current_total,2
1,010404ffffffff@i21:1,Power Total,W,power_total,2
1,010404ffffffff@i22:1,Power Apparent Total,VA,power_apparent_total,2
1,010404ffffffff@i23:1,Power Reactive Total,VAr,power_reactive_total,2
1,010404ffffffff@i24:1,Power Factor Total,,power_factor_total,2
1,010404ffffffff@i25:1,Frequency,Hz,frequency,2
1,010404ffffffff@i26:1,Energy Imported,kWh,energy_imported,3
1,010404ffffffff@i27:1,Energy Exported,kWh,energy_exported,3
1,010404ffffffff@i28:1,Energy Total,kWh,energy_total,3
1,010404ffffffff@i29:1,Energy Reactive Total,kVArh,energy_reactive_total,3
1,010404ffffffff@i30:1,Net Energy,kWh,energy_net,3
1,010404ffffffff@i31:1,Import Power,W,power_import,2
1,010404ffffffff@i32:1,Export Power,W,power_export,2
#
</code></pre></div> </details> <h3 id=shelly-pro-3em-emulation>Shelly PRO 3EM emulation<a class=headerlink href=#shelly-pro-3em-emulation title="Permanent link">~</a></h3> <p>script to emulate a shelly pro 3em to use with solar storage devices e.g. marstek</p> <details class=summary> <summary>View script</summary> <div class=highlight><pre><span></span><code>&gt;D 250
; this script emulates a shelly pro, with small modifications may also emulate an ecotracker
; proven to work an marstek Venus, Jupiter and B2500
res=0
c1p=0
c2p=0
c3p=0
c1c=0
c2c=0
c3c=0
cpwr=0
str=&quot;&quot;
tstr=&quot;&quot;
cstr=&quot;&quot;
mstr1=&quot;&quot;
mstr2=&quot;&quot;
mstr3=&quot;&quot;
header=&quot;&quot;
once=0

&gt;B
=&gt;sensor53 r
; if you modify this section you must restart tasmota 

&gt;ah
; http rpc handler
res=won(1 &quot;/rpc/*&quot;)
; http status
res=won(2 &quot;/status&quot;)
; http ecotacker status
res=won(3 &quot;/v1/json&quot;)

&gt;on1
;print here comes http rpc request
str=warg
res=ins(str &quot;EM.GetStatus&quot;)
if res&gt;=0 {
wcs so(4)
=#htph
wcs %mstr1%
=#getsrc
wcs %header%
=#getstat
wcs %mstr1%
wcs %mstr2%
wcf
break
}
res=ins(str &quot;Shelly.GetDeviceInfo&quot;)
if res&gt;=0 {
wcs so(4)
=#htph
wcs %mstr1% 
=#getsrc
=#getdefi
wcs %header%
wcs %mstr1%
wcs %mstr2%
wcf
break
}
res=ins(str &quot;EM.GetConfig&quot;)
if res&gt;=0 {
wcs so(4)
=#htph
wcs %mstr1%
=#getsrc
=#getcfg
wcs %header%
wcs %mstr1%
wcf
break
}
res=ins(str &quot;EMData.GetStatus&quot;)
if res&gt;=0 {
wcs so(4)
=#htph
wcs %mstr1%
=#getsrc
=#egetstat
wcs %header%
wcs %mstr1%
wcf
break
}

print unknown http equest: %str%

&gt;on2
;print here comes the status request
wcs so(4)
=#htph
wcs %mstr1%
dp(0 2)
wcs {&quot;Power&quot;: %cpwr%,&quot;E_in&quot;:%sml[1]%,&quot;E_out&quot;:%sml[2]%}
wcf

&gt;on3
;print here comes the v1/json for ecotracker
wcs so(4)
=#htph
wcs %mstr1%
dp(0 2)
wcs {&quot;energyCounterIn&quot;:%sml[1]%,&quot;energyCounterOut&quot;:%sml[2]%,&quot;powerAvg&quot;:%cpwr%,&quot;energyCounterInT1&quot;:0,
wcs &quot;energyCounterInT2&quot;:0,&quot;power&quot;:%cpwr%}
wcf

#htph
mstr1=&quot;HTTP/1.1 200 OK\r\nContent-type: application/json\r\n\r\n&quot;

#getcfg
mstr1=&quot;{\&quot;id\&quot;:0,\&quot;name\&quot;:null,\&quot;blink_mode_selector\&quot;:\&quot;active_energy\&quot;,\&quot;phase_selector\&quot;:\&quot;a\&quot;,\&quot;monitor_phase_sequence\&quot;:true,\&quot;ct_type\&quot;:\&quot;120A\&quot;}}&quot;

#getdefi
mstr1=&quot;{\&quot;name\&quot;:\&quot;&quot;+tstr+&quot;\&quot;,\&quot;id\&quot;:\&quot;&quot;+tstr+&quot;\&quot;,\&quot;mac\&quot;:\&quot;&quot;+maca+&quot;\&quot;,\&quot;slot\&quot;:1,\&quot;model\&quot;:\&quot;SPEM-003CEBEU\&quot;,&quot;
mstr2=&quot;\&quot;gen\&quot;:2,\&quot;fw_id\&quot;:\&quot;20241011-114455/1.4.4-g6d2a586\&quot;,&quot;
mstr2+=&quot;\&quot;ver\&quot;:\&quot;1.4.4\&quot;,\&quot;app\&quot;:\&quot;Pro3EM\&quot;,\&quot;auth_en\&quot;:0,\&quot;profile\&quot;:\&quot;triphase\&quot;}}&quot;

#getstat
dp(0 2)
mstr1=&quot;{\&quot;id\&quot;:0,\&quot;a_current\&quot;:&quot;+s(c1c)+&quot;,\&quot;a_voltage\&quot;:230,\&quot;a_act_power\&quot;:&quot;+s(c1p)+&quot;,\&quot;a_aprt_power\&quot;:&quot;+s(c1p)+&quot;,\&quot;a_pf\&quot;:1,\&quot;a_freq\&quot;:50,&quot;
mstr1+=&quot;\&quot;b_current\&quot;:&quot;+s(c2c)+&quot;,\&quot;b_voltage\&quot;:230,\&quot;b_act_power\&quot;:&quot;+s(c2p)+&quot;,\&quot;b_aprt_power\&quot;:&quot;+s(c2p)+&quot;,\&quot;b_pf\&quot;:1,\&quot;b_freq\&quot;:50,&quot;
mstr2=&quot;\&quot;c_current\&quot;:&quot;+s(c3c)+&quot;,\&quot;c_voltage\&quot;:230,\&quot;c_act_power\&quot;:&quot;+s(c3p)+&quot;,\&quot;c_aprt_power\&quot;:&quot;+s(c3p)+&quot;,\&quot;c_pf\&quot;:1,\&quot;c_freq\&quot;:50,&quot;
mstr2+=&quot;\&quot;total_current\&quot;:&quot;+s(c1c+c2c+c3c)+&quot;,\&quot;total_act_power\&quot;:&quot;+s(cpwr)+&quot;,\&quot;total_aprt_power\&quot;:&quot;+s(cpwr)+&quot;}}&quot;

#egetstat
dp(0 2)
mstr1=&quot;{\&quot;id\&quot;:0,\&quot;a_total_act_energy\&quot;:&quot;+s(c1p)+&quot;,\&quot;a_total_act_ret_energy\&quot;:&quot;+s(c1p)+&quot;,\&quot;b_total_act_energy\&quot;:&quot;+s(c2p)+&quot;,\&quot;b_total_act_ret_energy\&quot;:&quot;+s(c2p)+&quot;,\&quot;c_total_act_energy\&quot;:&quot;+s(c3p)+&quot;,\&quot;c_total_act_ret_energy\&quot;:&quot;+s(c3p)+&quot;,\&quot;total_act\&quot;:&quot;+s(cpwr)+&quot;,\&quot;total_act_ret\&quot;:&quot;+s(cpwr)+&quot;}}&quot;

#getsrc
tstr=&quot;shellypro3em-&quot;+maca
header=&quot;{\&quot;id\&quot;:0,\&quot;src\&quot;:\&quot;&quot;+tstr+&quot;\&quot;,\&quot;result\&quot;:&quot;

&gt;S
if year&lt;2000 {
break
}

; adapt this to your meter
; update every 3 seconds
if upsecs%3==0 {
cpwr=sml[3]
c1p=sml[4]
c2p=sml[5]
c3p=sml[6]
}

; use this if you only have only one phase meter values
;c1p=cpwr/3
;c2p=cpwr/3
;c3p=cpwr/3

; calculate phase currents
c1c=c1p/230
c2c=c2p/230
c3c=c3p/230

if once==0 {
; start mdns for Shelly second parameter &quot;-&quot; means use device mac
res=mdns(&quot;shellypro3em-&quot; &quot;-&quot; &quot;shelly&quot;)
; start udp rpc handler on port 1010 or on port 2220 (for b2500)
res=udp(0 1010)
;res=udp(0 2220)
once=1
}

; evaluate udp input
str=udp(1)
if str!=&quot;&quot; {
;print udp rpc payload=%str%
res=ins(str &quot;EM.GetStatus&quot;)
if res&gt;=0 {
=#getsrc
=#getstat
udp(2 header mstr1 mstr2)
;print &gt;&gt; %header%
;print &gt;&gt; %mstr1%
;print &gt;&gt; %mstr2%
break
}

res=ins(str &quot;Shelly.GetDeviceInfo&quot;)
if res&gt;=0 {
=#getsrc
=#getdefi
udp(2 header mstr1 mstr2)
;print &gt;&gt; 1 %mstr1%
;print &gt;&gt; 2 %mstr2%
break
}

res=ins(str &quot;EM.GetConfig&quot;)
if res&gt;=0 {
=#getsrc
=#getcfg
udp(2 header mstr1)
;print &gt;&gt; 1 %mstr1%
break
}

res=ins(str &quot;EMData.GetStatus&quot;)
if res&gt;=0 {
=#getsrc
=#egetstat
udp(2 header mstr1)
;print &gt;&gt; 1 %mstr1%
break
}
}

; adapt your own meter descriptor here
&gt;M 1
+1,5,o,16,9600,eBZ,4
1,1-0:1.8.0*255(@1,Verbrauch,kWh,E_in,3
1,1-0:2.8.0*255(@1,Einspeisung,kWh,E_out,3
1,1-0:16.7.0*255(@1,akt. Leistung,W,Power,0
1,1-0:36.7.0*255(@1,Leistung L1,W,36_7_0,0
1,1-0:56.7.0*255(@1,Leistung L2,W,56_7_0,0
1,1-0:76.7.0*255(@1,Leistung L3,W,76_7_0,0
1,1-0:32.7.0*255(@1,Spannung L1,V,32_7_0,1
1,1-0:52.7.0*255(@1,Spannung L2,V,52_7_0,1
1,1-0:72.7.0*255(@1,Spannung L3,V,72_7_0,1
1,1-0:96.1.0*255(@#),Identifikation,,96_1_0,0
#
</code></pre></div> </details> <h3 id=sorel-ltdc-canbus>Sorel LTDC (CANBus)<a class=headerlink href=#sorel-ltdc-canbus title="Permanent link">~</a></h3> <p>Compile firmware with #define <code>USE_SML_CANBUS</code>. Use a proper CAN transceiver. You need a 120Ohms resistor in the second CAN port of the controller, otherwise ESP32 device will not decode anything on the bus, the baudrate is 250 KBITS.</p> <details class=summary> <summary>View script</summary> <div class=highlight><pre><span></span><code>&gt;D
&gt;B
-&gt;sensor53 r
&gt;M 1
; SOREL LTDC
; params -&gt; 04 = baudrate 250kb + number of receive buffers * 100
+1,3,C,0,3204,CAN,1,5
1,100124800500uuUU@10,Temp S1,ºC,S1,0
1,100124800501uuUU@10,Temp S2,ºC,S2,0
1,100124800502uuUU@10,Temp S3,ºC,S3,0
1,100124800503uuUU@10,Temp S4,ºC,S4,0
1,10022480050000ss@-0.01,Relay R1,,R1,0
1,10022480050100ss@-0.01,Relay R2,,R2,0
1,10022480050200ss@-0.01,Relay R3,,R3,0
#
</code></pre></div> </details> <h3 id=sorel-xhcc-canbus>Sorel XHCC (CANBus)<a class=headerlink href=#sorel-xhcc-canbus title="Permanent link">~</a></h3> <p>Compile firmware with #define <code>USE_SML_CANBUS</code>. Use a proper CAN transceiver. You need a 120Ohms resistor in the second CAN port of the controller, otherwise ESP32 device will not decode anything on the bus, the baudrate is 250 KBITS.</p> <details class=summary> <summary>View script</summary> <div class=highlight><pre><span></span><code>&gt;D
&gt;B
-&gt;sensor53 r
&gt;M 1
; SOREL XHCC
; params -&gt; 04 = baudrate 250kb + number of receive buffers * 100
; character 5 and 6 (in the example below &quot;8b&quot;) is the can-bus id of your sorel device
; you need to replace it with your xhcc can-bus id converted to hex format
; you will find your can-bus id (in decimal) in Special Functions (7) -&gt; Network (31) -&gt; CAN-bus ID (4)
; in the example below, the can-bus id of the xhcc device was &quot;139&quot;
+1,26,C,0,3204,XHCC,25,5
1,10018b800500ssSS@10,Temp S1,ºC,S1,1
1,10018b800501ssSS@10,Temp S2,ºC,S2,1
1,10018b800502ssSS@10,Temp S3,ºC,S3,1
1,10018b800503ssSS@10,Temp S4,ºC,S4,1
1,10018b800504ssSS@10,Temp S5,ºC,S5,1
1,10018b800505ssSS@10,Temp S6,ºC,S6,1
1,10018b800506ssSS@10,Temp S7,ºC,S7,1
1,10018b800507ssSS@10,Temp S8,ºC,S8,1
1,10018b800508ssSS@10,Temp S9,ºC,S9,1
1,10028b80050000ss@-1,Relay R1,,R1,0
1,10028b80050100ss@-1,Relay R2,,R2,0
1,10028b80050200ss@-1,Relay R3,,R3,0
1,10028b80050300ss@-1,Relay R4,,R4,0
1,10028b80050400ss@-1,Relay R5,,R5,0
1,10028b80050500ss@-1,Relay R6,,R6,0
1,10028b80050600ss@-1,Relay R7,,R7,0
1,10028b80050702ss@-1,Relay V1,,V1,0
1,10028b80050802ss@-1,Relay V2,,V2,0
1,10028b80050902ss@-1,Relay V3,,V3,0
1,10028b80050a02ss@-1,Relay V4,,V4,0
#
</code></pre></div> </details> <h3 id=siemens-im-350>Siemens IM-350<a class=headerlink href=#siemens-im-350 title="Permanent link">~</a></h3> <p>This device is used in the grid of Wiener Netze. Insert your Key into the script.</p> <details class=summary> <summary>View script</summary> <div class=highlight><pre><span></span><code>&gt;D
&gt;B
=&gt;sensor53 r
&gt;M 1
+1,3,r,0,9600,Home
1,=so3,256
1,=so4,KEY
1,020909x14UUuuUUuu@1000,Zählerstand,kWh,Zaehlerstand,2
1,020909x34UUuuUUuu@1000,Bezug aktuell,kwh,Bezug,3 
1,020909x24UUuuUUuu@1000,BL Bezug,kvarh,BL_Bezug,3 
1,020909x19UUuuUUuu@1000,Einspeisung Gesamt,kWh,Einspeisung_ges,2 
1,020909x39UUuuUUuu@1000,Einspeisung aktuell ,kW,Einspeisung_akt,3 
1,020909x29UUuuUUuu@1000,BL Einspeisung,kvarh,BL_Einspeisung,3
1,020909x19UUuu@1,year,,year,0
1,020909x21ss@1,month,,month,0
1,020909x22ss@1,day,,day,0
1,020909x24ss@1,hh,,hh,0
1,020909x25ss@1,mm,,mm,0
1,020909x26ss@1,ss,,ss,0
1,020909x32UUuuUUuu@1000,+A,kWh,+A,3
1,020909x37UUuuUUuu@1000,-A,kWh,-A,3
1,020909x42UUuuUUuu@1000,+R,varh,+R,3
1,020909x47UUuuUUuu@1000,-R,varh,-R,3
1,020909x52UUuuUUuu@1,+P,W,+P,3
1,020909x57UUuuUUuu@1,-P,W,-P,3
1,020909x62UUuuUUuu@1,+Q,var,+Q,3
1,020909x67UUuuUUuu@1,-Q,var,-Q,3
#
</code></pre></div> </details> <h3 id=siemens-im-350-raw>Siemens IM-350 (RAW)<a class=headerlink href=#siemens-im-350-raw title="Permanent link">~</a></h3> <p>This device is used in the grid of Wels Strom in Upper Austria. Insert your KEY into the script.</p> <p>You may need to adapt the IDENTIFIER string in the text variable 'r' ('020a0906' here) to the code shown in your dump. For explanation see Iskra AM550 (Wiener Netze).</p> <p>Connection is via the RJ11 port which also works with 3V3 but needs a transistor on the dataline to invert the signal (like Sanxing SX6x1). An external power supply is required.</p> <p>The website https://www.smartcircuits.de/wattwaechter-wifi-usb/flashen/ (in German) allows to directly flash Tasmota with the included Smart Meter Interface to your device through your Chrome or Edge browser.</p> <details class=summary> <summary>View script</summary> <div class=highlight><pre><span></span><code>&gt;D
;define text variable: &quot;MeterNbr,IDENTIFIER&quot;
r=&quot;1,020a0906&quot;
&gt;B
=&gt;sensor53 r
&gt;M 1
+1,3,r,0,115200,Meter
1,=so3,256
1,=so4,KEY
%r%x24UUuu@1,year,,year,0
%r%x26ss@1,month,,month,0
%r%x27ss@1,day,,day,0
%r%x18ss@1,hh,,hh,0
%r%x19ss@1,mm,,mm,0
%r%x20ss@1,ss,,ss,0
%r%x30UUuuUUuu@1000,Energy A+,kWh,1_8_0,3
%r%x35UUuuUUuu@1000,Energy A-,kWh,2_8_0,3
%r%x40UUuuUUuu@1000,reactive E. R+,kVarh,3_8_0,3
%r%x45UUuuUUuu@1000,reactive E. R-,kVarh,4_8_0,3
%r%x50UUuuUUuu@1,active P+,W,1_7_0,0
%r%x55UUuuUUuu@1,active P-,W,2_7_0,0
#
</code></pre></div> </details> <h3 id=siemens-td-3511>Siemens TD-3511<a class=headerlink href=#siemens-td-3511 title="Permanent link">~</a></h3> <p>This device is used in the grid of EGTF - Elektrizitäts-Genossenschaft Tacherting-Feichten eG. Read uses IEC 62056-21 data mode "C" without acknowledgement by the reading device.</p> <details class=summary> <summary>View script</summary> <div class=highlight><pre><span></span><code>&gt;D
&gt;B
-&gt;sensor53 r
&gt;M 1
+1,3,o,0,300,STROM,1,600,2F3F210D0A
1,1.8.1(@1,Total Consumed,kWh,Total_in,3
1,2.8.1(@1,Total Delivered,kWh,Total_out,3
1,0.0.0(@#),Meter Number,,Meter_number,0
#
</code></pre></div> </details> <h3 id=trovis-557x-modbus>Trovis 557x (MODBus)<a class=headerlink href=#trovis-557x-modbus title="Permanent link">~</a></h3> <p>These heating regulators have a <a href=https://raw.githubusercontent.com/Tom-Bom-badil/samson_trovis_557x/master/_register.py>lot of registers</a>. If your station number is different from standard (247 ==&gt; 0xF7) you have got to change every first byte accordingly.</p> <details class=summary> <summary>View script</summary> <div class=highlight><pre><span></span><code>&gt;D
&gt;B
-&gt;sensor53 r
&gt;M 1
+1,3,m,0,19200,Trovis,1,2,rF7030009000E,rF703001C0004,F703006A
1,F7031CSSss@i0:10,Außentemp.,°C,Temp_Outside,1
1,F7031CxxxxxxxxxxxxSSss@i0:10,Vorlauftemp.,°C,Temp_Flow,1
1,F7031CxxxxxxxxxxxxxxxxxxxxxxxxxxxxSSss@i0:10,Rücklauftemp.,°C,Temp_Return,1
1,F7031CxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxSSss@i0:10,Speichertemp.,°C,Temp_Vessel,1
1,F70308UUuu@i1:1,MesswertImp-h,imp/h,Metric_ImpH,0
1,F70308xxxxUUuu@i1:100,Messwertm3-h,m³/h,Metric_M3H,2
1,F70308xxxxxxxxUUuu@i1:10,AA10-10V,V,Metric_AA10,1
1,F70308xxxxxxxxxxxxUUuu@i1:10,AA20-10V,V,Metric_AA20,1
1,F70304UUuu@i2:1,StellsignalRk1,%,CtrlSig_RK1,0
#
</code></pre></div> </details> <h3 id=wolf-csz-11300-heater-ebus>WOLF CSZ 11/300 Heater (EBus)<a class=headerlink href=#wolf-csz-11300-heater-ebus title="Permanent link">~</a></h3> <details class=summary> <summary>View script</summary> <div class=highlight><pre><span></span><code>&gt;D  
&gt;B  
-&gt;sensor53 r
&gt;M 1  
+1,3,e,0,2400,EBUS  
1,xxxx0503xxxxxxxxxxxxxxxxss@1,Outside temperature,C,Outsidetemp,0  
1,xxxx5014xxxxxxxxxxuu@1,Romm temperature,C,Roomtemp,0  
1,xxxx0503xxxxxxxxxxxxxxuu@1,Warmwater,C,Warmwater,0  
1,xxxx0503xxxxxxxxxxuu@1,Boiler,C,Boiler,0  
1,03fe0503xxxxxxxxxxxxuu@1,Returns,C,Returns,0  
1,03fe0503xxxxuu@1,Status,,Status,0  
1,03fe0503xxxxxxuu@b3:1,Burner on,,Burner,0  
1,xxxx5017xxxxxxuuuu@16,Solar collektor,C,Collector,1  
1,xxxx5017xxxxxxxxxxuuuu@16,Solar storage,C,Solarstorage,1  
1,xxxx5017xxuu@b0:1,Solar pump on,,Solarpump,0  
#  
</code></pre></div> </details> <h3 id=zpa-gh302-sml>ZPA GH302 (SML)<a class=headerlink href=#zpa-gh302-sml title="Permanent link">~</a></h3> <details class=summary> <summary>View script</summary> <div class=highlight><pre><span></span><code>&gt;D
&gt;B
=&gt;sensor53 r
&gt;M 1
+1,3,s,0,9600,Strom
1,77070100010800ff@1000,Bezug,kWh,Total_in,0
1,77070100020800ff@1000,Einspeisung,kWh,Total_out,0
#
</code></pre></div> </details> <h3 id=zpa-gh305-sml>ZPA GH305 (SML)<a class=headerlink href=#zpa-gh305-sml title="Permanent link">~</a></h3> <details class=summary> <summary>View script</summary> <div class=highlight><pre><span></span><code>&gt;D
&gt;B
-&gt;sensor53 r
&gt;M 1
+1,3,s,0,9600,SML
1,77070100010800ff@1000,Total Verbrauch,kWh,Total_in,3
1,77070100020800ff@1000,Total Einspeisung,kWh,Total_out,3
1,=h==================
1,77070100100700ff@1,Actual load,W,Power_curr,0
1,=h==================
1,=m 9+10+11 @1,Currents L1+L2+L3,A,Curr_summ,3
1,=m 12+13+14/#3 @1,Voltage L1+L2+L3/3,V,Volt_avg,3
1,=h==================
1,77070100240700ff@1,Consumption P1,W,Power_p1,2
1,77070100380700ff@1,Consumption P2,W,Power_p2,2
1,770701004c0700ff@1,Consumption P3,W,Power_p3,2
1,=h   ----
1,770701001f0700ff@1,Current L1,A,Curr_p1,3
1,77070100330700ff@1,Current L2,A,Curr_p2,3
1,77070100470700ff@1,Current L3,A,Curr_p3,3
1,=h   ----
1,77070100200700ff@1,Voltage L1,V,Volt_p1,3
1,77070100340700ff@1,Voltage L2,V,Volt_p2,3
1,77070100480700ff@1,Voltage L3,V,Volt_p3,3
1,=h==================
1,77070100510701ff@1,Phaseangle L2-L1,deg,phase_angle_L2_L1,0
1,77070100510702ff@1,Phaseangle L3-L1,deg,phase_angle_L3_L1,0
1,77070100510704ff@1,Phaseangle I/U L1,deg,phase_angle_L1,1 
1,7707010051070fff@1,Phaseangle I/U L2,deg,phase_angle_L2,1  
1,7707010051071aff@1,Phaseangle I/U L3,deg,phase_angle_L3,1 
1,770701000e0700ff@1,Frequency,Hz,Freq,1
;1,=h=======UNBEKANNT===========
;1,77070100000009FF@#,unbekannt1,,Power_Use_Sum,3
;1,77070100000000FF@#,unbekannt2,,Power_Use_Sum,3
;1,7707010060320101@#,unbekannt3,,Meter_id,0
;1,77010b0a01445a47@#,unbekannt4,,Meter_id,0
;1,77070100600100ff@#,unbekannt5,,Meter_id,0
1,=h
#
</code></pre></div> </details> <h3 id=inepro-metering-pro380-mb-m-bus>inepro Metering PRO380-MB (M-Bus)<a class=headerlink href=#inepro-metering-pro380-mb-m-bus title="Permanent link">~</a></h3> <p>This is a controller for standard solar thermal systems equipped with VBus data interface. Outputs data every second at 9600 baud 8N1. To connect to this and read data from the bus a level shifting is needed as the voltage is around 8V. Although this is a symmetric connection supporting long wires for our purposes it's enough to measure its polarity with a voltmeter and adapt the level appropriately to 3.3V using the below circuit (many others exist but this is simple and works). Do not connect the GND pin of Wemos with the ground of Resol unit as that may damage the output port of it. The Wemos module needs its own power supply (double insulated recommended). </p> <details class=summary> <summary>The script (compile firmware with <code>USE_SML_M</code>)</summary> <p><img alt src=../_media/meter3fpro380-mbx-5a.png> <img alt src=../_media/taaralabs_MBusUART.png></p> <div class=highlight><pre><span></span><code>&gt;D
&gt;B
-&gt;sensor53 r 
; -&gt;sensor53 d1 ; Dump mode for console debug
&gt;M 1
+1,16,rE1,0,2400,,17,100,680303685300b40716,105b005b16,680303685300B10416
1,4BFD47bcd6@100,L1 voltage,V,L1_V,2
1,8B01FD47bcd6@100,L2 voltage,V,L2_V,2
1,CB01FD47bcd6@100,L3 voltage,V,L3_V,2
1,4BFD59bcd6@100,L1 current,A,L1_I,2
1,8B01FD59bcd6@100,L2 current,A,L2_I,2
1,CB01FD59bcd6@100,L3 current,A,L3_I,2
1,4C2Abcd5@1000,L1 active power,kW,L1_P,3
1,8C012Abcd5@1000,L2 active power,kW,L2_P,3
1,CC012Abcd5@1000,L3 active power,kW,L3_P,3
1,0C2Abcd6@1000,Total active power,kW,T_P,3
1,4C04bcd8@100,L1 total energy,kWh,L1_TE,2
1,8C0104bcd8@100,L2 total energy,kWh,L2_TE,2
1,CC0104bcd8@100,L3 total energy,kWh,L3_TE,2
1,000C04bcd8@100,Total active energy,kWh,TE,2
1,6C04bcd8@100,L1 reverse energy,kWh,L1_TRE,2
1,AC0104bcd8@100,L2 reverse energy,kWh,L2_TRE,2
1,EC0104bcd8@100,L3 reverse energy,kWh,L3_TRE,2
1,2C04bcd8@100,Total reverse energy,kWh,TRE,2
#
</code></pre></div> </details> <h3 id=aeconversion-solar-inverter-invxxx-raw>AEConversion solar inverter INVXXX (RAW)<a class=headerlink href=#aeconversion-solar-inverter-invxxx-raw title="Permanent link">~</a></h3> <p>Tested on an AEConversion INV500-90 with RS485 interface.</p> <details class=summary> <summary>View script</summary> <div class=highlight><pre><span></span><code>&gt;D
&gt;B
=&gt;sensor53 r
; Monitor Sensor at GPIO25
=&gt;sensor53 l255
&gt;M 1
+1,13,r,0,9600,aec,15,50,2101B203FD4D0D

1,212717UUuux7@1,Leistung,W,power,0
1,212717x4UUuux4@1000,Energie,kWh,energy_sun,3
#
</code></pre></div> </details> <h3 id=sma-solar-inverter-modbus-tcp>SMA Solar Inverter (MODBus TCP)<a class=headerlink href=#sma-solar-inverter-modbus-tcp title="Permanent link">~</a></h3> <details class=summary> <summary>View script</summary> <div class=highlight><pre><span></span><code>&gt;D
&gt;B
=&gt;sensor53 r
&gt;M1
+1,[192.168.56.91],m,0,502,SMA,0,10,03047741,03047747,03047777,03047831,03047833,03047835,030478ED,030478EF,030478F1,03047893,030478E9,0304787D,03047881,r03047AA50004,r03047AA90004
1,030404U32@i0:1000,Gesamtertrag,kWh,v1,3
1,030404U32@i1:1000,Tagesertrag,kWh,v2,3
1,030404U32@i2:1000,Einspeisung_ges,kWh,v3,3
1,030404S32@i3:100,DC Str. A,A,v4,2
1,030404S32@i4:100,DC Sp. A,V,v5,2
1,030404S32@i5:100,DC Le. A,W,v6,2
1,030404S32@i6:100,DC Str. B,A,v7,2
1,030404S32@i7:100,DC Sp. B,V,v8,2
1,030404S32@i8:100,DC Le. B,W,v9,2
;
1,030404S32@i9:100,AC Le.,W,v10,2
;
1,030404S32@i10:10,WR_Temp,°C,v11,2
;
1,030404U32@i11:1,Batterieladung,%%,v12,0
1,030404S32@i12:10,Batt_Temp,°C,v13,2
;
1,030408U64@i13:1000,Batt_Ladung,kWh,v14,3
1,030408U64@i14:1000,Batt_EntLadung,kWh,v15,3
#
</code></pre></div> </details> <h3 id=huawei-r4850g2-lipo-charger-canbus>HUAWEI R4850G2 Lipo Charger (CANBus)<a class=headerlink href=#huawei-r4850g2-lipo-charger-canbus title="Permanent link">~</a></h3> <details class=summary> <summary>View script</summary> <div class=highlight><pre><span></span><code>&gt;D 40
IP=192.168.188.117
ovolt=45
maxc=30
cstr=&quot;&quot;
&gt;B
=&gt;sensor53 r
&gt;S
if chg[ovolt]&gt;0 {
; change voltage 41.5 - 58.5
cstr=&quot;908180FE0801000000&quot;+hx(ovolt*1024)
sml(1 3 cstr)
}
if chg[maxc]&gt;0 {
; change max current 0-60A
cstr=&quot;908180FE0801030000&quot;+hx(maxc*20)
sml(1 3 cstr)
}
&gt;M 1
; Huawei R4850G2
; params -&gt; 03 = baudrate 125kb + number of receive buffers * 100
+1,7,C,0,3203,CAN,6,10,908040FE080000000000000000
1,1081407f0801700000UUuuUUuu@1024,Input Power,W,ipwr,1
1,1081407f0801710000UUuuUUuu@1024,Input Frequency,Hz,freq,1
1,1081407f0801780000UUuuUUuu@1024,Input Voltage,V,ivolt,1
1,1081407f0801720000UUuuUUuu@1024,Input Current,A,icurr,1
1,1081407f0801750000UUuuUUuu@1024,Output Voltage,V,ovolt,1
1,1081407f0801810000UUuuUUuu@1024,Output Current,A,ocurr,1
1,1081407f0801760000UUuuUUuu@20,Output Max Current,A,mcurr,1
1,1081407f0801800000UUuuUUuu@1024,Input Temp,C,itmp,1
1,1081407f08017f0000UUuuUUuu@1024,Output Temp,C,otmp,1
1,1081407f0801740000UUuuUUuu@1024,Efficiency,%%,eff,1
1,=so8,00000000
1,=so9,1081407f
#
&gt;W
&lt;hr&gt;
nm(41.5 58.5 0.1 ovolt &quot;Output Voltage (V): &quot; 80 1) 
nm(0 60 0.1 maxc &quot;Max Current (A): &quot; 80 1) 
</code></pre></div> </details> <h3 id=kamstrup-multical-m401>Kamstrup Multical M401<a class=headerlink href=#kamstrup-multical-m401 title="Permanent link">~</a></h3> <details class=summary> <summary>View script</summary> <div class=highlight><pre><span></span><code>&gt;D
scnt=0
res=0
&gt;B
=&gt;sensor53 r
&gt;F
; count 100ms
scnt+=1
switch scnt
;100ms after start: set sml driver to 300 baud 
case 1
res=sml(1 0 300)
;1600ms send /#1 as HEX to trigger
case 16
res=sml(1 1 &quot;2F23310D0A&quot;)
;2200ms later: switch sml driver to 1200 baud
case 22
res=sml(1 0 1200)
;1000ms after start: Restart sequence
case 100
scnt=0
ends

&gt;M 1
+1,3,o,0,1200,MC401,1
1,@s 0:1,Gesammt Verbrauch,kwh,total_in,0
1,@s 1:100,Gesammt Durchfluss,m3,total_flow,2
1,@s 2:1,Laufzeit,h,time,0
1,@s 3:100,Vorlauf Temperatur,C°,temp_in,2
1,@s 4:100,Rücklauf Temperatur,C°,temp_out,2
1,@s 5:100,Temperatur differenz,C°,delta_t,2
1,@s 6:10,Aktuelle Leistung,kW,power,1
1,@s 7:1,Durchlfuss,l/h,flow,0
1,@s 8:10,maximale Leistung,kWP,max_power,1
1,@s 9:1,Info,,info,0
1,=so3,256
#
</code></pre></div> </details> <h3 id=sensus-pollucom-f-warmemengenzahler-heatmeter-used-with-hichi-ir-interface>Sensus Pollucom F (Wärmemengenzähler, HeatMeter; used with Hichi IR interface)<a class=headerlink href=#sensus-pollucom-f-warmemengenzahler-heatmeter-used-with-hichi-ir-interface title="Permanent link">~</a></h3> <details class=summary> <summary>View script</summary> <div class=highlight><pre><span></span><code>&gt;D
;start, define variables
wkup=1
&gt;B
;setup sensor
-&gt;sensor53 r
-&gt;sensor53 d0
-&gt;sensor53 l255
;tper=300 
&gt;S
; this device is powered by battery
; frequent requests will lead to blocking and reduces lifetime
; starting sequence:
;- press button on device once
;- restart Tasmota with script sctivated (you have 5 minutes to do this)
;- after 30s first data is retrieved and logged (including SYSLOG depending on Tasmota log config)
    ;- after 60s WebUI is updated first time
;- now every 45min a new request is done, updated in WebUI (and transferred by MQTT every TPER period); polling period needs to be less 60min to avoid sleep mode of device!
if upsecs==30 {
    -&gt;sensor53 d1
    print read meter (debug log 30s)
    =#readmeter
}
if upsecs==60 {
    -&gt;sensor53 d0
    print read meter (WebUI update 60s)
    =#readmeter
}
if upsecs%2700==0 {
    print read meter (modulo 2700s)
    =#readmeter
}

&gt;M 1
+1,3,rE1,0,2400,WAERME,1
; note that maximum of chars per line is 8 so set buffer to 8 to get non-delayed decoding
1,=so3,8
1,68080072bcd8@1,Zählernummer,,Zählernummer,0
; note that 16 = 0+16 means that this particular value has 0 comma places but is transferred immediately by MQTT
1,0c06bcd8@1,Energie,kWh,Energie,16
1,0c13bcd8@1000,Volumen,m³,Volumen,0
1,0c3bbcd8@1,Durchfluss,l/h,Durchfluss,0
1,0c2bbcd8@1,Leistung,W,Leistung,0
1,025auuUU@10,Durchflusstemperatur,°C,Durchflusstemperatur,1
1,025euuUU@10,Rücklauftemperatur,°C,Rücklauftemperatur,1
1,0360uuUU@1000,Temperaturdifferenz,K,Temperaturdifferenz,3
#

#readmeter
print wakeup start
;set serial protocol
sml(-1 1 &quot;2400:8N1&quot;)
;send 0x55 for 2,2 seconds with 8N1 (53x), 2400 baud (wakeup sequence)
for wkup 1 53 1
sml(1 1 &quot;55555555555555555555&quot;)
next
print wakeup end
wkup=1
print wait for the meter
;wait for the meter to wake up
delay(350)
;switch serial protocol
sml(-1 1 &quot;2400:8E1&quot;)
print Init MBus 1040004016; SCAN for Device 00
sml(1 1 &quot;1040004016&quot;)
delay(350)
print request data 107BFE7916 aktuelle Werte!!!
sml(1 1 &quot;107BFE7916&quot;)
;print request data 105BFE5916
;sml(1 1 &quot;105BFE5916&quot;)
print request data finished
#
</code></pre></div> </details> <h3 id=engelmann-sensostar-e-heat-meter-used-with-hichi-ir-interface>Engelmann SensoStar E (Heat meter, used with Hichi IR interface)<a class=headerlink href=#engelmann-sensostar-e-heat-meter-used-with-hichi-ir-interface title="Permanent link">~</a></h3> <details class=summary> <summary>View script</summary> <div class=highlight><pre><span></span><code>&gt;D
wkup=1

&gt;B
;setup sensor
-&gt;sensor53 d0
-&gt;sensor53 r

&gt;S
; this device is powered by battery
; frequent requests will lead to blocking and reduces lifetime
; starting sequence:
;- press button on device once
;- restart Tasmota with script activated (you have 5 minutes to do this)
;- after 30s data is retrieved and logged (including SYSLOG depending on Tasmota log config)
;- now every 45min a new request is done, updated in WebUI (and transferred by MQTT every TPER period); polling period needs to be less 60min to avoid sleep mode of device!

if ((upsecs==1) or (upsecs%2700==0)) {
    print read meter
    =#readmeter
}

if upsecs==30 {
    -&gt;sensor53 d1
    print read meter (dump)
    =#readmeter
}

if upsecs==60 {
    ; disable dump
    -&gt;sensor53 d0
}


&gt;M 1
+1,3,rE1,0,2400,WAERME,1
1,=so3,32
1,0478u32s@1,Zählernummer,,Zählernummer,0
1,0406u32s@1000,Energie,MWh,Energie,3
1,0413u32s@1000,Volumen,m³,Volumen,3
1,042bu32s@1,Leistung,W,Leistung,0
1,142bu32s@1,Max. Leistung,W,Max. Leistung,0
1,043bu32s@1000,Volumenstrom,m³/h,Volumenstrom,3
1,143bu32s@1000,Max. Volumenstrom,m³/h,Max. Volumenstrom,3
1,025buuUU@1,Vorlauftemperatur,°C,Vorlauftemperatur,0
1,025fuuUU@1,Rücklauftemperatur,°C,Rücklauftemperatur,0
1,0261ssSS@100,Temperaturdifferenz,°C,Temperaturdifferenz,2
1,0223uuUU@1,Betriebsdauer,Tage,Betriebsdauer,0
1,4406u32s@1000,Stichtag Energie,MWh,Letzter Stichtag Energie,3
1,4413u32s@1000,Stichtag Volumen,m³,Letzter Stichtag Volumen,3
#

#readmeter
print wakeup start
;set serial protocol
sml(-1 1 &quot;2400:8N1&quot;)
;send 0x55 for 2,2 seconds with 8N1 (53x), 2400 baud (wakeup sequence)
for wkup 1 53 1
sml(1 1 &quot;55555555555555555555&quot;)
next
print wakeup end
wkup=1
print wait for the meter
delay(350)
;switch serial protocol
sml(-1 1 &quot;2400:8E1&quot;)
print init MBus (1040004016); scan for device 00
sml(1 1 &quot;1040004016&quot;)
delay(350)
print request current data (107BFE7916)
sml(1 1 &quot;107BFE7916&quot;)
print request current data finished
#
</code></pre></div> </details> <h3 id=sagemcom-ma105ma304-single-phase3-phase-smart-meter-obis-ascii>Sagemcom MA105/MA304 single phase/3-phase smart meter (OBIS ASCII)<a class=headerlink href=#sagemcom-ma105ma304-single-phase3-phase-smart-meter-obis-ascii title="Permanent link">~</a></h3> <p>Read the comments for 1/3-phase arrangements. Last month summary is not decoded as I find it useless but it can be added, see Sanxing SX6x1.</p> <details class=summary> <summary>View script</summary> <div class=highlight><pre><span></span><code>&gt;D
; Sagemcom MA105/MA304 smart meters - Tasmota script for OBIS ASCII

&gt;B
; don&#39;t send teleperiod MQTT at boot
smlj=0
-&gt;sensor53 r

&gt;R
; don&#39;t send teleperiod MQTT at script restart
smlj=0

&gt;S
; only send teleperiod MQTT if 22 seconds passed since boot
if upsecs&gt;22
then
smlj|=1
endif

&gt;M 1
; meter definition
+1,35,o,16,115200,ma105
; invert the HW serial line as the P1 port uses inverse signaling
; no external signal inverter circuit is needed
1,=so2,4
; instantaneous metrics
1,1-0:32.7.0(@1,Voltage,V,voltage_l1,17
; uncomment for 3-phase meters
; 1,1-0:52.7.0(@1,Voltage,V,voltage_l2,17
; 1,1-0:72.7.0(@1,Voltage,V,voltage_l3,17
1,1-0:1.7.0(@1,Power import (+A),kW,power_import,19
1,1-0:2.7.0(@1,Power export (-A),kW,power_export,19
1,1-0:31.7.0(@1,Current,A,current_l1,16
; uncomment for 3-phase meters
; 1,1-0:51.7.0(@1,Current,A,current_l2,16
; 1,1-0:71.7.0(@1,Current,A,current_l3,16
1,1-0:14.7.0(@1,Frequency,Hz,frequency,18
; comment out for 3-phase meters
1,1-0:13.7.0(@1,Power factor,,power_factor,19
; uncomment for 3-phase meters
; 1-0:33.7.0(@1,Power factor,,power_factor1,19
; 1-0:53.7.0(@1,Power factor,,power_factor2,19
; 1-0:73.7.0(@1,Power factor,,power_factor3,19
1,1-0:5.7.0(@1,Reactive power (QI),kVAr,power_reactive_q1,19
1,1-0:6.7.0(@1,Reactive power (QII),kVAr,power_reactive_q2,19
1,1-0:7.7.0(@1,Reactive power (QIII),kVAr,power_reactive_q3,19
1,1-0:8.7.0(@1,Reactive power (QIV),kVAr,power_reactive_q4,19
1,=h&lt;hr/&gt;
; teleperiod metrics
1,0-0:96.14.0(@1,Current tariff,,tariff,0
1,1-0:1.8.0(@1,Import energy (+A),kWh,energy_import,3
1,1-0:1.8.1(@1,Import energy (+A) - T1,kWh,energy_import_t1,3
1,1-0:1.8.2(@1,Import energy (+A) - T2,kWh,energy_import_t2,3
1,1-0:1.8.3(@1,Import energy (+A) - T3,kWh,energy_import_t3,3
1,1-0:1.8.4(@1,Import energy (+A) - T4,kWh,energy_import_t4,3
1,1-0:2.8.0(@1,Export energy (-A),kWh,energy_export,3
1,1-0:2.8.1(@1,Export energy (-A) - T1,kWh,energy_export_t1,3
1,1-0:2.8.2(@1,Export energy (-A) - T2,kWh,energy_export_t2,3
1,1-0:2.8.3(@1,Export energy (-A) - T3,kWh,energy_export_t3,3
1,1-0:2.8.4(@1,Export energy (-A) - T4,kWh,energy_export_t4,3
1,1-0:15.8.0(@1,Combined energy,kWh,energy_active,3
1,1-0:3.8.0(@1,Reactive imp. nrg (+R),kVArh,power_import_reactive,3
1,1-0:4.8.0(@1,Reactive exp. nrg (-R),kVArh,power_export_reactive,3
1,1-0:5.8.0(@1,Reactive energy (QI),kVArh,energy_active_q1,3
1,1-0:6.8.0(@1,Reactive energy (QII),kVArh,energy_active_q2,3
1,1-0:7.8.0(@1,Reactive energy (QIII),kVArh,energy_active_q3,3
1,1-0:8.8.0(@1,Reactive energy (QIV),kVArh,energy_active_q4,3
1,1-0:31.4.0(@1,Current limit 1 thresh.,A,current_limit_1,2
#
</code></pre></div> </details> <p>Some extra status and textual metrics can be added per the following.</p> <details class=summary> <summary>View script</summary> <div class=highlight><pre><span></span><code>; extra metrics
1,0-0:96.50.68(@1,Breaker 1 status,,breaker_1_status,0
1,0-0:96.3.10(@1,Breaker 2 status,,breaker_2_status,0
1,0-0:17.0.0(@1,Limiter threshold,A,limiter_threshold,0

; extra textual metrics - only one can be used at a time
1,0-0:1.0.0(@#),Time,time,time,0
1,0-0:42.0.0(@#),COSEM device name,text,cosem_name,0
1,0-0:96.1.0(@#),Meter serial number,text,meter_serial,0
1,0-0:98.1.0(@#),Last month data,text,history_last_month,0
1,0-0:96.13.0(@#),Utility company msg,text,message,0
</code></pre></div> </details> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> <button type=button class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg> Back to top </button> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> <div class=md-social> <a href=https://discord.gg/Ks2Kzd4 target=_blank rel=noopener title=discord.gg class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 576 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M492.5 69.8c-.2-.3-.4-.6-.8-.7-38.1-17.5-78.4-30-119.7-37.1-.4-.1-.8 0-1.1.1s-.6.4-.8.8c-5.5 9.9-10.5 20.2-14.9 30.6-44.6-6.8-89.9-6.8-134.4 0-4.5-10.5-9.5-20.7-15.1-30.6-.2-.3-.5-.6-.8-.8s-.7-.2-1.1-.2C162.5 39 122.2 51.5 84.1 69c-.3.1-.6.4-.8.7C7.1 183.5-13.8 294.6-3.6 404.2c0 .3.1.5.2.8s.3.4.5.6c44.4 32.9 94 58 146.8 74.2.4.1.8.1 1.1 0s.7-.4.9-.7c11.3-15.4 21.4-31.8 30-48.8.1-.2.2-.5.2-.8s0-.5-.1-.8-.2-.5-.4-.6-.4-.3-.7-.4c-15.8-6.1-31.2-13.4-45.9-21.9-.3-.2-.5-.4-.7-.6s-.3-.6-.3-.9 0-.6.2-.9.3-.5.6-.7c3.1-2.3 6.2-4.7 9.1-7.1.3-.2.6-.4.9-.4s.7 0 1 .1c96.2 43.9 200.4 43.9 295.5 0 .3-.1.7-.2 1-.2s.7.2.9.4c2.9 2.4 6 4.9 9.1 7.2.2.2.4.4.6.7s.2.6.2.9-.1.6-.3.9-.4.5-.6.6c-14.7 8.6-30 15.9-45.9 21.8-.2.1-.5.2-.7.4s-.3.4-.4.7-.1.5-.1.8.1.5.2.8c8.8 17 18.8 33.3 30 48.8.2.3.6.6.9.7s.8.1 1.1 0c52.9-16.2 102.6-41.3 147.1-74.2.2-.2.4-.4.5-.6s.2-.5.2-.8c12.3-126.8-20.5-236.9-86.9-334.5zm-302 267.7c-29 0-52.8-26.6-52.8-59.2s23.4-59.2 52.8-59.2c29.7 0 53.3 26.8 52.8 59.2 0 32.7-23.4 59.2-52.8 59.2m195.4 0c-29 0-52.8-26.6-52.8-59.2s23.4-59.2 52.8-59.2c29.7 0 53.3 26.8 52.8 59.2 0 32.7-23.2 59.2-52.8 59.2"/></svg> </a> <a href=https://t.me/tasmota target=_blank rel=noopener title=t.me class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M256 8a248 248 0 1 0 0 496 248 248 0 1 0 0-496m115 168.7c-3.7 39.2-19.9 134.4-28.1 178.3-3.5 18.6-10.3 24.8-16.9 25.4-14.4 1.3-25.3-9.5-39.3-18.7-21.8-14.3-34.2-23.2-55.3-37.2-24.5-16.1-8.6-25 5.3-39.5 3.7-3.8 67.1-61.5 68.3-66.7.2-.7.3-3.1-1.2-4.4s-3.6-.8-5.1-.5c-2.2.5-37.1 23.5-104.6 69.1-9.9 6.8-18.9 10.1-26.9 9.9-8.9-.2-25.9-5-38.6-9.1-15.5-5-27.9-7.7-26.8-16.3.6-4.5 6.7-9 18.4-13.7 72.3-31.5 120.5-52.3 144.6-62.3 68.9-28.6 83.2-33.6 92.5-33.8 2.1 0 6.6.5 9.6 2.9 2 1.7 3.2 4.1 3.5 6.7.5 3.2.6 6.5.4 9.8z"/></svg> </a> <a href=https://github.com/tasmota target=_blank rel=noopener title=github.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M202.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1M496 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2m-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3m-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"annotate": null, "base": "..", "features": ["navigation.instant", "navigation.tabs", "navigation.tabs.sticky", "navigation.top", "navigation.tracking", "content.action.edit", "content.code.copy"], "search": "../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script> <script src=../assets/javascripts/bundle.79ae519e.min.js></script> <script src=https://unpkg.com/tablesort@5.3.0/dist/tablesort.min.js></script> <script src=../extra_javascript/tablesort.js></script> </body> </html>