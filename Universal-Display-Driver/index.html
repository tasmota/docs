<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Documentation (Wiki) for Tasmota"><link href=https://tasmota.github.io/docs/Universal-Display-Driver/ rel=canonical><link href=../Device-Groups/ rel=prev><link href=../Displays/ rel=next><link rel=icon href=../_media/favicon.ico><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.7.3"><title>Universal Display and Universal Touch drivers (uDisplay/uTouch) - Tasmota</title><link rel=stylesheet href=../assets/stylesheets/main.484c7ddc.min.css><link rel=stylesheet href=../assets/stylesheets/palette.ab4e12ef.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Barlow:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Barlow";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=../assets/css/anchor-fix.css><script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><script id=__analytics>function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config","G-8J08F8X90S"),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","G-8J08F8X90S",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=G-8J08F8X90S",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script><script>"undefined"!=typeof __md_analytics&&__md_analytics()</script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=blue data-md-color-accent=indigo> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#universal-display-and-universal-touch-drivers-udisplayutouch class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class="md-header md-header--shadow md-header--lifted" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=.. title=Tasmota class="md-header__button md-logo" aria-label=Tasmota data-md-component=logo> <img src=../_media/logo.svg alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> Tasmota </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Universal Display and Universal Touch drivers (uDisplay/uTouch) </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme=default data-md-color-primary=blue data-md-color-accent=indigo aria-label="Switch to dark mode" type=radio name=__palette id=__palette_0> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6m0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4M7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme=slate data-md-color-primary=blue data-md-color-accent=deep-purple aria-label="Switch to light mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_0 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3"/></svg> </label> </form> <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg> </button> </nav> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/arendst/tasmota title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg> </div> <div class=md-source__repository> arendst/tasmota </div> </a> </div> </nav> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=.. class=md-tabs__link> Home </a> </li> <li class="md-tabs__item md-tabs__item--active"> <a href=../Features/ class=md-tabs__link> Features </a> </li> <li class=md-tabs__item> <a href=../ESP32/ class=md-tabs__link> ESP32 </a> </li> <li class=md-tabs__item> <a href=../Integrations/ class=md-tabs__link> Smart Home Integrations </a> </li> <li class=md-tabs__item> <a href=../Supported-Peripherals/ class=md-tabs__link> Peripherals </a> </li> <li class=md-tabs__item> <a href=../Configuration-Procedure-for-New-Devices/ class=md-tabs__link> Supported Devices </a> </li> <li class=md-tabs__item> <a href=../FAQ/ class=md-tabs__link> Help </a> </li> <li class=md-tabs__item> <a href=http://tasmota.github.io/install class=md-tabs__link> Web Installer </a> </li> </ul> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=.. title=Tasmota class="md-nav__button md-logo" aria-label=Tasmota data-md-component=logo> <img src=../_media/logo.svg alt=logo> </a> Tasmota </label> <div class=md-nav__source> <a href=https://github.com/arendst/tasmota title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg> </div> <div class=md-source__repository> arendst/tasmota </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_1> <label class=md-nav__link for=__nav_1 id=__nav_1_label tabindex=0> <span class=md-ellipsis> Home </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_1_label aria-expanded=false> <label class=md-nav__title for=__nav_1> <span class="md-nav__icon md-icon"></span> Home </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=.. class=md-nav__link> <span class=md-ellipsis> News </span> </a> </li> <li class=md-nav__item> <a href=../About/ class=md-nav__link> <span class=md-ellipsis> About </span> </a> </li> <li class=md-nav__item> <a href=../Getting-Started/ class=md-nav__link> <span class=md-ellipsis> Getting Started </span> </a> </li> <li class=md-nav__item> <a href=../Upgrading/ class=md-nav__link> <span class=md-ellipsis> Upgrading </span> </a> </li> <li class=md-nav__item> <a href=../MQTT/ class=md-nav__link> <span class=md-ellipsis> MQTT </span> </a> </li> <li class=md-nav__item> <a href=../Commands/ class=md-nav__link> <span class=md-ellipsis> Commands </span> </a> </li> <li class=md-nav__item> <a href=../Templates/ class=md-nav__link> <span class=md-ellipsis> Templates </span> </a> </li> <li class=md-nav__item> <a href=../Components/ class=md-nav__link> <span class=md-ellipsis> Components </span> </a> </li> <li class=md-nav__item> <a href=../Modules/ class=md-nav__link> <span class=md-ellipsis> Modules </span> </a> </li> <li class=md-nav__item> <a href=../Peripherals/ class=md-nav__link> <span class=md-ellipsis> Peripherals </span> </a> </li> <li class=md-nav__item> <a href=../WebUI/ class=md-nav__link> <span class=md-ellipsis> WebUI </span> </a> </li> <li class=md-nav__item> <a href=../Firmware-Builds/ class=md-nav__link> <span class=md-ellipsis> Firmware Builds </span> </a> </li> <li class=md-nav__item> <a href=../Compile-your-build/ class=md-nav__link> <span class=md-ellipsis> Compiling </span> </a> </li> <li class=md-nav__item> <a href=../Contributing/ class=md-nav__link> <span class=md-ellipsis> Contributing </span> </a> </li> <li class=md-nav__item> <a href=../Download/ class=md-nav__link> <span class=md-ellipsis> Download </span> </a> </li> <li class=md-nav__item> <a href=https://github.com/arendst/Tasmota/discussions/categories/show-and-tell class=md-nav__link> <span class=md-ellipsis> Project Showcase </span> </a> </li> <li class=md-nav__item> <a href=../For-Developers/ class=md-nav__link> <span class=md-ellipsis> For Developers </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2 checked> <label class=md-nav__link for=__nav_2 id=__nav_2_label tabindex> <span class=md-ellipsis> Features </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_2_label aria-expanded=true> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> Features </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../Features/ class=md-nav__link> <span class=md-ellipsis> Introduction </span> </a> </li> <li class=md-nav__item> <a href=../ADC/ class=md-nav__link> <span class=md-ellipsis> Analog Pin </span> </a> </li> <li class=md-nav__item> <a href=../ArtNet/ class=md-nav__link> <span class=md-ellipsis> ArtNet DMX </span> </a> </li> <li class=md-nav__item> <a href=../Buttons-and-Switches/ class=md-nav__link> <span class=md-ellipsis> Buttons and Switches </span> </a> </li> <li class=md-nav__item> <a href=../DeepSleep/ class=md-nav__link> <span class=md-ellipsis> DeepSleep </span> </a> </li> <li class=md-nav__item> <a href=../Device-Groups/ class=md-nav__link> <span class=md-ellipsis> Device Groups </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> Universal Display and Universal Touch drivers (uDisplay/uTouch) </span> <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> Universal Display and Universal Touch drivers (uDisplay/uTouch) </span> </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#migrating-to-udisplay class=md-nav__link> <span class=md-ellipsis> Migrating to uDisplay </span> </a> <nav class=md-nav aria-label="Migrating to uDisplay"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#step-1-check-that-your-display-is-supported-by-udisplay-driver class=md-nav__link> <span class=md-ellipsis> Step 1. Check that your display is supported by uDisplay driver </span> </a> </li> <li class=md-nav__item> <a href=#step-2-flash-with-udisplay-compatible-binary class=md-nav__link> <span class=md-ellipsis> Step 2. Flash with uDisplay compatible binary </span> </a> </li> <li class=md-nav__item> <a href=#step-3-use-autoconf-esp32-only class=md-nav__link> <span class=md-ellipsis> Step 3. Use autoconf (ESP32 only) </span> </a> </li> <li class=md-nav__item> <a href=#step-4-configure-gpios class=md-nav__link> <span class=md-ellipsis> Step 4. Configure GPIOs </span> </a> </li> <li class=md-nav__item> <a href=#step-5-configure-the-displayini-descriptor-file class=md-nav__link> <span class=md-ellipsis> Step 5. Configure the display.ini descriptor file </span> </a> </li> <li class=md-nav__item> <a href=#step-6-restart class=md-nav__link> <span class=md-ellipsis> Step 6. Restart </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#migrating-to-utouch class=md-nav__link> <span class=md-ellipsis> Migrating to uTouch </span> </a> <nav class=md-nav aria-label="Migrating to uTouch"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#step-1-check-you-displayini class=md-nav__link> <span class=md-ellipsis> Step 1. Check you display.ini </span> </a> </li> <li class=md-nav__item> <a href=#step-2-add-utouch-section-to-displayini class=md-nav__link> <span class=md-ellipsis> Step 2. Add uTouch section to display.ini </span> </a> </li> <li class=md-nav__item> <a href=#ft5206-example class=md-nav__link> <span class=md-ellipsis> FT5206 example </span> </a> </li> <li class=md-nav__item> <a href=#xpt2046-example class=md-nav__link> <span class=md-ellipsis> XPT2046 example </span> </a> </li> <li class=md-nav__item> <a href=#gt911-example class=md-nav__link> <span class=md-ellipsis> GT911 example </span> </a> </li> <li class=md-nav__item> <a href=#simple-resitive-touch-example class=md-nav__link> <span class=md-ellipsis> Simple resitive touch example </span> </a> </li> <li class=md-nav__item> <a href=#step-3-restart class=md-nav__link> <span class=md-ellipsis> Step 3. Restart </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#universal-display-driver-udisplay class=md-nav__link> <span class=md-ellipsis> Universal Display Driver (uDisplay) </span> </a> <nav class=md-nav aria-label="Universal Display Driver (uDisplay)"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#descriptor-file class=md-nav__link> <span class=md-ellipsis> Descriptor File </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#universal-touch-driver-utouch class=md-nav__link> <span class=md-ellipsis> Universal Touch Driver (uTouch) </span> </a> <nav class=md-nav aria-label="Universal Touch Driver (uTouch)"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#ft5206-example_1 class=md-nav__link> <span class=md-ellipsis> FT5206 example </span> </a> </li> <li class=md-nav__item> <a href=#xpt2046-example_1 class=md-nav__link> <span class=md-ellipsis> XPT2046 example </span> </a> </li> <li class=md-nav__item> <a href=#gt911-example_1 class=md-nav__link> <span class=md-ellipsis> GT911 example </span> </a> </li> <li class=md-nav__item> <a href=#simple-resitive-touch-example_1 class=md-nav__link> <span class=md-ellipsis> Simple resitive touch example </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../Displays/ class=md-nav__link> <span class=md-ellipsis> Displays </span> </a> </li> <li class=md-nav__item> <a href=../Dynamic-Sleep/ class=md-nav__link> <span class=md-ellipsis> Dynamic Sleep </span> </a> </li> <li class=md-nav__item> <a href=../I2CDEVICES/ class=md-nav__link> <span class=md-ellipsis> I2C Devices </span> </a> </li> <li class=md-nav__item> <a href=../I2S-Audio/ class=md-nav__link> <span class=md-ellipsis> I2S Audio </span> </a> </li> <li class=md-nav__item> <a href=../IPv6/ class=md-nav__link> <span class=md-ellipsis> IPv6 </span> </a> </li> <li class=md-nav__item> <a href=../Lights/ class=md-nav__link> <span class=md-ellipsis> Lights </span> </a> </li> <li class=md-nav__item> <a href=../Matter/ class=md-nav__link> <span class=md-ellipsis> Matter </span> </a> </li> <li class=md-nav__item> <a href=../PIR-Motion-Sensors/ class=md-nav__link> <span class=md-ellipsis> PIR Motion Sensors </span> </a> </li> <li class=md-nav__item> <a href=../Power-Monitoring-Calibration/ class=md-nav__link> <span class=md-ellipsis> Power Monitoring Calibration </span> </a> </li> <li class=md-nav__item> <a href=../PWM-dimmer-switch/ class=md-nav__link> <span class=md-ellipsis> PWM Dimmer </span> </a> </li> <li class=md-nav__item> <a href=../Rules/ class=md-nav__link> <span class=md-ellipsis> Rules </span> </a> </li> <li class=md-nav__item> <a href=../Scripting-Language/ class=md-nav__link> <span class=md-ellipsis> Scripting Language </span> </a> </li> <li class=md-nav__item> <a href=../Blinds-and-Shutters/ class=md-nav__link> <span class=md-ellipsis> Shutters and Blinds </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_21> <label class=md-nav__link for=__nav_2_21 id=__nav_2_21_label tabindex=0> <span class=md-ellipsis> Protocol Bridging </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_21_label aria-expanded=false> <label class=md-nav__title for=__nav_2_21> <span class="md-nav__icon md-icon"></span> Protocol Bridging </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../TasmotaClient/ class=md-nav__link> <span class=md-ellipsis> Arduino MCU </span> </a> </li> <li class=md-nav__item> <a href=../Bluetooth/ class=md-nav__link> <span class=md-ellipsis> BLE Gateway </span> </a> </li> <li class=md-nav__item> <a href=../DALI/ class=md-nav__link> <span class=md-ellipsis> DALI </span> </a> </li> <li class=md-nav__item> <a href=../HDMI_CEC/ class=md-nav__link> <span class=md-ellipsis> HDMI CEC </span> </a> </li> <li class=md-nav__item> <a href=../Tasmota-IR/ class=md-nav__link> <span class=md-ellipsis> IR Communication </span> </a> </li> <li class=md-nav__item> <a href=../Projector/ class=md-nav__link> <span class=md-ellipsis> LCD/DLP Projector Control </span> </a> </li> <li class=md-nav__item> <a href=../LoRa-and-LoRaWan-Bridge/ class=md-nav__link> <span class=md-ellipsis> LoRa and LoRaWan Bridge </span> </a> </li> <li class=md-nav__item> <a href=../Modbus-Bridge/ class=md-nav__link> <span class=md-ellipsis> Modbus Bridge </span> </a> </li> <li class=md-nav__item> <a href=../OpenTherm/ class=md-nav__link> <span class=md-ellipsis> OpenTherm </span> </a> </li> <li class=md-nav__item> <a href=../RF-Protocol/ class=md-nav__link> <span class=md-ellipsis> RF Communication </span> </a> </li> <li class=md-nav__item> <a href=../Serial-to-TCP-Bridge/ class=md-nav__link> <span class=md-ellipsis> Serial to TCP Bridge </span> </a> </li> <li class=md-nav__item> <a href=../TWAI/ class=md-nav__link> <span class=md-ellipsis> TWAI </span> </a> </li> <li class=md-nav__item> <a href=../Telegram/ class=md-nav__link> <span class=md-ellipsis> Telegram </span> </a> </li> <li class=md-nav__item> <a href=../Zigbee/ class=md-nav__link> <span class=md-ellipsis> Zigbee </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../Smart-Meter-Interface/ class=md-nav__link> <span class=md-ellipsis> Smart Meter Interface </span> </a> </li> <li class=md-nav__item> <a href=../Thermostat/ class=md-nav__link> <span class=md-ellipsis> Thermostat </span> </a> </li> <li class=md-nav__item> <a href=../Timers/ class=md-nav__link> <span class=md-ellipsis> Timers </span> </a> </li> <li class=md-nav__item> <a href=../TLS/ class=md-nav__link> <span class=md-ellipsis> TLS Secured MQTT </span> </a> </li> <li class=md-nav__item> <a href=../TuyaMCU/ class=md-nav__link> <span class=md-ellipsis> TuyaMCU </span> </a> </li> <li class=md-nav__item> <a href=../UFS/ class=md-nav__link> <span class=md-ellipsis> Universal File System </span> </a> </li> <li class=md-nav__item> <a href=../Range-Extender/ class=md-nav__link> <span class=md-ellipsis> Wi-Fi Range Extender </span> </a> </li> <li class=md-nav__item> <a href=../Wireguard/ class=md-nav__link> <span class=md-ellipsis> Wireguard VPN </span> </a> </li> <li class=md-nav__item> <a href=../Tutorials/ class=md-nav__link> <span class=md-ellipsis> Projects and Tutorials </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3> <label class=md-nav__link for=__nav_3 id=__nav_3_label tabindex=0> <span class=md-ellipsis> ESP32 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=false> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> ESP32 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../ESP32/ class=md-nav__link> <span class=md-ellipsis> Tasmota32 Features </span> </a> </li> <li class=md-nav__item> <a href=../Berry/ class=md-nav__link> <span class=md-ellipsis> Berry </span> </a> </li> <li class=md-nav__item> <a href=../Bluetooth_ESP32/ class=md-nav__link> <span class=md-ellipsis> Bluetooth Low Energy </span> </a> </li> <li class=md-nav__item> <a href=../LVGL/ class=md-nav__link> <span class=md-ellipsis> LVGL </span> </a> </li> <li class=md-nav__item> <a href=../HASPmota/ class=md-nav__link> <span class=md-ellipsis> HASPmota </span> </a> </li> <li class=md-nav__item> <a href=../Matter/ class=md-nav__link> <span class=md-ellipsis> Matter </span> </a> </li> <li class=md-nav__item> <a href=../Tasmota-Extension/ class=md-nav__link> <span class=md-ellipsis> Tasmota Extension </span> </a> </li> <li class=md-nav__item> <a href=../Tasmota-Application/ class=md-nav__link> <span class=md-ellipsis> Tasmota Application Files </span> </a> </li> <li class=md-nav__item> <a href=../TFL/ class=md-nav__link> <span class=md-ellipsis> TensorFlow Lite </span> </a> </li> <li class=md-nav__item> <a href=../TouchPin/ class=md-nav__link> <span class=md-ellipsis> Touch GPIOs </span> </a> </li> <li class=md-nav__item> <a href=../Safeboot/ class=md-nav__link> <span class=md-ellipsis> Safeboot Partition Layout </span> </a> </li> <li class=md-nav__item> <a href=https://templates.blakadder.com/esp32 class=md-nav__link> <span class=md-ellipsis> Supported Devices </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4> <label class=md-nav__link for=__nav_4 id=__nav_4_label tabindex=0> <span class=md-ellipsis> Smart Home Integrations </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_4_label aria-expanded=false> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Smart Home Integrations </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../Integrations/ class=md-nav__link> <span class=md-ellipsis> Introduction </span> </a> </li> <li class=md-nav__item> <a href=../Alexa/ class=md-nav__link> <span class=md-ellipsis> Alexa </span> </a> </li> <li class=md-nav__item> <a href=../AWS-IoT/ class=md-nav__link> <span class=md-ellipsis> AWS IoT </span> </a> </li> <li class=md-nav__item> <a href=../Domoticz/ class=md-nav__link> <span class=md-ellipsis> Domoticz </span> </a> </li> <li class=md-nav__item> <a href=../Home-Assistant/ class=md-nav__link> <span class=md-ellipsis> Home Assistant </span> </a> </li> <li class=md-nav__item> <a href=../Homebridge/ class=md-nav__link> <span class=md-ellipsis> Homebridge </span> </a> </li> <li class=md-nav__item> <a href=https://homey.app/en-us/app/com.paveld.tasmota/Tasmota-MQTT/ class=md-nav__link> <span class=md-ellipsis> Homey </span> </a> </li> <li class=md-nav__item> <a href=../HomeSeer/ class=md-nav__link> <span class=md-ellipsis> HomeSeer </span> </a> </li> <li class=md-nav__item> <a href=../IP-Symcon/ class=md-nav__link> <span class=md-ellipsis> IP Symcon </span> </a> </li> <li class=md-nav__item> <a href=../KNX/ class=md-nav__link> <span class=md-ellipsis> KNX </span> </a> </li> <li class=md-nav__item> <a href=../NodeRed/ class=md-nav__link> <span class=md-ellipsis> NodeRed </span> </a> </li> <li class=md-nav__item> <a href=../nymea/ class=md-nav__link> <span class=md-ellipsis> nymea </span> </a> </li> <li class=md-nav__item> <a href=../Octoprint/ class=md-nav__link> <span class=md-ellipsis> OctoPrint </span> </a> </li> <li class=md-nav__item> <a href=../openHAB/ class=md-nav__link> <span class=md-ellipsis> openHAB </span> </a> </li> <li class=md-nav__item> <a href=../otto/ class=md-nav__link> <span class=md-ellipsis> Otto </span> </a> </li> <li class=md-nav__item> <a href=https://github.com/arendst/Tasmota/issues/3769 class=md-nav__link> <span class=md-ellipsis> IOBroker </span> </a> </li> <li class=md-nav__item> <a href=https://github.com/tim-hellhake/tasmota-adapter class=md-nav__link> <span class=md-ellipsis> Mozilla WebThings Adapter </span> </a> </li> <li class=md-nav__item> <a href=https://github.com/hongtat/tasmota-connect class=md-nav__link> <span class=md-ellipsis> SmartThings </span> </a> </li> <li class=md-nav__item> <a href=https://github.com/Gifford47/tasmohab/blob/master/README.md class=md-nav__link> <span class=md-ellipsis> Tasmohab </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../Supported-Peripherals/ class=md-nav__link> <span class=md-ellipsis> Peripherals </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6> <label class=md-nav__link for=__nav_6 id=__nav_6_label tabindex=0> <span class=md-ellipsis> Supported Devices </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_6_label aria-expanded=false> <label class=md-nav__title for=__nav_6> <span class="md-nav__icon md-icon"></span> Supported Devices </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../Configuration-Procedure-for-New-Devices/ class=md-nav__link> <span class=md-ellipsis> Configure Unknown Device </span> </a> </li> <li class=md-nav__item> <a href="https://templates.blakadder.com/ " target='_blank""' class=md-nav__link> <span class=md-ellipsis> All Supported Devices </span> </a> </li> <li class=md-nav__item> <a href=../Pinouts/ class=md-nav__link> <span class=md-ellipsis> Wi-Fi Module Pinouts </span> </a> </li> <li class=md-nav__item> <a href=../Supported-Modules/ class=md-nav__link> <span class=md-ellipsis> Supported Modules </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_7> <label class=md-nav__link for=__nav_7 id=__nav_7_label tabindex=0> <span class=md-ellipsis> Help </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_7_label aria-expanded=false> <label class=md-nav__title for=__nav_7> <span class="md-nav__icon md-icon"></span> Help </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../FAQ/ class=md-nav__link> <span class=md-ellipsis> FAQ </span> </a> </li> <li class=md-nav__item> <a href=../Troubleshooting/ class=md-nav__link> <span class=md-ellipsis> Troubleshooting </span> </a> </li> <li class=md-nav__item> <a href=../Device-Recovery/ class=md-nav__link> <span class=md-ellipsis> Device Recovery </span> </a> </li> <li class=md-nav__item> <a href="https://discord.gg/Ks2Kzd4 " target='_blank""' class=md-nav__link> <span class=md-ellipsis> Discord Support </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=http://tasmota.github.io/install class=md-nav__link> <span class=md-ellipsis> Web Installer </span> </a> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#migrating-to-udisplay class=md-nav__link> <span class=md-ellipsis> Migrating to uDisplay </span> </a> <nav class=md-nav aria-label="Migrating to uDisplay"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#step-1-check-that-your-display-is-supported-by-udisplay-driver class=md-nav__link> <span class=md-ellipsis> Step 1. Check that your display is supported by uDisplay driver </span> </a> </li> <li class=md-nav__item> <a href=#step-2-flash-with-udisplay-compatible-binary class=md-nav__link> <span class=md-ellipsis> Step 2. Flash with uDisplay compatible binary </span> </a> </li> <li class=md-nav__item> <a href=#step-3-use-autoconf-esp32-only class=md-nav__link> <span class=md-ellipsis> Step 3. Use autoconf (ESP32 only) </span> </a> </li> <li class=md-nav__item> <a href=#step-4-configure-gpios class=md-nav__link> <span class=md-ellipsis> Step 4. Configure GPIOs </span> </a> </li> <li class=md-nav__item> <a href=#step-5-configure-the-displayini-descriptor-file class=md-nav__link> <span class=md-ellipsis> Step 5. Configure the display.ini descriptor file </span> </a> </li> <li class=md-nav__item> <a href=#step-6-restart class=md-nav__link> <span class=md-ellipsis> Step 6. Restart </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#migrating-to-utouch class=md-nav__link> <span class=md-ellipsis> Migrating to uTouch </span> </a> <nav class=md-nav aria-label="Migrating to uTouch"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#step-1-check-you-displayini class=md-nav__link> <span class=md-ellipsis> Step 1. Check you display.ini </span> </a> </li> <li class=md-nav__item> <a href=#step-2-add-utouch-section-to-displayini class=md-nav__link> <span class=md-ellipsis> Step 2. Add uTouch section to display.ini </span> </a> </li> <li class=md-nav__item> <a href=#ft5206-example class=md-nav__link> <span class=md-ellipsis> FT5206 example </span> </a> </li> <li class=md-nav__item> <a href=#xpt2046-example class=md-nav__link> <span class=md-ellipsis> XPT2046 example </span> </a> </li> <li class=md-nav__item> <a href=#gt911-example class=md-nav__link> <span class=md-ellipsis> GT911 example </span> </a> </li> <li class=md-nav__item> <a href=#simple-resitive-touch-example class=md-nav__link> <span class=md-ellipsis> Simple resitive touch example </span> </a> </li> <li class=md-nav__item> <a href=#step-3-restart class=md-nav__link> <span class=md-ellipsis> Step 3. Restart </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#universal-display-driver-udisplay class=md-nav__link> <span class=md-ellipsis> Universal Display Driver (uDisplay) </span> </a> <nav class=md-nav aria-label="Universal Display Driver (uDisplay)"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#descriptor-file class=md-nav__link> <span class=md-ellipsis> Descriptor File </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#universal-touch-driver-utouch class=md-nav__link> <span class=md-ellipsis> Universal Touch Driver (uTouch) </span> </a> <nav class=md-nav aria-label="Universal Touch Driver (uTouch)"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#ft5206-example_1 class=md-nav__link> <span class=md-ellipsis> FT5206 example </span> </a> </li> <li class=md-nav__item> <a href=#xpt2046-example_1 class=md-nav__link> <span class=md-ellipsis> XPT2046 example </span> </a> </li> <li class=md-nav__item> <a href=#gt911-example_1 class=md-nav__link> <span class=md-ellipsis> GT911 example </span> </a> </li> <li class=md-nav__item> <a href=#simple-resitive-touch-example_1 class=md-nav__link> <span class=md-ellipsis> Simple resitive touch example </span> </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <a href=https://github.com/tasmota/docs/blob/master/docs/Universal-Display-Driver.md title="Edit this page" class="md-content__button md-icon" rel=edit> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4zm10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1z"/></svg> </a> <h1 id=universal-display-and-universal-touch-drivers-udisplayutouch>Universal Display and Universal Touch drivers (uDisplay/uTouch)<a class=headerlink href=#universal-display-and-universal-touch-drivers-udisplayutouch title="Permanent link">~</a></h1> <div class="admonition info"> <p class=admonition-title>Starting with Tasmota v13.4, we are progressibely removing specific display and touch drivers and replacing with Universal Drivers. This is made to simplify future evolutions and shrink the code base, as the number of drivers is increasing fast.</p> </div> <p>This page is primarily targeting users that need to move from specific driver (ILI9341, SSD1306...)</p> <h2 id=migrating-to-udisplay>Migrating to uDisplay<a class=headerlink href=#migrating-to-udisplay title="Permanent link">~</a></h2> <h3 id=step-1-check-that-your-display-is-supported-by-udisplay-driver>Step 1. Check that your display is supported by uDisplay driver<a class=headerlink href=#step-1-check-that-your-display-is-supported-by-udisplay-driver title="Permanent link">~</a></h3> <p>The currently supported display drivers are:</p> <p><strong>TO BE UPDATED</strong></p> <table> <thead> <tr> <th style="text-align: left;">Display type</th> <th style="text-align: left;">Interface</th> </tr> </thead> <tbody> <tr> <td style="text-align: left;">ILI9341 TFT</td> <td style="text-align: left;">SPI</td> </tr> <tr> <td style="text-align: left;">ILI9342 TFT</td> <td style="text-align: left;">SPI</td> </tr> <tr> <td style="text-align: left;">ILI9488 TFT</td> <td style="text-align: left;">SPI</td> </tr> <tr> <td style="text-align: left;">GC9A01</td> <td style="text-align: left;">SPI</td> </tr> <tr> <td style="text-align: left;">SH1106 OLED display</td> <td style="text-align: left;">I<sup>2</sup>C</td> </tr> <tr> <td style="text-align: left;">SH1107</td> <td style="text-align: left;">SPI</td> </tr> <tr> <td style="text-align: left;">SSD1306 OLED display</td> <td style="text-align: left;">I<sup>2</sup>C</td> </tr> <tr> <td style="text-align: left;">SSD1331</td> <td style="text-align: left;">SPI</td> </tr> <tr> <td style="text-align: left;">ST7262</td> <td style="text-align: left;">RGB (ESP32S3)</td> </tr> <tr> <td style="text-align: left;">ST7735<br>ST7735S</td> <td style="text-align: left;">SPI</td> </tr> <tr> <td style="text-align: left;">ST7789 TFT display</td> <td style="text-align: left;">SPI</td> </tr> <tr> <td style="text-align: left;">ST7796U</td> <td style="text-align: left;">SPI<br>Parallel</td> </tr> <tr> <td style="text-align: left;">Waveshare E-Paper 2.9" display</td> <td style="text-align: left;">SPI</td> </tr> <tr> <td style="text-align: left;">Waveshare E-Paper 4.2" display</td> <td style="text-align: left;">SPI</td> </tr> </tbody> </table> <h3 id=step-2-flash-with-udisplay-compatible-binary>Step 2. Flash with uDisplay compatible binary<a class=headerlink href=#step-2-flash-with-udisplay-compatible-binary title="Permanent link">~</a></h3> <p>All <code>tasmota-display.bin</code>, <code>tasmota32-display.bin</code> and <code>tasmota32-lvgl.bin</code> include native support for uDisplay and uTouch. Select the appropriate binary and flash the device.</p> <h3 id=step-3-use-autoconf-esp32-only>Step 3. Use <code>autoconf</code> (ESP32 only)<a class=headerlink href=#step-3-use-autoconf-esp32-only title="Permanent link">~</a></h3> <p>Check if your device has already an <code>autoconf</code> file. In the main Tasmota UI, click on "Configuration" then "Auto-configuration". If you device is in the list, select it and "Apply Configuration". You can now skip steps 4 (GPIOs) and 5 (display.ini).</p> <h3 id=step-4-configure-gpios>Step 4. Configure GPIOs<a class=headerlink href=#step-4-configure-gpios title="Permanent link">~</a></h3> <p>The configuration template is slightly different with uDrive:</p> <ul> <li>Set an unused GPIO to <code>Option A3</code>.<br>This GPIO configuration is a virtual marker to signal that uDriver should be started; it has no effect on the GPIO. It can be assigned to "reserved" (red) GPIOs.</li> <li>If <code>SPI</code>, change the device specific <code>&lt;device&gt; CS</code> GPIO to the general <code>SPI CS</code> GPIO.<br>For example change from <code>ILI9341 CS</code> to <code>SPI_CS</code></li> <li>If <code>I2C</code>, you should not need any change (<strong>IS IT TRUE?</strong>)</li> </ul> <h3 id=step-5-configure-the-displayini-descriptor-file>Step 5. Configure the <code>display.ini</code> descriptor file<a class=headerlink href=#step-5-configure-the-displayini-descriptor-file title="Permanent link">~</a></h3> <p>Select the appropriate <code>display.ini</code> file from the <a href=https://github.com/arendst/Tasmota/tree/development/tasmota/displaydesc>repository</a>, and store it as <code>display.ini</code> file in the file system.</p> <p>Storing <code>display.ini</code> is the preferred method to configure the descriptor file. If this is not possible or if the device has no filesystem, use one of the alternative methods:</p> <ol> <li>A <code>display.ini</code> file present in the flash file system. <strong><em>preferred option</em></strong></li> <li>A special <code>&gt;d</code> section in scripting. Copy the file to the <code>&gt;d</code> script section and place a <code>-&gt;displayreinit</code> cmd into <code>&gt;B</code> section</li> <li>Copy the descriptor to <code>Rule3</code> but <strong>do not</strong> enable it. Convert the multiline descriptor into a single line descriptor by replacing every linefeed with a space. All other spaces need to be removed. Maximum length is a little more than 511 bytes.</li> <li>Compile the descriptor into the binary with a <code>#define DSP_ROM_DESC</code> string in <code>user_config_override.h</code>, see <a href=https://github.com/arendst/Tasmota/blob/development/tasmota/displaydesc/readme.md>example here</a>.</li> </ol> <h3 id=step-6-restart>Step 6. Restart<a class=headerlink href=#step-6-restart title="Permanent link">~</a></h3> <p>The migration to uDisplay is now complete.</p> <h2 id=migrating-to-utouch>Migrating to uTouch<a class=headerlink href=#migrating-to-utouch title="Permanent link">~</a></h2> <h3 id=step-1-check-you-displayini>Step 1. Check you <code>display.ini</code><a class=headerlink href=#step-1-check-you-displayini title="Permanent link">~</a></h3> <p>It is possible that you <code>display.ini</code> has already the uTouch configuration, especially if you used <code>autoconf</code>. If this is the case, you are done.</p> <h3 id=step-2-add-utouch-section-to-displayini>Step 2. Add uTouch section to <code>display.ini</code><a class=headerlink href=#step-2-add-utouch-section-to-displayini title="Permanent link">~</a></h3> <p>Depending on your touch device, add the following templates to <code>display.ini</code>:</p> <h3 id=ft5206-example>FT5206 example<a class=headerlink href=#ft5206-example title="Permanent link">~</a></h3> <p>Configure:</p> <ul> <li>GPIO <code>TS SPI CS</code> to the touch SPI <code>CS</code> pin</li> <li>add the following template:</li> </ul> <div class=highlight><pre><span></span><code>:UTI,FT5206,I2,*,-1,-1
RD A8
CP 11
RTF
RD A3
CP 64
RTF
RT
:UTT
RDM 00 16
MV 2 1
RT
:UTX
MV 3 2
RT
:UTY
MV 5 2
RT
#
</code></pre></div> <h3 id=xpt2046-example>XPT2046 example<a class=headerlink href=#xpt2046-example title="Permanent link">~</a></h3> <p>Configure:</p> <ul> <li>GPIO <code>TS SPI CS</code> to the touch SPI <code>CS</code> pin</li> <li>GPIO <code>TS IRQ</code> to the interrupt pin</li> <li>add the following template:</li> </ul> <div class=highlight><pre><span></span><code>:UTI,XPT2046,S1,*,-1,*
CPR 00
RT
:UTT
XPT 300
RT
:UTX
MV 0 2
;DBG 1
SCL 460 0.0930233
LIM 319
RT
:UTY
MV 2 2
SCL 300 0.0695652
LIM 239
RT
#
</code></pre></div> <p>If your device does not have the same calibration, you instead:</p> <div class=highlight><pre><span></span><code>:UTI,XPT2046,S1,*,-1,*
CPR 00
RT
:UTT
XPT 300
RT
:UTX
MV 0 2
RT
:UTY
MV 2 2
RT
#
</code></pre></div> <p>then run <a href=https://tasmota.github.io/docs/Tasmota-Application/#display-calibration>DisplayCalibrate</a> application which creates an additional <code>:H</code> line with your display's specific calibration.</p> <h3 id=gt911-example>GT911 example<a class=headerlink href=#gt911-example title="Permanent link">~</a></h3> <p>Configure:</p> <ul> <li>GPIO <code>TS RST</code> to the touch reset pin</li> <li>add the following template:</li> </ul> <div class=highlight><pre><span></span><code>:UTI,GT911,I1,5d,*,-1
RDWM 8140 4
MV 0 1
CPR 39
RTF
MV 1 1
CPR 31
RTF
MV 2 1
CPR 31
RTF
RT
:UTT
RDW 814E
MV 0 1
AND 80
CPR 80
RTF
RDWM 8150 8
WRW 814E 00
RT
:UTX
MV 0 3
RT
:UTY
MV 2 3
RT
#
</code></pre></div> <h3 id=simple-resitive-touch-example>Simple resitive touch example<a class=headerlink href=#simple-resitive-touch-example title="Permanent link">~</a></h3> <div class=highlight><pre><span></span><code>:UTI,SRES,R
CPR 00
RT
:UTT
GSRT 500
RT
:UTX
MV 0 2
RT
:UTY
MV 2 2
RT
#
</code></pre></div> <h3 id=step-3-restart>Step 3. Restart<a class=headerlink href=#step-3-restart title="Permanent link">~</a></h3> <p>You are now done.</p> <h2 id=universal-display-driver-udisplay>Universal Display Driver (uDisplay)<a class=headerlink href=#universal-display-driver-udisplay title="Permanent link">~</a></h2> <div class="admonition info"> <p class=admonition-title>uDisplay is included in all pre-compiled display binaries, for ESP8266 and ESP32. If you compile yourself, you need to <code>#define USE_UNIVERSAL_DISPLAY</code></p> </div> <p>Universal Display Driver or uDisplay is a way to define your display settings using a simple text file and easily add it to Tasmota. uDisplay is <code>DisplayModel 17</code>. It supports I2C and hardware or software SPI (3 or 4 wire), 8,16 Bit parallel and RGB interface. The driver must be enabled by OPTION A3 on any GPIO pin. </p> <p>The driver is enabled by compiling with <code>#define USE_UNIVERSAL_DISPLAY</code> and setting an unused GPIO to <code>Option A3</code>.</p> <h3 id=descriptor-file>Descriptor File<a class=headerlink href=#descriptor-file title="Permanent link">~</a></h3> <p>The display itself is defined by a descriptor file. Many display descriptor files are included in Tasmota GitHub in <a href=https://github.com/arendst/Tasmota/tree/development/tasmota/displaydesc><code>tasmota/displaydesc</code></a> folder</p> <p>which may be provided by any of the following methods:</p> <ol> <li>A <code>display.ini</code> file present in the flash file system. <strong><em>preferred option</em></strong></li> <li>A special <code>&gt;d</code> section in scripting. Copy the file to the <code>&gt;d</code> script section and place a <code>-&gt;displayreinit</code> cmd into <code>&gt;B</code> section</li> <li>Copy the descriptor to <code>Rule 3</code> but <strong>do not</strong> enable it. Convert the multiline descriptor into a single line descriptor by replacing every linefeed with a space. All other spaces need to be removed</li> <li>Compile the descriptor into the binary in a section in <code>user_config_override.h</code> under driver 17 (const char)</li> </ol> <p>Options 2 and 4 work well for 1M flash devices.</p> <p>Descriptor text file has the following elements: </p> <p><code>:H</code> </p> <p>Header line describes the main features of the display (comma separated, no spaces allowed)</p> <ol> <li>name</li> <li>x size in pixels</li> <li>y size in pixels</li> <li>bits per pixel (1 for bw displays, 16 for color displays)</li> <li>hardware interface used either I2C or SPI</li> </ol> <p><code>I2C</code> </p> <p>I2C interface:</p> <ol> <li>I2C address in HEX</li> <li>SCL pin</li> <li>SDA pin</li> <li>RESET pin</li> </ol> <p><code>SPI</code> </p> <p>SPI interface:</p> <ol> <li>Number (1 = hardware SPI 1, 2 = Hardware SPI 2 (ESP32), 3 = software SPI</li> <li>CS pin</li> <li>CLK pin</li> <li>MOSI pin</li> <li>DC pin</li> <li>Backlight pin</li> <li>RESET pin</li> <li>MISO pin</li> <li>SPI Speed in MHz</li> </ol> <p><code>PAR</code> </p> <p>Parallel interface: (ESP32-S3 only)</p> <ol> <li>Bus size 8 or 16</li> <li>RESET pin</li> <li>CS pin</li> <li>DC pin</li> <li>WR pin</li> <li>RD pin</li> <li>Backlight pin</li> <li>d0-d7 pins</li> <li>d8-d15 pins if bus size = 16</li> <li>Parallel Speed in MHz (usually 20)</li> </ol> <p><code>RGB</code> </p> <p>RGB 16 bit interface: (ESP32-S3 only)</p> <ol> <li>DE pin</li> <li>VSYNC pin</li> <li>HSYNC pin</li> <li>PCLK pin</li> <li>Backlight pin </li> <li>b0-b4 pins (blue color)</li> <li>g0-g5 pins (green color)</li> <li>r0-r4 pins (red color) </li> <li>Pixel clock Speed in MHz (usually 14)</li> </ol> <p>All signals must be given. Unused pins may be set to -1. If you specify a <code>*</code> char the pin number is derived from the Tasmota GPIO GUI.<br> The CS and DC pins must be the standard pins e.g. <code>SPI_CS</code> or <code>SPI_DC</code>. </p> <p>there are RGB displays that also need an SPI initialisation. in this case specify the Init sequence with :IS,SCLK,MOSI,CS,RESET <br> there are RGB displays that also need an I2C initialisation. in this case specify the Init sequence with :II,BUS,ADDR (BUS = i2c bus nr 1 or 2, ADDR = adress of i2c device) </p> <div class="admonition i2c example"> <p class=admonition-title>I2c</p> </div> <div class=highlight><pre><span></span><code><span class=kt>:II</span><span class=p>,</span><span class=mi>1</span><span class=p>,</span><span class=mi>38</span>
<span class=mi>03</span><span class=p>,</span><span class=mi>00</span>
<span class=mi>08</span><span class=p>,</span><span class=mi>00</span>
<span class=mi>10</span>
<span class=mi>07</span><span class=p>,</span><span class=kt>FF</span>
</code></pre></div> <ol> <li>entry = device register to write </li> <li>entry = value to write<br> single entry defines a delay in milliseconds </li> </ol> <div class="admonition example"> <p class=admonition-title>Example</p> </div> <div class=highlight><pre><span></span><code><span class=kt>:H</span><span class=p>,</span><span class=kt>SH1106</span><span class=p>,</span><span class=mi>128</span><span class=p>,</span><span class=mi>64</span><span class=p>,</span><span class=mi>1</span><span class=p>,</span><span class=kt>I2C</span><span class=p>,</span><span class=mi>3</span><span class=n>c</span><span class=p>,</span><span class=o>*</span><span class=p>,</span><span class=o>*</span><span class=p>,</span><span class=o>*</span>
</code></pre></div> <div class=highlight><pre><span></span><code><span class=kt>:H</span><span class=p>,</span><span class=kt>ILI9341</span><span class=p>,</span><span class=mi>240</span><span class=p>,</span><span class=mi>320</span><span class=p>,</span><span class=mi>16</span><span class=p>,</span><span class=kt>SPI</span><span class=p>,</span><span class=mi>1</span><span class=p>,</span><span class=o>-</span><span class=mi>1</span><span class=p>,</span><span class=mi>14</span><span class=p>,</span><span class=mi>13</span><span class=p>,</span><span class=mi>5</span><span class=p>,</span><span class=mi>4</span><span class=p>,</span><span class=mi>15</span><span class=p>,</span><span class=o>*</span><span class=p>,</span><span class=mi>40</span>
</code></pre></div> <p><code>:S</code><br> (<em>optional</em>) Splash setup, also defines initial colors. If omitted screen is not cleared initially.</p> <ol> <li>Font number, if -1 splash screen is suppressed</li> <li>Font size</li> <li>FG color (as index color)</li> <li>BG color (as index color)</li> <li>x position of text</li> <li>y position of text </li> </ol> <div class="admonition example"> <p class=admonition-title>Example</p> <div class=highlight><pre><span></span><code><span class=kt>:S</span><span class=p>,</span><span class=mi>2</span><span class=p>,</span><span class=mi>1</span><span class=p>,</span><span class=mi>1</span><span class=p>,</span><span class=mi>0</span><span class=p>,</span><span class=mi>40</span><span class=p>,</span><span class=mi>20</span>
</code></pre></div> </div> <p><code>:I</code><br> Initial register setup for the display controller. (<code>IC</code> marks that the controller is using command mode even with command parameters) All values are in hex. On SPI the first value is the command, then the number of arguments and the the arguments itself. <code>Bit 7</code> on the number of arguments set indicate a wait of 150 ms. On I<sup>2</sup>C all hex values are sent to I<sup>2</sup>C.</p> <div class="admonition example"> <p class=admonition-title>Example</p> <div class=highlight><pre><span></span><code><span class=kt>:I</span>
<span class=kt>EF</span><span class=p>,</span><span class=mi>3</span><span class=p>,</span><span class=mi>03</span><span class=p>,</span><span class=mi>80</span><span class=p>,</span><span class=mi>02</span>
<span class=kt>CF</span><span class=p>,</span><span class=mi>3</span><span class=p>,</span><span class=mi>00</span><span class=p>,</span><span class=kt>C1</span><span class=p>,</span><span class=mi>30</span>
<span class=kt>ED</span><span class=p>,</span><span class=mi>4</span><span class=p>,</span><span class=mi>64</span><span class=p>,</span><span class=mi>03</span><span class=p>,</span><span class=mi>12</span><span class=p>,</span><span class=mi>81</span>
<span class=kt>E8</span><span class=p>,</span><span class=mi>3</span><span class=p>,</span><span class=mi>85</span><span class=p>,</span><span class=mi>00</span><span class=p>,</span><span class=mi>78</span>
<span class=kt>CB</span><span class=p>,</span><span class=mi>5</span><span class=p>,</span><span class=mi>39</span><span class=p>,</span><span class=mi>2</span><span class=kt>C</span><span class=p>,</span><span class=mi>00</span><span class=p>,</span><span class=mi>34</span><span class=p>,</span><span class=mi>02</span>
<span class=kt>F7</span><span class=p>,</span><span class=mi>1</span><span class=p>,</span><span class=mi>20</span>
<span class=kt>EA</span><span class=p>,</span><span class=mi>2</span><span class=p>,</span><span class=mi>00</span><span class=p>,</span><span class=mi>00</span>
<span class=kt>C0</span><span class=p>,</span><span class=mi>1</span><span class=p>,</span><span class=mi>23</span>
<span class=kt>C1</span><span class=p>,</span><span class=mi>1</span><span class=p>,</span><span class=mi>10</span>
<span class=kt>C5</span><span class=p>,</span><span class=mi>2</span><span class=p>,</span><span class=mi>3</span><span class=n>e</span><span class=p>,</span><span class=mi>28</span>
<span class=kt>C7</span><span class=p>,</span><span class=mi>1</span><span class=p>,</span><span class=mi>86</span>
<span class=mi>36</span><span class=p>,</span><span class=mi>1</span><span class=p>,</span><span class=mi>48</span>
<span class=mi>37</span><span class=p>,</span><span class=mi>1</span><span class=p>,</span><span class=mi>00</span>
<span class=mi>3</span><span class=kt>A</span><span class=p>,</span><span class=mi>1</span><span class=p>,</span><span class=mi>55</span>
<span class=kt>B1</span><span class=p>,</span><span class=mi>2</span><span class=p>,</span><span class=mi>00</span><span class=p>,</span><span class=mi>18</span>
<span class=kt>B6</span><span class=p>,</span><span class=mi>3</span><span class=p>,</span><span class=mi>08</span><span class=p>,</span><span class=mi>82</span><span class=p>,</span><span class=mi>27</span>
<span class=kt>F2</span><span class=p>,</span><span class=mi>1</span><span class=p>,</span><span class=mi>00</span>
<span class=mi>26</span><span class=p>,</span><span class=mi>1</span><span class=p>,</span><span class=mi>01</span>
<span class=kt>E0</span><span class=p>,</span><span class=mi>0</span><span class=kt>F</span><span class=p>,</span><span class=mi>0</span><span class=kt>F</span><span class=p>,</span><span class=mi>31</span><span class=p>,</span><span class=mi>2</span><span class=kt>B</span><span class=p>,</span><span class=mi>0</span><span class=kt>C</span><span class=p>,</span><span class=mi>0</span><span class=kt>E</span><span class=p>,</span><span class=mi>08</span><span class=p>,</span><span class=mi>4</span><span class=kt>E</span><span class=p>,</span><span class=kt>F1</span><span class=p>,</span><span class=mi>37</span><span class=p>,</span><span class=mi>07</span><span class=p>,</span><span class=mi>10</span><span class=p>,</span><span class=mi>03</span><span class=p>,</span><span class=mi>0</span><span class=kt>E</span><span class=p>,</span><span class=mi>09</span><span class=p>,</span><span class=mi>00</span>
<span class=kt>E1</span><span class=p>,</span><span class=mi>0</span><span class=kt>F</span><span class=p>,</span><span class=mi>00</span><span class=p>,</span><span class=mi>0</span><span class=kt>E</span><span class=p>,</span><span class=mi>14</span><span class=p>,</span><span class=mi>03</span><span class=p>,</span><span class=mi>11</span><span class=p>,</span><span class=mi>07</span><span class=p>,</span><span class=mi>31</span><span class=p>,</span><span class=kt>C1</span><span class=p>,</span><span class=mi>48</span><span class=p>,</span><span class=mi>08</span><span class=p>,</span><span class=mi>0</span><span class=kt>F</span><span class=p>,</span><span class=mi>0</span><span class=kt>C</span><span class=p>,</span><span class=mi>31</span><span class=p>,</span><span class=mi>36</span><span class=p>,</span><span class=mi>0</span><span class=kt>F</span>
<span class=mi>11</span><span class=p>,</span><span class=mi>80</span>
<span class=mi>29</span><span class=p>,</span><span class=mi>80</span>
<span class=o>#</span>
</code></pre></div> </div> <p><code>:V</code> video signal parameters for RGB panels<br> hsync_polarity,<br> hsync_front_porch,<br> hsync_pulse_width,<br> hsync_back_porch,<br> vsync_polarity,<br> vsync_front_porch,<br> vsync_pulse_width,<br> vsync_back_porch,<br> pclk_active_neg, </p> <p><code>:o</code>,OP <br> <code>OP</code> = controller OPCODE to switch display off </p> <p><code>:O</code>,OP <br> <code>OP</code> = controller OPCODE to switch display on </p> <p><code>:R</code>,OP,SL </p> <ol> <li><code>OP</code> = rotation opcode</li> <li><code>SL</code> = startline opcode (optional) </li> </ol> <p><code>:0</code><br> <code>:1</code><br> <code>:2</code><br> <code>:3</code> </p> <p>Register values for all 4 rotations (color display only)</p> <ol> <li>rotation code</li> <li>x offset</li> <li>y offset</li> <li>rotation pseudo opcode for touch panel, in case of RGB panel use only these entries the appropriate coordinate convervsions are defined via pseudo opcodes:<br> 0 = no conversion<br> 1 = swap and flip x<br> 2 = flip x, flip y<br> 3 = swap and flip y<br> 4 = flip x<br> 5 = flip y<br> bit 7 = swap x,y<br></li> </ol> <p><code>:A</code><br> 3 OPCODES to set address window <em>(all but epaper displays)</em></p> <ol> <li>set column opcode </li> <li>set row opcode </li> <li>start write opcode </li> <li>pixel size (optional) </li> </ol> <p><code>:P</code><br> Pixel transfer size (default = 16 bit RGB) <em>(optional)</em></p> <p><code>:i</code><br> invert display opcodes<br> 1. inversion off<br> 2. inversion on </p> <p><code>:D</code><br> dimmer opcode <em>(optional)</em></p> <p><code>:B</code><br> LVGL <em>(optional)</em></p> <ol> <li>number of display lines flushed at once (min 10) the lower the lesser memory needed </li> <li>bit 0: DMA enables (<code>0</code> for no DMA, 1 use DMA) - not supported on all displays<br>bit 1: selects color swap, 2 = swap 16 bit color<br>bit 2: enable async DMA, <code>0</code> wait for DMA to complete before returning, <code>4</code> run DMA async in the background. This later mode is only valid if the SPI bus is not shared between the display and any other SPI device like SD Card Reader,<br>bit 3: <code>8</code> inverted busy line on epaper displays.<br>bit 4: <code>16</code> swap black and white in monochrome pictures (pushcolors, needed for bw pictures on epaper displays).</li> </ol> <p><code>:T</code><br> Wait times used for E-paper display<br> 1. full refresh wait in ms<br> 2. partial refresh wait in ms<br> 3. wait after update in ms </p> <p><code>:f</code><br> codes for epaper full refresh update </p> <p><code>:p</code><br> codes for epaper partial refresh update </p> <p>beside the epaper chip codes, some pseudo opcodes are supported<br> EP_RESET 60,1,T = toggle reset pin T milliseconds<br> EP_LUT_FULL 61,0 = switch to full update mode<br> EP_LUT_PARTIAL 62,0 = switch to partial update mode<br> EP_WAITIDLE 63,1,T = wait for busy pin or T milliseconds<br> EP_SET_MEM_AREA 64,0 = set memory area to full screen<br> EP_SET_MEM_PTR 65,0 = set memory pointer to start of screen<br> EP_SEND_DATA 66,0 = send framebuffer<br> EP_CLR_FRAME 67,0 = send clr data<br> EP_SEND_FRAME 68,0 = complete sendframedata sequence<br> EP_BREAK_RR_EQU 69,X = break when reset reason == X<br> EP_BREAK_RR_NEQ 6a,X = break when reset reason != X</p> <p><code>:L</code>,size,OP<br> Lookup table for full refresh (Waveshare 29)</p> <p><code>:l</code>,size,OP<br> Lookuptable for partial refresh (Waveshare 29)</p> <p><code>:Lx</code>,size,OP<br> Lookuptable for full refresh (Waveshare 42) <code>x</code> = 1..5<br> <code>size</code> = number of bytes in table<br> <code>OP</code> = opcode for sending refresh table </p> <p><code>:TIx,AA,SCL,SDA,&lt;IRQ&gt;,&lt;RST&gt;</code><br> Defines a touch panel an I2C bus nr <code>x</code> (1 or 2)<br> AA is device address<br> SCL, SDA are the pins used (or * for tasmota definition)<br> IRQ,RST optional IRQ and RST pins</p> <p><code>:TS,CS_PIN,(IRQ_PIN),(BUS Nr)</code> <br> Defines a touch panel an SPI bus with chip select <code>CS_PIN</code> (or *)<br> optionally defines an IRQ_PIN (or -1) and the SPI BUS number </p> <p><code>:TR</code> enable simple resistive touch via data lines (e.g. cheap il9341 displays) </p> <p><code>:M,X1,X2,Y1,Y2</code> Defines an optional mapping for touch controllers (always needed on resistive touch) <code>X1</code> = display left margin<br> <code>X2</code> = display right margin<br> <code>Y1</code> = display upper margin<br> <code>Y2</code> = display lower margin </p> <p><code>:r,X</code> Defines optional display rotation <code>X</code> = <code>0..3</code></p> <p><code>:b,X</code> Defines optional inverted backpanel <code>X</code> = <code>1</code> = use inverted logic for backpanel </p> <div class="admonition example"> <p class=admonition-title>Full configuration for SH1106 (comment lines starting with ; are allowed)</p> </div> <div class=highlight><pre><span></span><code><span class=kt>:H</span><span class=p>,</span><span class=kt>SH1106</span><span class=p>,</span><span class=mi>128</span><span class=p>,</span><span class=mi>64</span><span class=p>,</span><span class=mi>1</span><span class=p>,</span><span class=kt>I2C</span><span class=p>,</span><span class=mi>3</span><span class=n>c</span><span class=p>,</span><span class=o>*</span><span class=p>,</span><span class=o>*</span><span class=p>,</span><span class=o>*</span>
<span class=kt>:S</span><span class=p>,</span><span class=mi>0</span><span class=p>,</span><span class=mi>2</span><span class=p>,</span><span class=mi>1</span><span class=p>,</span><span class=mi>0</span><span class=p>,</span><span class=mi>30</span><span class=p>,</span><span class=mi>20</span>
<span class=kt>:I</span>
<span class=kt>AE</span>
<span class=kt>D5</span><span class=p>,</span><span class=mi>80</span>
<span class=kt>A8</span><span class=p>,</span><span class=mi>3</span><span class=n>f</span>
<span class=kt>D3</span><span class=p>,</span><span class=mi>00</span>
<span class=mi>40</span>
<span class=mi>8</span><span class=kt>D</span><span class=p>,</span><span class=mi>14</span>
<span class=mi>20</span><span class=p>,</span><span class=mi>00</span>
<span class=kt>A1</span>
<span class=kt>C8</span>
<span class=kt>DA</span><span class=p>,</span><span class=mi>12</span>
<span class=mi>81</span><span class=p>,</span><span class=kt>CF</span>
<span class=kt>D9F1</span>
<span class=kt>DB</span><span class=p>,</span><span class=mi>40</span>
<span class=kt>A4</span>
<span class=kt>A6</span>
<span class=kt>AF</span>
<span class=kt>:</span><span class=n>o</span><span class=p>,</span><span class=kt>AE</span>
<span class=kt>:O</span><span class=p>,</span><span class=kt>AF</span>
<span class=kt>:A</span><span class=p>,</span><span class=mi>00</span><span class=p>,</span><span class=mi>10</span><span class=p>,</span><span class=mi>40</span>
<span class=o>#</span>
</code></pre></div> <div class="admonition example"> <p class=admonition-title>Full configuration for ILI9341: (comment lines starting with ; are allowed)</p> </div> <p><div class=highlight><pre><span></span><code><span class=kt>:H</span><span class=p>,</span><span class=kt>ILI9341</span><span class=p>,</span><span class=mi>240</span><span class=p>,</span><span class=mi>320</span><span class=p>,</span><span class=mi>16</span><span class=p>,</span><span class=kt>SPI</span><span class=p>,</span><span class=mi>1</span><span class=p>,</span><span class=o>*</span><span class=p>,</span><span class=o>*</span><span class=p>,</span><span class=o>*</span><span class=p>,</span><span class=o>*</span><span class=p>,</span><span class=o>*</span><span class=p>,</span><span class=o>*</span><span class=p>,</span><span class=o>*</span><span class=p>,</span><span class=mi>40</span>
<span class=kt>:S</span><span class=p>,</span><span class=mi>2</span><span class=p>,</span><span class=mi>1</span><span class=p>,</span><span class=mi>1</span><span class=p>,</span><span class=mi>0</span><span class=p>,</span><span class=mi>40</span><span class=p>,</span><span class=mi>20</span>
<span class=kt>:I</span>
<span class=kt>EF</span><span class=p>,</span><span class=mi>3</span><span class=p>,</span><span class=mi>03</span><span class=p>,</span><span class=mi>80</span><span class=p>,</span><span class=mi>02</span>
<span class=kt>CF</span><span class=p>,</span><span class=mi>3</span><span class=p>,</span><span class=mi>00</span><span class=p>,</span><span class=kt>C1</span><span class=p>,</span><span class=mi>30</span>
<span class=kt>ED</span><span class=p>,</span><span class=mi>4</span><span class=p>,</span><span class=mi>64</span><span class=p>,</span><span class=mi>03</span><span class=p>,</span><span class=mi>12</span><span class=p>,</span><span class=mi>81</span>
<span class=kt>E8</span><span class=p>,</span><span class=mi>3</span><span class=p>,</span><span class=mi>85</span><span class=p>,</span><span class=mi>00</span><span class=p>,</span><span class=mi>78</span>
<span class=kt>CB</span><span class=p>,</span><span class=mi>5</span><span class=p>,</span><span class=mi>39</span><span class=p>,</span><span class=mi>2</span><span class=kt>C</span><span class=p>,</span><span class=mi>00</span><span class=p>,</span><span class=mi>34</span><span class=p>,</span><span class=mi>02</span>
<span class=kt>F7</span><span class=p>,</span><span class=mi>1</span><span class=p>,</span><span class=mi>20</span>
<span class=kt>EA</span><span class=p>,</span><span class=mi>2</span><span class=p>,</span><span class=mi>00</span><span class=p>,</span><span class=mi>00</span>
<span class=kt>C0</span><span class=p>,</span><span class=mi>1</span><span class=p>,</span><span class=mi>23</span>
<span class=kt>C1</span><span class=p>,</span><span class=mi>1</span><span class=p>,</span><span class=mi>10</span>
<span class=kt>C5</span><span class=p>,</span><span class=mi>2</span><span class=p>,</span><span class=mi>3</span><span class=n>e</span><span class=p>,</span><span class=mi>28</span>
<span class=kt>C7</span><span class=p>,</span><span class=mi>1</span><span class=p>,</span><span class=mi>86</span>
<span class=mi>36</span><span class=p>,</span><span class=mi>1</span><span class=p>,</span><span class=mi>48</span>
<span class=mi>37</span><span class=p>,</span><span class=mi>1</span><span class=p>,</span><span class=mi>00</span>
<span class=mi>3</span><span class=kt>A</span><span class=p>,</span><span class=mi>1</span><span class=p>,</span><span class=mi>55</span>
<span class=kt>B1</span><span class=p>,</span><span class=mi>2</span><span class=p>,</span><span class=mi>00</span><span class=p>,</span><span class=mi>18</span>
<span class=kt>B6</span><span class=p>,</span><span class=mi>3</span><span class=p>,</span><span class=mi>08</span><span class=p>,</span><span class=mi>82</span><span class=p>,</span><span class=mi>27</span>
<span class=kt>F2</span><span class=p>,</span><span class=mi>1</span><span class=p>,</span><span class=mi>00</span>
<span class=mi>26</span><span class=p>,</span><span class=mi>1</span><span class=p>,</span><span class=mi>01</span>
<span class=kt>E0</span><span class=p>,</span><span class=mi>0</span><span class=kt>F</span><span class=p>,</span><span class=mi>0</span><span class=kt>F</span><span class=p>,</span><span class=mi>31</span><span class=p>,</span><span class=mi>2</span><span class=kt>B</span><span class=p>,</span><span class=mi>0</span><span class=kt>C</span><span class=p>,</span><span class=mi>0</span><span class=kt>E</span><span class=p>,</span><span class=mi>08</span><span class=p>,</span><span class=mi>4</span><span class=kt>E</span><span class=p>,</span><span class=kt>F1</span><span class=p>,</span><span class=mi>37</span><span class=p>,</span><span class=mi>07</span><span class=p>,</span><span class=mi>10</span><span class=p>,</span><span class=mi>03</span><span class=p>,</span><span class=mi>0</span><span class=kt>E</span><span class=p>,</span><span class=mi>09</span><span class=p>,</span><span class=mi>00</span>
<span class=kt>E1</span><span class=p>,</span><span class=mi>0</span><span class=kt>F</span><span class=p>,</span><span class=mi>00</span><span class=p>,</span><span class=mi>0</span><span class=kt>E</span><span class=p>,</span><span class=mi>14</span><span class=p>,</span><span class=mi>03</span><span class=p>,</span><span class=mi>11</span><span class=p>,</span><span class=mi>07</span><span class=p>,</span><span class=mi>31</span><span class=p>,</span><span class=kt>C1</span><span class=p>,</span><span class=mi>48</span><span class=p>,</span><span class=mi>08</span><span class=p>,</span><span class=mi>0</span><span class=kt>F</span><span class=p>,</span><span class=mi>0</span><span class=kt>C</span><span class=p>,</span><span class=mi>31</span><span class=p>,</span><span class=mi>36</span><span class=p>,</span><span class=mi>0</span><span class=kt>F</span>
<span class=mi>11</span><span class=p>,</span><span class=mi>80</span>
<span class=mi>29</span><span class=p>,</span><span class=mi>80</span>
<span class=kt>:</span><span class=n>o</span><span class=p>,</span><span class=mi>28</span>
<span class=kt>:O</span><span class=p>,</span><span class=mi>29</span>
<span class=kt>:A</span><span class=p>,</span><span class=mi>2</span><span class=kt>A</span><span class=p>,</span><span class=mi>2</span><span class=kt>B</span><span class=p>,</span><span class=mi>2</span><span class=kt>C</span>
<span class=kt>:R</span><span class=p>,</span><span class=mi>36</span>
<span class=kt>:</span><span class=mi>0</span><span class=p>,</span><span class=mi>48</span><span class=p>,</span><span class=mi>00</span><span class=p>,</span><span class=mi>00</span><span class=p>,</span><span class=mi>00</span>
<span class=kt>:</span><span class=mi>1</span><span class=p>,</span><span class=mi>28</span><span class=p>,</span><span class=mi>00</span><span class=p>,</span><span class=mi>00</span><span class=p>,</span><span class=mi>01</span>
<span class=kt>:</span><span class=mi>2</span><span class=p>,</span><span class=mi>88</span><span class=p>,</span><span class=mi>00</span><span class=p>,</span><span class=mi>00</span><span class=p>,</span><span class=mi>02</span>
<span class=kt>:</span><span class=mi>3</span><span class=p>,</span><span class=kt>E8</span><span class=p>,</span><span class=mi>00</span><span class=p>,</span><span class=mi>00</span><span class=p>,</span><span class=mi>02</span>
<span class=o>#</span>
</code></pre></div> Scripter is the nost convenient way to edit and develop an uDisplay driver. On every scripter save the display is reinitialized and you immediately see results of your changes. </p> <div class="admonition example"> <p class=admonition-title>Scripter driven display descriptor</p> </div> <div class=highlight><pre><span></span><code><span class=o>&gt;</span><span class=kt>D</span>
<span class=o>&gt;</span><span class=kt>B</span>
<span class=ow>=&gt;</span><span class=n>displayreinit</span>
<span class=o>&gt;</span><span class=n>d</span>
<span class=p>;</span><span class=w> </span><span class=n>name</span><span class=p>,</span><span class=n>xs</span><span class=p>,</span><span class=n>ys</span><span class=p>,</span><span class=n>bpp</span><span class=p>,</span><span class=n>interface</span><span class=p>,</span><span class=w> </span><span class=n>address</span><span class=p>,</span><span class=w> </span><span class=n>scl</span><span class=p>,</span><span class=n>sda</span><span class=p>,</span><span class=n>reset</span>
<span class=kt>:H</span><span class=p>,</span><span class=kt>SH1106</span><span class=p>,</span><span class=mi>128</span><span class=p>,</span><span class=mi>64</span><span class=p>,</span><span class=mi>1</span><span class=p>,</span><span class=kt>I2C</span><span class=p>,</span><span class=mi>3</span><span class=n>c</span><span class=p>,</span><span class=o>*</span><span class=p>,</span><span class=o>*</span><span class=p>,</span><span class=o>*</span>
<span class=kt>:S</span><span class=p>,</span><span class=mi>0</span><span class=p>,</span><span class=mi>2</span><span class=p>,</span><span class=mi>1</span><span class=p>,</span><span class=mi>0</span><span class=p>,</span><span class=mi>30</span><span class=p>,</span><span class=mi>20</span>
<span class=kt>:I</span>
<span class=kt>AE</span>
<span class=kt>D5</span><span class=p>,</span><span class=mi>80</span>
<span class=kt>A8</span><span class=p>,</span><span class=mi>3</span><span class=n>f</span>
<span class=kt>D3</span><span class=p>,</span><span class=mi>00</span>
<span class=mi>40</span>
<span class=mi>8</span><span class=kt>D</span><span class=p>,</span><span class=mi>14</span>
<span class=mi>20</span><span class=p>,</span><span class=mi>00</span>
<span class=kt>A1</span>
<span class=kt>C8</span>
<span class=kt>DA</span><span class=p>,</span><span class=mi>12</span>
<span class=mi>81</span><span class=p>,</span><span class=kt>CF</span>
<span class=kt>D9F1</span>
<span class=kt>DB</span><span class=p>,</span><span class=mi>40</span>
<span class=kt>A4</span>
<span class=kt>A6</span>
<span class=kt>AF</span>
<span class=kt>:</span><span class=n>o</span><span class=p>,</span><span class=kt>AE</span>
<span class=kt>:O</span><span class=p>,</span><span class=kt>AF</span>
<span class=kt>:A</span><span class=p>,</span><span class=mi>00</span><span class=p>,</span><span class=mi>10</span><span class=p>,</span><span class=mi>40</span>
<span class=o>#</span>
</code></pre></div> <h2 id=universal-touch-driver-utouch>Universal Touch Driver (uTouch)<a class=headerlink href=#universal-touch-driver-utouch title="Permanent link">~</a></h2> <p>(<code>#define USE_UNIVERSAL_TOUCH</code>)<br> This option allows to add drivers for various touch chips<br> to use this you must ommit the Touch ids in normal display.ini<br> instead use these IDs. </p> <p>4 sections: </p> <p><code>:UTI</code>,FT5206,I2,38,-1,-1<br> init section<br> device name, up to 7 chars<br> interface type: I=I2C, S=SPI, R=resistive, 1 or 2 denotes bus number, i2c address or SPI CS pin, reset pin, irq pin</p> <p><code>:UTT</code><br> touch check call </p> <p><code>:UTX</code><br> get x coordinate </p> <p><code>:UTY</code><br> get y coordinate </p> <p>commands:<br> input goes to array[16]<br> result register holds move or compare </p> <p>DN = decimal number<br> HN = hex number </p> <p><code>RD HN</code> = read one byte (from bytes adress)<br> <code>RDM HN DN</code> = read n bytes (from bytes adress) </p> <p><code>RDW HWN</code> = read one byte (from word adress)<br> <code>RDWM HWN DN</code> = read n bytes (from word adress) </p> <p><code>WR HN HN</code> = write one byte (to bytes adress)<br> <code>WRW HWN HN</code> = write one byte (to word adress) </p> <p><code>CP HN</code> = compare array[0] with immediate to result<br> <code>CPM NUM HN1 HN2 HNx</code> = compare array[0] with NUM immediate numbers to result</p> <p><code>CPR HN</code> = compare result with immediate to result </p> <p><code>RTF</code> = return when result == false with false<br> <code>RTT</code> = return when result == true with false </p> <p><code>MV DN DN</code> = move from array index to result, second parameter: 1 = move byte, 2 = move word, 3 = move word, reverse order </p> <p><code>MVB DN DN</code> = move byte from array index to result, par1; 0 = low, 1 = high byte, par2 = array index </p> <p><code>AND HWN</code> = and result with immediate HEX WORD to result </p> <p><code>SCL DWN FLOAT</code> = scale result by subtracting first paramter and multiplying with second float paramter </p> <p><code>LIM DWN</code> = limit result with immediate word to result </p> <p><code>RT</code> = return result </p> <p><code>GSRT DN</code> = get result from simple resitive touch to array, parameter = threshold </p> <p><code>XPT DN</code> = get result from XPT2046 SPI touch chip to array, parameter = threshold </p> <p><code>DBG DN</code> = log result and first 4 array bytes, DN = id number </p> <p>example: </p> <div class=highlight><pre><span></span><code>:H,ILI9342,320,240,16,SPI,1,5,18,23,15,-1,-1,38,40
:S,2,1,3,0,100,100
:B,60,0
:I
EF,3,03,80,02
CF,3,00,C1,30
ED,4,64,03,12,81
E8,3,85,00,78
CB,5,39,2C,00,34,02
F7,1,20
EA,2,00,00
C0,1,23
C1,1,10
C5,2,3e,28
C7,1,86
36,1,48
37,1,00
3A,1,55
B1,2,00,18
B6,3,08,82,27
F2,1,00
26,1,01
E0,0F,0F,31,2B,0C,0E,08,4E,F1,37,07,10,03,0E,09,00
E1,0F,00,0E,14,03,11,07,31,C1,48,08,0F,0C,31,36,0F
21,80
11,80
29,80
:o,28
:O,29
:A,2A,2B,2C,16
:R,36
:0,08,00,00,00
:1,A8,00,00,84
:2,C8,00,00,02
:3,68,00,00,85
:i,21,20
:UTI,FT5206,I2,38,-1,-1
RD A8
CP 11
RTF
RD A3
CP 64
RTF
RT
:UTT
RDM 00 16
MV 2 1
RT
:UTX
MV 3 2
RT
:UTY
MV 5 2
RT
#
</code></pre></div> <h3 id=ft5206-example_1>FT5206 example<a class=headerlink href=#ft5206-example_1 title="Permanent link">~</a></h3> <div class=highlight><pre><span></span><code>:UTI,FT5206,I2,38,-1,-1
RD A8
CP 11
RTF
RD A3
CP 64
RTF
RT
:UTT
RDM 00 16
MV 2 1
RT
:UTX
MV 3 2
RT
:UTY
MV 5 2
RT
#
</code></pre></div> <h3 id=xpt2046-example_1>XPT2046 example<a class=headerlink href=#xpt2046-example_1 title="Permanent link">~</a></h3> <div class=highlight><pre><span></span><code>:UTI,XPT2046,S1,21,-1,22
CPR 00
RT
:UTT
XPT 300
RT
:UTX
MV 0 2
;DBG 1
SCL 460 0.0930233
LIM 319
RT
:UTY
MV 2 2
SCL 300 0.0695652
LIM 239
RT
#
</code></pre></div> <h3 id=gt911-example_1>GT911 example<a class=headerlink href=#gt911-example_1 title="Permanent link">~</a></h3> <div class=highlight><pre><span></span><code>:UTI,GT911,I1,5d,38,-1
RDWM 8140 4
MV 0 1
CPR 39
RTF
MV 1 1
CPR 31
RTF
MV 2 1
CPR 31
RTF
RT
:UTT
RDW 814E
MV 0 1
AND 80
CPR 80
RTF
RDWM 8150 8
WRW 814E 00
RT
:UTX
MV 0 3
RT
:UTY
MV 2 3
RT
#
</code></pre></div> <h3 id=simple-resitive-touch-example_1>Simple resitive touch example<a class=headerlink href=#simple-resitive-touch-example_1 title="Permanent link">~</a></h3> <div class=highlight><pre><span></span><code>:UTI,SRES,R
CPR 00
RT
:UTT
GSRT 500
RT
:UTX
MV 0 2
RT
:UTY
MV 2 2
RT
#
</code></pre></div> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> <button type=button class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg> Back to top </button> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> <div class=md-social> <a href=https://discord.gg/Ks2Kzd4 target=_blank rel=noopener title=discord.gg class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 576 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M492.5 69.8c-.2-.3-.4-.6-.8-.7-38.1-17.5-78.4-30-119.7-37.1-.4-.1-.8 0-1.1.1s-.6.4-.8.8c-5.5 9.9-10.5 20.2-14.9 30.6-44.6-6.8-89.9-6.8-134.4 0-4.5-10.5-9.5-20.7-15.1-30.6-.2-.3-.5-.6-.8-.8s-.7-.2-1.1-.2C162.5 39 122.2 51.5 84.1 69c-.3.1-.6.4-.8.7C7.1 183.5-13.8 294.6-3.6 404.2c0 .3.1.5.2.8s.3.4.5.6c44.4 32.9 94 58 146.8 74.2.4.1.8.1 1.1 0s.7-.4.9-.7c11.3-15.4 21.4-31.8 30-48.8.1-.2.2-.5.2-.8s0-.5-.1-.8-.2-.5-.4-.6-.4-.3-.7-.4c-15.8-6.1-31.2-13.4-45.9-21.9-.3-.2-.5-.4-.7-.6s-.3-.6-.3-.9 0-.6.2-.9.3-.5.6-.7c3.1-2.3 6.2-4.7 9.1-7.1.3-.2.6-.4.9-.4s.7 0 1 .1c96.2 43.9 200.4 43.9 295.5 0 .3-.1.7-.2 1-.2s.7.2.9.4c2.9 2.4 6 4.9 9.1 7.2.2.2.4.4.6.7s.2.6.2.9-.1.6-.3.9-.4.5-.6.6c-14.7 8.6-30 15.9-45.9 21.8-.2.1-.5.2-.7.4s-.3.4-.4.7-.1.5-.1.8.1.5.2.8c8.8 17 18.8 33.3 30 48.8.2.3.6.6.9.7s.8.1 1.1 0c52.9-16.2 102.6-41.3 147.1-74.2.2-.2.4-.4.5-.6s.2-.5.2-.8c12.3-126.8-20.5-236.9-86.9-334.5zm-302 267.7c-29 0-52.8-26.6-52.8-59.2s23.4-59.2 52.8-59.2c29.7 0 53.3 26.8 52.8 59.2 0 32.7-23.4 59.2-52.8 59.2m195.4 0c-29 0-52.8-26.6-52.8-59.2s23.4-59.2 52.8-59.2c29.7 0 53.3 26.8 52.8 59.2 0 32.7-23.2 59.2-52.8 59.2"/></svg> </a> <a href=https://t.me/tasmota target=_blank rel=noopener title=t.me class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M256 8a248 248 0 1 0 0 496 248 248 0 1 0 0-496m115 168.7c-3.7 39.2-19.9 134.4-28.1 178.3-3.5 18.6-10.3 24.8-16.9 25.4-14.4 1.3-25.3-9.5-39.3-18.7-21.8-14.3-34.2-23.2-55.3-37.2-24.5-16.1-8.6-25 5.3-39.5 3.7-3.8 67.1-61.5 68.3-66.7.2-.7.3-3.1-1.2-4.4s-3.6-.8-5.1-.5c-2.2.5-37.1 23.5-104.6 69.1-9.9 6.8-18.9 10.1-26.9 9.9-8.9-.2-25.9-5-38.6-9.1-15.5-5-27.9-7.7-26.8-16.3.6-4.5 6.7-9 18.4-13.7 72.3-31.5 120.5-52.3 144.6-62.3 68.9-28.6 83.2-33.6 92.5-33.8 2.1 0 6.6.5 9.6 2.9 2 1.7 3.2 4.1 3.5 6.7.5 3.2.6 6.5.4 9.8z"/></svg> </a> <a href=https://github.com/tasmota target=_blank rel=noopener title=github.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M202.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1M496 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2m-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3m-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"annotate": null, "base": "..", "features": ["navigation.instant", "navigation.tabs", "navigation.tabs.sticky", "navigation.top", "navigation.tracking", "content.action.edit", "content.code.copy"], "search": "../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script> <script src=../assets/javascripts/bundle.79ae519e.min.js></script> <script src=https://unpkg.com/tablesort@5.3.0/dist/tablesort.min.js></script> <script src=../extra_javascript/tablesort.js></script> </body> </html>